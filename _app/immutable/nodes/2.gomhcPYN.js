import{A as Kt,s as Ue,f as K,a as lt,l as zt,g as Y,h as et,c as ct,m as At,d as Q,B as Et,C as Rt,j as V,D as Ne,i as Tt,x as I,E as ee,F as wt,y as pe,n as Dt,G as Re,H as ir,p as sr,e as yn,k as re,I as ar,J as Qn}from"../chunks/scheduler.kyyrafxV.js";import{a as ie,t as le,S as Le,i as Fe,g as $n,c as tr,b as He,d as Ge,m as Ve,e as Ke}from"../chunks/index.buKi1GJv.js";function Ct(S){return S?.length!==void 0?S:Array.from(S)}function Zt(S,p){S.d(1),p.delete(S.key)}function or(S,p){le(S,1,1,()=>{p.delete(S.key)})}function Pt(S,p,t,i,h,s,a,e,d,b,v,y){let w=S.length,c=s.length,m=w;const r={};for(;m--;)r[S[m].key]=m;const l=[],u=new Map,g=new Map,k=[];for(m=c;m--;){const A=y(h,s,m),P=t(A);let T=a.get(P);T?i&&k.push(()=>T.p(A,p)):(T=b(P,A),T.c()),u.set(P,l[m]=T),P in r&&g.set(P,Math.abs(m-r[P]))}const z=new Set,x=new Set;function D(A){ie(A,1),A.m(e,v),a.set(A.key,A),v=A.first,c--}for(;w&&c;){const A=l[c-1],P=S[w-1],T=A.key,j=P.key;A===P?(v=A.first,w--,c--):u.has(j)?!a.has(T)||z.has(T)?D(A):x.has(j)?w--:g.get(T)>g.get(j)?(x.add(T),D(A)):(z.add(j),w--):(d(P,a),w--)}for(;w--;){const A=S[w];u.has(A.key)||d(A,a)}for(;c;)D(l[c-1]);return Kt(k),l}class Pe{_references=new Map;_add_reference(p,t){let i=this._references.get(p);i===void 0&&(i=[],this._references.set(p,i)),i.push(t)}_remove_reference(p,t){let i=this._references.get(p);if(i!==void 0){const h=i.indexOf(t);h>=0&&i.splice(h,1)}}_clear_references(){for(const[p,t]of this._references.entries())for(const i of t)i._detach_reference(p,this)}_detach_reference(p,t){}}class wn extends Pe{constructor(p=""){super(),this.name=p}}class lr extends Pe{constructor(p=""){super(),this.name=p}}class Wt extends Pe{static TAGS=Symbol("tags");_tags=new Set;get tags(){return this._tags}tags_add(p){this._tags.add(p),p._add_reference(Wt.TAGS,this)}tags_remove(p){this._tags.delete(p)&&p._remove_reference(Wt.TAGS,this)}static INPUTS=Symbol("inputs");_inputs=new Set;get inputs(){return this._inputs}inputs_add(p){this._inputs.add(p),p._add_reference(Wt.INPUTS,this)}inputs_remove(p){this._inputs.delete(p)&&p._remove_reference(Wt.INPUTS,this)}static OUTPUTS=Symbol("outputs");_outputs=new Set;get outputs(){return this._outputs}outputs_add(p){this._outputs.add(p),p._add_reference(Wt.OUTPUTS,this)}outputs_remove(p){this._outputs.delete(p)&&p._remove_reference(Wt.OUTPUTS,this)}_detach_reference(p,t){switch(p){case Wt.TAGS:this._tags.delete(t);break;case Wt.INPUTS:this._inputs.delete(t);break;case Wt.OUTPUTS:this._outputs.delete(t);break}}}class ne extends Pe{constructor(p="",t=void 0){super(),this.name=p,this.image=t}static TAGS=Symbol("tags");_tags=new Set;get tags(){return this._tags}tags_add(p){this._tags.add(p),p._add_reference(ne.TAGS,this)}tags_remove(p){this._tags.delete(p)&&p._remove_reference(ne.TAGS,this)}static CONVERSIONS=Symbol("conversions");_conversions=new Set;get conversions(){return this._conversions}conversions_add(p){this._conversions.add(p),p._add_reference(ne.CONVERSIONS,this)}conversions_remove(p){this._conversions.delete(p)&&p._remove_reference(ne.CONVERSIONS,this)}_detach_reference(p,t){switch(p){case ne.TAGS:this._tags.delete(t);break;case ne.CONVERSIONS:this._conversions.delete(t);break}}}class We{constructor(p=""){this.name=p}_effects=new Set;get effects(){return this._effects}effects_create(p){const t=new lr(p);return this._effects.add(t),t}effects_delete(p){this._effects.delete(p)&&p._clear_references()}_conversions=new Set;get conversions(){return this._conversions}conversions_create(){const p=new Wt;return this._conversions.add(p),p}conversions_delete(p){this._conversions.delete(p)&&p._clear_references()}_items=new Set;get items(){return this._items}items_create(p,t){const i=new ne(p,t);return this._items.add(i),i}items_delete(p){this._items.delete(p)&&p._clear_references()}_item_tags=new Set;get item_tags(){return this._item_tags}item_tags_create(p){const t=new wn(p);return this._item_tags.add(t),t}item_tags_delete(p){this._item_tags.delete(p)&&p._clear_references()}_conversion_tags=new Set;get conversion_tags(){return this._conversion_tags}conversion_tags_create(p){const t=new wn(p);return this._conversion_tags.add(t),t}conversion_tags_delete(p){this._conversion_tags.delete(p)&&p._clear_references()}}var Oe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cr(S){return S&&S.__esModule&&Object.prototype.hasOwnProperty.call(S,"default")?S.default:S}function Be(S){throw new Error('Could not dynamically require "'+S+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var er={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(S,p){(function(t){S.exports=t()})(function(){return function t(i,h,s){function a(b,v){if(!h[b]){if(!i[b]){var y=typeof Be=="function"&&Be;if(!v&&y)return y(b,!0);if(e)return e(b,!0);var w=new Error("Cannot find module '"+b+"'");throw w.code="MODULE_NOT_FOUND",w}var c=h[b]={exports:{}};i[b][0].call(c.exports,function(m){var r=i[b][1][m];return a(r||m)},c,c.exports,t,i,h,s)}return h[b].exports}for(var e=typeof Be=="function"&&Be,d=0;d<s.length;d++)a(s[d]);return a}({1:[function(t,i,h){var s=t("./utils"),a=t("./support"),e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";h.encode=function(d){for(var b,v,y,w,c,m,r,l=[],u=0,g=d.length,k=g,z=s.getTypeOf(d)!=="string";u<d.length;)k=g-u,y=z?(b=d[u++],v=u<g?d[u++]:0,u<g?d[u++]:0):(b=d.charCodeAt(u++),v=u<g?d.charCodeAt(u++):0,u<g?d.charCodeAt(u++):0),w=b>>2,c=(3&b)<<4|v>>4,m=1<k?(15&v)<<2|y>>6:64,r=2<k?63&y:64,l.push(e.charAt(w)+e.charAt(c)+e.charAt(m)+e.charAt(r));return l.join("")},h.decode=function(d){var b,v,y,w,c,m,r=0,l=0,u="data:";if(d.substr(0,u.length)===u)throw new Error("Invalid base64 input, it looks like a data url.");var g,k=3*(d=d.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(d.charAt(d.length-1)===e.charAt(64)&&k--,d.charAt(d.length-2)===e.charAt(64)&&k--,k%1!=0)throw new Error("Invalid base64 input, bad content length.");for(g=a.uint8array?new Uint8Array(0|k):new Array(0|k);r<d.length;)b=e.indexOf(d.charAt(r++))<<2|(w=e.indexOf(d.charAt(r++)))>>4,v=(15&w)<<4|(c=e.indexOf(d.charAt(r++)))>>2,y=(3&c)<<6|(m=e.indexOf(d.charAt(r++))),g[l++]=b,c!==64&&(g[l++]=v),m!==64&&(g[l++]=y);return g}},{"./support":30,"./utils":32}],2:[function(t,i,h){var s=t("./external"),a=t("./stream/DataWorker"),e=t("./stream/Crc32Probe"),d=t("./stream/DataLengthProbe");function b(v,y,w,c,m){this.compressedSize=v,this.uncompressedSize=y,this.crc32=w,this.compression=c,this.compressedContent=m}b.prototype={getContentWorker:function(){var v=new a(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new d("data_length")),y=this;return v.on("end",function(){if(this.streamInfo.data_length!==y.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),v},getCompressedWorker:function(){return new a(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},b.createWorkerFrom=function(v,y,w){return v.pipe(new e).pipe(new d("uncompressedSize")).pipe(y.compressWorker(w)).pipe(new d("compressedSize")).withStreamInfo("compression",y)},i.exports=b},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,i,h){var s=t("./stream/GenericWorker");h.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},h.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,i,h){var s=t("./utils"),a=function(){for(var e,d=[],b=0;b<256;b++){e=b;for(var v=0;v<8;v++)e=1&e?3988292384^e>>>1:e>>>1;d[b]=e}return d}();i.exports=function(e,d){return e!==void 0&&e.length?s.getTypeOf(e)!=="string"?function(b,v,y,w){var c=a,m=w+y;b^=-1;for(var r=w;r<m;r++)b=b>>>8^c[255&(b^v[r])];return-1^b}(0|d,e,e.length,0):function(b,v,y,w){var c=a,m=w+y;b^=-1;for(var r=w;r<m;r++)b=b>>>8^c[255&(b^v.charCodeAt(r))];return-1^b}(0|d,e,e.length,0):0}},{"./utils":32}],5:[function(t,i,h){h.base64=!1,h.binary=!1,h.dir=!1,h.createFolders=!0,h.date=null,h.compression=null,h.compressionOptions=null,h.comment=null,h.unixPermissions=null,h.dosPermissions=null},{}],6:[function(t,i,h){var s=null;s=typeof Promise<"u"?Promise:t("lie"),i.exports={Promise:s}},{lie:37}],7:[function(t,i,h){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=t("pako"),e=t("./utils"),d=t("./stream/GenericWorker"),b=s?"uint8array":"array";function v(y,w){d.call(this,"FlateWorker/"+y),this._pako=null,this._pakoAction=y,this._pakoOptions=w,this.meta={}}h.magic="\b\0",e.inherits(v,d),v.prototype.processChunk=function(y){this.meta=y.meta,this._pako===null&&this._createPako(),this._pako.push(e.transformTo(b,y.data),!1)},v.prototype.flush=function(){d.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},v.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this._pako=null},v.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var y=this;this._pako.onData=function(w){y.push({data:w,meta:y.meta})}},h.compressWorker=function(y){return new v("Deflate",y)},h.uncompressWorker=function(){return new v("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,i,h){function s(c,m){var r,l="";for(r=0;r<m;r++)l+=String.fromCharCode(255&c),c>>>=8;return l}function a(c,m,r,l,u,g){var k,z,x=c.file,D=c.compression,A=g!==b.utf8encode,P=e.transformTo("string",g(x.name)),T=e.transformTo("string",b.utf8encode(x.name)),j=x.comment,nt=e.transformTo("string",g(j)),E=e.transformTo("string",b.utf8encode(j)),U=T.length!==x.name.length,o=E.length!==j.length,W="",at="",q="",F=x.dir,Z=x.date,ot={crc32:0,compressedSize:0,uncompressedSize:0};m&&!r||(ot.crc32=c.crc32,ot.compressedSize=c.compressedSize,ot.uncompressedSize=c.uncompressedSize);var O=0;m&&(O|=8),A||!U&&!o||(O|=2048);var N=0,H=0;F&&(N|=16),u==="UNIX"?(H=798,N|=function(G,vt){var bt=G;return G||(bt=vt?16893:33204),(65535&bt)<<16}(x.unixPermissions,F)):(H=20,N|=function(G){return 63&(G||0)}(x.dosPermissions)),k=Z.getUTCHours(),k<<=6,k|=Z.getUTCMinutes(),k<<=5,k|=Z.getUTCSeconds()/2,z=Z.getUTCFullYear()-1980,z<<=4,z|=Z.getUTCMonth()+1,z<<=5,z|=Z.getUTCDate(),U&&(at=s(1,1)+s(v(P),4)+T,W+="up"+s(at.length,2)+at),o&&(q=s(1,1)+s(v(nt),4)+E,W+="uc"+s(q.length,2)+q);var L="";return L+=`
\0`,L+=s(O,2),L+=D.magic,L+=s(k,2),L+=s(z,2),L+=s(ot.crc32,4),L+=s(ot.compressedSize,4),L+=s(ot.uncompressedSize,4),L+=s(P.length,2),L+=s(W.length,2),{fileRecord:y.LOCAL_FILE_HEADER+L+P+W,dirRecord:y.CENTRAL_FILE_HEADER+s(H,2)+L+s(nt.length,2)+"\0\0\0\0"+s(N,4)+s(l,4)+P+W+nt}}var e=t("../utils"),d=t("../stream/GenericWorker"),b=t("../utf8"),v=t("../crc32"),y=t("../signature");function w(c,m,r,l){d.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=m,this.zipPlatform=r,this.encodeFileName=l,this.streamFiles=c,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}e.inherits(w,d),w.prototype.push=function(c){var m=c.meta.percent||0,r=this.entriesCount,l=this._sources.length;this.accumulate?this.contentBuffer.push(c):(this.bytesWritten+=c.data.length,d.prototype.push.call(this,{data:c.data,meta:{currentFile:this.currentFile,percent:r?(m+100*(r-l-1))/r:100}}))},w.prototype.openedSource=function(c){this.currentSourceOffset=this.bytesWritten,this.currentFile=c.file.name;var m=this.streamFiles&&!c.file.dir;if(m){var r=a(c,m,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},w.prototype.closedSource=function(c){this.accumulate=!1;var m=this.streamFiles&&!c.file.dir,r=a(c,m,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),m)this.push({data:function(l){return y.DATA_DESCRIPTOR+s(l.crc32,4)+s(l.compressedSize,4)+s(l.uncompressedSize,4)}(c),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},w.prototype.flush=function(){for(var c=this.bytesWritten,m=0;m<this.dirRecords.length;m++)this.push({data:this.dirRecords[m],meta:{percent:100}});var r=this.bytesWritten-c,l=function(u,g,k,z,x){var D=e.transformTo("string",x(z));return y.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(u,2)+s(u,2)+s(g,4)+s(k,4)+s(D.length,2)+D}(this.dirRecords.length,r,c,this.zipComment,this.encodeFileName);this.push({data:l,meta:{percent:100}})},w.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},w.prototype.registerPrevious=function(c){this._sources.push(c);var m=this;return c.on("data",function(r){m.processChunk(r)}),c.on("end",function(){m.closedSource(m.previous.streamInfo),m._sources.length?m.prepareNextSource():m.end()}),c.on("error",function(r){m.error(r)}),this},w.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},w.prototype.error=function(c){var m=this._sources;if(!d.prototype.error.call(this,c))return!1;for(var r=0;r<m.length;r++)try{m[r].error(c)}catch{}return!0},w.prototype.lock=function(){d.prototype.lock.call(this);for(var c=this._sources,m=0;m<c.length;m++)c[m].lock()},i.exports=w},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,i,h){var s=t("../compressions"),a=t("./ZipFileWorker");h.generateWorker=function(e,d,b){var v=new a(d.streamFiles,b,d.platform,d.encodeFileName),y=0;try{e.forEach(function(w,c){y++;var m=function(g,k){var z=g||k,x=s[z];if(!x)throw new Error(z+" is not a valid compression method !");return x}(c.options.compression,d.compression),r=c.options.compressionOptions||d.compressionOptions||{},l=c.dir,u=c.date;c._compressWorker(m,r).withStreamInfo("file",{name:w,dir:l,date:u,comment:c.comment||"",unixPermissions:c.unixPermissions,dosPermissions:c.dosPermissions}).pipe(v)}),v.entriesCount=y}catch(w){v.error(w)}return v}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,i,h){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new s;for(var e in this)typeof this[e]!="function"&&(a[e]=this[e]);return a}}(s.prototype=t("./object")).loadAsync=t("./load"),s.support=t("./support"),s.defaults=t("./defaults"),s.version="3.10.1",s.loadAsync=function(a,e){return new s().loadAsync(a,e)},s.external=t("./external"),i.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,i,h){var s=t("./utils"),a=t("./external"),e=t("./utf8"),d=t("./zipEntries"),b=t("./stream/Crc32Probe"),v=t("./nodejsUtils");function y(w){return new a.Promise(function(c,m){var r=w.decompressed.getContentWorker().pipe(new b);r.on("error",function(l){m(l)}).on("end",function(){r.streamInfo.crc32!==w.decompressed.crc32?m(new Error("Corrupted zip : CRC32 mismatch")):c()}).resume()})}i.exports=function(w,c){var m=this;return c=s.extend(c||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:e.utf8decode}),v.isNode&&v.isStream(w)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",w,!0,c.optimizedBinaryString,c.base64).then(function(r){var l=new d(c);return l.load(r),l}).then(function(r){var l=[a.Promise.resolve(r)],u=r.files;if(c.checkCRC32)for(var g=0;g<u.length;g++)l.push(y(u[g]));return a.Promise.all(l)}).then(function(r){for(var l=r.shift(),u=l.files,g=0;g<u.length;g++){var k=u[g],z=k.fileNameStr,x=s.resolve(k.fileNameStr);m.file(x,k.decompressed,{binary:!0,optimizedBinaryString:!0,date:k.date,dir:k.dir,comment:k.fileCommentStr.length?k.fileCommentStr:null,unixPermissions:k.unixPermissions,dosPermissions:k.dosPermissions,createFolders:c.createFolders}),k.dir||(m.file(x).unsafeOriginalName=z)}return l.zipComment.length&&(m.comment=l.zipComment),m})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,i,h){var s=t("../utils"),a=t("../stream/GenericWorker");function e(d,b){a.call(this,"Nodejs stream input adapter for "+d),this._upstreamEnded=!1,this._bindStream(b)}s.inherits(e,a),e.prototype._bindStream=function(d){var b=this;(this._stream=d).pause(),d.on("data",function(v){b.push({data:v,meta:{percent:0}})}).on("error",function(v){b.isPaused?this.generatedError=v:b.error(v)}).on("end",function(){b.isPaused?b._upstreamEnded=!0:b.end()})},e.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},e.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=e},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,i,h){var s=t("readable-stream").Readable;function a(e,d,b){s.call(this,d),this._helper=e;var v=this;e.on("data",function(y,w){v.push(y)||v._helper.pause(),b&&b(w)}).on("error",function(y){v.emit("error",y)}).on("end",function(){v.push(null)})}t("../utils").inherits(a,s),a.prototype._read=function(){this._helper.resume()},i.exports=a},{"../utils":32,"readable-stream":16}],14:[function(t,i,h){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,a);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,a)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var a=new Buffer(s);return a.fill(0),a},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(t,i,h){function s(x,D,A){var P,T=e.getTypeOf(D),j=e.extend(A||{},v);j.date=j.date||new Date,j.compression!==null&&(j.compression=j.compression.toUpperCase()),typeof j.unixPermissions=="string"&&(j.unixPermissions=parseInt(j.unixPermissions,8)),j.unixPermissions&&16384&j.unixPermissions&&(j.dir=!0),j.dosPermissions&&16&j.dosPermissions&&(j.dir=!0),j.dir&&(x=u(x)),j.createFolders&&(P=l(x))&&g.call(this,P,!0);var nt=T==="string"&&j.binary===!1&&j.base64===!1;A&&A.binary!==void 0||(j.binary=!nt),(D instanceof y&&D.uncompressedSize===0||j.dir||!D||D.length===0)&&(j.base64=!1,j.binary=!0,D="",j.compression="STORE",T="string");var E=null;E=D instanceof y||D instanceof d?D:m.isNode&&m.isStream(D)?new r(x,D):e.prepareContent(x,D,j.binary,j.optimizedBinaryString,j.base64);var U=new w(x,E,j);this.files[x]=U}var a=t("./utf8"),e=t("./utils"),d=t("./stream/GenericWorker"),b=t("./stream/StreamHelper"),v=t("./defaults"),y=t("./compressedObject"),w=t("./zipObject"),c=t("./generate"),m=t("./nodejsUtils"),r=t("./nodejs/NodejsStreamInputAdapter"),l=function(x){x.slice(-1)==="/"&&(x=x.substring(0,x.length-1));var D=x.lastIndexOf("/");return 0<D?x.substring(0,D):""},u=function(x){return x.slice(-1)!=="/"&&(x+="/"),x},g=function(x,D){return D=D!==void 0?D:v.createFolders,x=u(x),this.files[x]||s.call(this,x,null,{dir:!0,createFolders:D}),this.files[x]};function k(x){return Object.prototype.toString.call(x)==="[object RegExp]"}var z={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(x){var D,A,P;for(D in this.files)P=this.files[D],(A=D.slice(this.root.length,D.length))&&D.slice(0,this.root.length)===this.root&&x(A,P)},filter:function(x){var D=[];return this.forEach(function(A,P){x(A,P)&&D.push(P)}),D},file:function(x,D,A){if(arguments.length!==1)return x=this.root+x,s.call(this,x,D,A),this;if(k(x)){var P=x;return this.filter(function(j,nt){return!nt.dir&&P.test(j)})}var T=this.files[this.root+x];return T&&!T.dir?T:null},folder:function(x){if(!x)return this;if(k(x))return this.filter(function(T,j){return j.dir&&x.test(T)});var D=this.root+x,A=g.call(this,D),P=this.clone();return P.root=A.name,P},remove:function(x){x=this.root+x;var D=this.files[x];if(D||(x.slice(-1)!=="/"&&(x+="/"),D=this.files[x]),D&&!D.dir)delete this.files[x];else for(var A=this.filter(function(T,j){return j.name.slice(0,x.length)===x}),P=0;P<A.length;P++)delete this.files[A[P].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(x){var D,A={};try{if((A=e.extend(x||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=A.type.toLowerCase(),A.compression=A.compression.toUpperCase(),A.type==="binarystring"&&(A.type="string"),!A.type)throw new Error("No output type specified.");e.checkSupport(A.type),A.platform!=="darwin"&&A.platform!=="freebsd"&&A.platform!=="linux"&&A.platform!=="sunos"||(A.platform="UNIX"),A.platform==="win32"&&(A.platform="DOS");var P=A.comment||this.comment||"";D=c.generateWorker(this,A,P)}catch(T){(D=new d("error")).error(T)}return new b(D,A.type||"string",A.mimeType)},generateAsync:function(x,D){return this.generateInternalStream(x).accumulate(D)},generateNodeStream:function(x,D){return(x=x||{}).type||(x.type="nodebuffer"),this.generateInternalStream(x).toNodejsStream(D)}};i.exports=z},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,i,h){i.exports=t("stream")},{stream:void 0}],17:[function(t,i,h){var s=t("./DataReader");function a(e){s.call(this,e);for(var d=0;d<this.data.length;d++)e[d]=255&e[d]}t("../utils").inherits(a,s),a.prototype.byteAt=function(e){return this.data[this.zero+e]},a.prototype.lastIndexOfSignature=function(e){for(var d=e.charCodeAt(0),b=e.charCodeAt(1),v=e.charCodeAt(2),y=e.charCodeAt(3),w=this.length-4;0<=w;--w)if(this.data[w]===d&&this.data[w+1]===b&&this.data[w+2]===v&&this.data[w+3]===y)return w-this.zero;return-1},a.prototype.readAndCheckSignature=function(e){var d=e.charCodeAt(0),b=e.charCodeAt(1),v=e.charCodeAt(2),y=e.charCodeAt(3),w=this.readData(4);return d===w[0]&&b===w[1]&&v===w[2]&&y===w[3]},a.prototype.readData=function(e){if(this.checkOffset(e),e===0)return[];var d=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,d},i.exports=a},{"../utils":32,"./DataReader":18}],18:[function(t,i,h){var s=t("../utils");function a(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var d,b=0;for(this.checkOffset(e),d=this.index+e-1;d>=this.index;d--)b=(b<<8)+this.byteAt(d);return this.index+=e,b},readString:function(e){return s.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},i.exports=a},{"../utils":32}],19:[function(t,i,h){var s=t("./Uint8ArrayReader");function a(e){s.call(this,e)}t("../utils").inherits(a,s),a.prototype.readData=function(e){this.checkOffset(e);var d=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,d},i.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,i,h){var s=t("./DataReader");function a(e){s.call(this,e)}t("../utils").inherits(a,s),a.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},a.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},a.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},a.prototype.readData=function(e){this.checkOffset(e);var d=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,d},i.exports=a},{"../utils":32,"./DataReader":18}],21:[function(t,i,h){var s=t("./ArrayReader");function a(e){s.call(this,e)}t("../utils").inherits(a,s),a.prototype.readData=function(e){if(this.checkOffset(e),e===0)return new Uint8Array(0);var d=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,d},i.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(t,i,h){var s=t("../utils"),a=t("../support"),e=t("./ArrayReader"),d=t("./StringReader"),b=t("./NodeBufferReader"),v=t("./Uint8ArrayReader");i.exports=function(y){var w=s.getTypeOf(y);return s.checkSupport(w),w!=="string"||a.uint8array?w==="nodebuffer"?new b(y):a.uint8array?new v(s.transformTo("uint8array",y)):new e(s.transformTo("array",y)):new d(y)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,i,h){h.LOCAL_FILE_HEADER="PK",h.CENTRAL_FILE_HEADER="PK",h.CENTRAL_DIRECTORY_END="PK",h.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",h.ZIP64_CENTRAL_DIRECTORY_END="PK",h.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,i,h){var s=t("./GenericWorker"),a=t("../utils");function e(d){s.call(this,"ConvertWorker to "+d),this.destType=d}a.inherits(e,s),e.prototype.processChunk=function(d){this.push({data:a.transformTo(this.destType,d.data),meta:d.meta})},i.exports=e},{"../utils":32,"./GenericWorker":28}],25:[function(t,i,h){var s=t("./GenericWorker"),a=t("../crc32");function e(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(e,s),e.prototype.processChunk=function(d){this.streamInfo.crc32=a(d.data,this.streamInfo.crc32||0),this.push(d)},i.exports=e},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,i,h){var s=t("../utils"),a=t("./GenericWorker");function e(d){a.call(this,"DataLengthProbe for "+d),this.propName=d,this.withStreamInfo(d,0)}s.inherits(e,a),e.prototype.processChunk=function(d){if(d){var b=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=b+d.data.length}a.prototype.processChunk.call(this,d)},i.exports=e},{"../utils":32,"./GenericWorker":28}],27:[function(t,i,h){var s=t("../utils"),a=t("./GenericWorker");function e(d){a.call(this,"DataWorker");var b=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,d.then(function(v){b.dataIsReady=!0,b.data=v,b.max=v&&v.length||0,b.type=s.getTypeOf(v),b.isPaused||b._tickAndRepeat()},function(v){b.error(v)})}s.inherits(e,a),e.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},e.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},e.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},e.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var d=null,b=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":d=this.data.substring(this.index,b);break;case"uint8array":d=this.data.subarray(this.index,b);break;case"array":case"nodebuffer":d=this.data.slice(this.index,b)}return this.index=b,this.push({data:d,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=e},{"../utils":32,"./GenericWorker":28}],28:[function(t,i,h){function s(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,e){return this._listeners[a].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,e){if(this._listeners[a])for(var d=0;d<this._listeners[a].length;d++)this._listeners[a][d].call(this,e)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var e=this;return a.on("data",function(d){e.processChunk(d)}),a.on("end",function(){e.end()}),a.on("error",function(d){e.error(d)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,e){return this.extraStreamInfo[a]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},i.exports=s},{}],29:[function(t,i,h){var s=t("../utils"),a=t("./ConvertWorker"),e=t("./GenericWorker"),d=t("../base64"),b=t("../support"),v=t("../external"),y=null;if(b.nodestream)try{y=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function w(m,r){return new v.Promise(function(l,u){var g=[],k=m._internalType,z=m._outputType,x=m._mimeType;m.on("data",function(D,A){g.push(D),r&&r(A)}).on("error",function(D){g=[],u(D)}).on("end",function(){try{var D=function(A,P,T){switch(A){case"blob":return s.newBlob(s.transformTo("arraybuffer",P),T);case"base64":return d.encode(P);default:return s.transformTo(A,P)}}(z,function(A,P){var T,j=0,nt=null,E=0;for(T=0;T<P.length;T++)E+=P[T].length;switch(A){case"string":return P.join("");case"array":return Array.prototype.concat.apply([],P);case"uint8array":for(nt=new Uint8Array(E),T=0;T<P.length;T++)nt.set(P[T],j),j+=P[T].length;return nt;case"nodebuffer":return Buffer.concat(P);default:throw new Error("concat : unsupported type '"+A+"'")}}(k,g),x);l(D)}catch(A){u(A)}g=[]}).resume()})}function c(m,r,l){var u=r;switch(r){case"blob":case"arraybuffer":u="uint8array";break;case"base64":u="string"}try{this._internalType=u,this._outputType=r,this._mimeType=l,s.checkSupport(u),this._worker=m.pipe(new a(u)),m.lock()}catch(g){this._worker=new e("error"),this._worker.error(g)}}c.prototype={accumulate:function(m){return w(this,m)},on:function(m,r){var l=this;return m==="data"?this._worker.on(m,function(u){r.call(l,u.data,u.meta)}):this._worker.on(m,function(){s.delay(r,arguments,l)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(m){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new y(this,{objectMode:this._outputType!=="nodebuffer"},m)}},i.exports=c},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,i,h){if(h.base64=!0,h.array=!0,h.string=!0,h.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",h.nodebuffer=typeof Buffer<"u",h.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")h.blob=!1;else{var s=new ArrayBuffer(0);try{h.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(s),h.blob=a.getBlob("application/zip").size===0}catch{h.blob=!1}}}try{h.nodestream=!!t("readable-stream").Readable}catch{h.nodestream=!1}},{"readable-stream":16}],31:[function(t,i,h){for(var s=t("./utils"),a=t("./support"),e=t("./nodejsUtils"),d=t("./stream/GenericWorker"),b=new Array(256),v=0;v<256;v++)b[v]=252<=v?6:248<=v?5:240<=v?4:224<=v?3:192<=v?2:1;b[254]=b[254]=1;function y(){d.call(this,"utf-8 decode"),this.leftOver=null}function w(){d.call(this,"utf-8 encode")}h.utf8encode=function(c){return a.nodebuffer?e.newBufferFrom(c,"utf-8"):function(m){var r,l,u,g,k,z=m.length,x=0;for(g=0;g<z;g++)(64512&(l=m.charCodeAt(g)))==55296&&g+1<z&&(64512&(u=m.charCodeAt(g+1)))==56320&&(l=65536+(l-55296<<10)+(u-56320),g++),x+=l<128?1:l<2048?2:l<65536?3:4;for(r=a.uint8array?new Uint8Array(x):new Array(x),g=k=0;k<x;g++)(64512&(l=m.charCodeAt(g)))==55296&&g+1<z&&(64512&(u=m.charCodeAt(g+1)))==56320&&(l=65536+(l-55296<<10)+(u-56320),g++),l<128?r[k++]=l:(l<2048?r[k++]=192|l>>>6:(l<65536?r[k++]=224|l>>>12:(r[k++]=240|l>>>18,r[k++]=128|l>>>12&63),r[k++]=128|l>>>6&63),r[k++]=128|63&l);return r}(c)},h.utf8decode=function(c){return a.nodebuffer?s.transformTo("nodebuffer",c).toString("utf-8"):function(m){var r,l,u,g,k=m.length,z=new Array(2*k);for(r=l=0;r<k;)if((u=m[r++])<128)z[l++]=u;else if(4<(g=b[u]))z[l++]=65533,r+=g-1;else{for(u&=g===2?31:g===3?15:7;1<g&&r<k;)u=u<<6|63&m[r++],g--;1<g?z[l++]=65533:u<65536?z[l++]=u:(u-=65536,z[l++]=55296|u>>10&1023,z[l++]=56320|1023&u)}return z.length!==l&&(z.subarray?z=z.subarray(0,l):z.length=l),s.applyFromCharCode(z)}(c=s.transformTo(a.uint8array?"uint8array":"array",c))},s.inherits(y,d),y.prototype.processChunk=function(c){var m=s.transformTo(a.uint8array?"uint8array":"array",c.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var r=m;(m=new Uint8Array(r.length+this.leftOver.length)).set(this.leftOver,0),m.set(r,this.leftOver.length)}else m=this.leftOver.concat(m);this.leftOver=null}var l=function(g,k){var z;for((k=k||g.length)>g.length&&(k=g.length),z=k-1;0<=z&&(192&g[z])==128;)z--;return z<0||z===0?k:z+b[g[z]]>k?z:k}(m),u=m;l!==m.length&&(a.uint8array?(u=m.subarray(0,l),this.leftOver=m.subarray(l,m.length)):(u=m.slice(0,l),this.leftOver=m.slice(l,m.length))),this.push({data:h.utf8decode(u),meta:c.meta})},y.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:h.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},h.Utf8DecodeWorker=y,s.inherits(w,d),w.prototype.processChunk=function(c){this.push({data:h.utf8encode(c.data),meta:c.meta})},h.Utf8EncodeWorker=w},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,i,h){var s=t("./support"),a=t("./base64"),e=t("./nodejsUtils"),d=t("./external");function b(r){return r}function v(r,l){for(var u=0;u<r.length;++u)l[u]=255&r.charCodeAt(u);return l}t("setimmediate"),h.newBlob=function(r,l){h.checkSupport("blob");try{return new Blob([r],{type:l})}catch{try{var u=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return u.append(r),u.getBlob(l)}catch{throw new Error("Bug : can't construct the Blob.")}}};var y={stringifyByChunk:function(r,l,u){var g=[],k=0,z=r.length;if(z<=u)return String.fromCharCode.apply(null,r);for(;k<z;)l==="array"||l==="nodebuffer"?g.push(String.fromCharCode.apply(null,r.slice(k,Math.min(k+u,z)))):g.push(String.fromCharCode.apply(null,r.subarray(k,Math.min(k+u,z)))),k+=u;return g.join("")},stringifyByChar:function(r){for(var l="",u=0;u<r.length;u++)l+=String.fromCharCode(r[u]);return l},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,e.allocBuffer(1)).length===1}catch{return!1}}()}};function w(r){var l=65536,u=h.getTypeOf(r),g=!0;if(u==="uint8array"?g=y.applyCanBeUsed.uint8array:u==="nodebuffer"&&(g=y.applyCanBeUsed.nodebuffer),g)for(;1<l;)try{return y.stringifyByChunk(r,u,l)}catch{l=Math.floor(l/2)}return y.stringifyByChar(r)}function c(r,l){for(var u=0;u<r.length;u++)l[u]=r[u];return l}h.applyFromCharCode=w;var m={};m.string={string:b,array:function(r){return v(r,new Array(r.length))},arraybuffer:function(r){return m.string.uint8array(r).buffer},uint8array:function(r){return v(r,new Uint8Array(r.length))},nodebuffer:function(r){return v(r,e.allocBuffer(r.length))}},m.array={string:w,array:b,arraybuffer:function(r){return new Uint8Array(r).buffer},uint8array:function(r){return new Uint8Array(r)},nodebuffer:function(r){return e.newBufferFrom(r)}},m.arraybuffer={string:function(r){return w(new Uint8Array(r))},array:function(r){return c(new Uint8Array(r),new Array(r.byteLength))},arraybuffer:b,uint8array:function(r){return new Uint8Array(r)},nodebuffer:function(r){return e.newBufferFrom(new Uint8Array(r))}},m.uint8array={string:w,array:function(r){return c(r,new Array(r.length))},arraybuffer:function(r){return r.buffer},uint8array:b,nodebuffer:function(r){return e.newBufferFrom(r)}},m.nodebuffer={string:w,array:function(r){return c(r,new Array(r.length))},arraybuffer:function(r){return m.nodebuffer.uint8array(r).buffer},uint8array:function(r){return c(r,new Uint8Array(r.length))},nodebuffer:b},h.transformTo=function(r,l){if(l=l||"",!r)return l;h.checkSupport(r);var u=h.getTypeOf(l);return m[u][r](l)},h.resolve=function(r){for(var l=r.split("/"),u=[],g=0;g<l.length;g++){var k=l[g];k==="."||k===""&&g!==0&&g!==l.length-1||(k===".."?u.pop():u.push(k))}return u.join("/")},h.getTypeOf=function(r){return typeof r=="string"?"string":Object.prototype.toString.call(r)==="[object Array]"?"array":s.nodebuffer&&e.isBuffer(r)?"nodebuffer":s.uint8array&&r instanceof Uint8Array?"uint8array":s.arraybuffer&&r instanceof ArrayBuffer?"arraybuffer":void 0},h.checkSupport=function(r){if(!s[r.toLowerCase()])throw new Error(r+" is not supported by this platform")},h.MAX_VALUE_16BITS=65535,h.MAX_VALUE_32BITS=-1,h.pretty=function(r){var l,u,g="";for(u=0;u<(r||"").length;u++)g+="\\x"+((l=r.charCodeAt(u))<16?"0":"")+l.toString(16).toUpperCase();return g},h.delay=function(r,l,u){setImmediate(function(){r.apply(u||null,l||[])})},h.inherits=function(r,l){function u(){}u.prototype=l.prototype,r.prototype=new u},h.extend=function(){var r,l,u={};for(r=0;r<arguments.length;r++)for(l in arguments[r])Object.prototype.hasOwnProperty.call(arguments[r],l)&&u[l]===void 0&&(u[l]=arguments[r][l]);return u},h.prepareContent=function(r,l,u,g,k){return d.Promise.resolve(l).then(function(z){return s.blob&&(z instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(z))!==-1)&&typeof FileReader<"u"?new d.Promise(function(x,D){var A=new FileReader;A.onload=function(P){x(P.target.result)},A.onerror=function(P){D(P.target.error)},A.readAsArrayBuffer(z)}):z}).then(function(z){var x=h.getTypeOf(z);return x?(x==="arraybuffer"?z=h.transformTo("uint8array",z):x==="string"&&(k?z=a.decode(z):u&&g!==!0&&(z=function(D){return v(D,s.uint8array?new Uint8Array(D.length):new Array(D.length))}(z))),z):d.Promise.reject(new Error("Can't read the data of '"+r+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,i,h){var s=t("./reader/readerFor"),a=t("./utils"),e=t("./signature"),d=t("./zipEntry"),b=t("./support");function v(y){this.files=[],this.loadOptions=y}v.prototype={checkSignature:function(y){if(!this.reader.readAndCheckSignature(y)){this.reader.index-=4;var w=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(w)+", expected "+a.pretty(y)+")")}},isSignature:function(y,w){var c=this.reader.index;this.reader.setIndex(y);var m=this.reader.readString(4)===w;return this.reader.setIndex(c),m},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var y=this.reader.readData(this.zipCommentLength),w=b.uint8array?"uint8array":"array",c=a.transformTo(w,y);this.zipComment=this.loadOptions.decodeFileName(c)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var y,w,c,m=this.zip64EndOfCentralSize-44;0<m;)y=this.reader.readInt(2),w=this.reader.readInt(4),c=this.reader.readData(w),this.zip64ExtensibleData[y]={id:y,length:w,value:c}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var y,w;for(y=0;y<this.files.length;y++)w=this.files[y],this.reader.setIndex(w.localHeaderOffset),this.checkSignature(e.LOCAL_FILE_HEADER),w.readLocalPart(this.reader),w.handleUTF8(),w.processAttributes()},readCentralDir:function(){var y;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(e.CENTRAL_FILE_HEADER);)(y=new d({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(y);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var y=this.reader.lastIndexOfSignature(e.CENTRAL_DIRECTORY_END);if(y<0)throw this.isSignature(0,e.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(y);var w=y;if(this.checkSignature(e.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(y=this.reader.lastIndexOfSignature(e.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(y),this.checkSignature(e.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,e.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(e.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(e.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var c=this.centralDirOffset+this.centralDirSize;this.zip64&&(c+=20,c+=12+this.zip64EndOfCentralSize);var m=w-c;if(0<m)this.isSignature(w,e.CENTRAL_FILE_HEADER)||(this.reader.zero=m);else if(m<0)throw new Error("Corrupted zip: missing "+Math.abs(m)+" bytes.")},prepareReader:function(y){this.reader=s(y)},load:function(y){this.prepareReader(y),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=v},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,i,h){var s=t("./reader/readerFor"),a=t("./utils"),e=t("./compressedObject"),d=t("./crc32"),b=t("./utf8"),v=t("./compressions"),y=t("./support");function w(c,m){this.options=c,this.loadOptions=m}w.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(c){var m,r;if(c.skip(22),this.fileNameLength=c.readInt(2),r=c.readInt(2),this.fileName=c.readData(this.fileNameLength),c.skip(r),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((m=function(l){for(var u in v)if(Object.prototype.hasOwnProperty.call(v,u)&&v[u].magic===l)return v[u];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new e(this.compressedSize,this.uncompressedSize,this.crc32,m,c.readData(this.compressedSize))},readCentralPart:function(c){this.versionMadeBy=c.readInt(2),c.skip(2),this.bitFlag=c.readInt(2),this.compressionMethod=c.readString(2),this.date=c.readDate(),this.crc32=c.readInt(4),this.compressedSize=c.readInt(4),this.uncompressedSize=c.readInt(4);var m=c.readInt(2);if(this.extraFieldsLength=c.readInt(2),this.fileCommentLength=c.readInt(2),this.diskNumberStart=c.readInt(2),this.internalFileAttributes=c.readInt(2),this.externalFileAttributes=c.readInt(4),this.localHeaderOffset=c.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");c.skip(m),this.readExtraFields(c),this.parseZIP64ExtraField(c),this.fileComment=c.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var c=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),c==0&&(this.dosPermissions=63&this.externalFileAttributes),c==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var c=s(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=c.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=c.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=c.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=c.readInt(4))}},readExtraFields:function(c){var m,r,l,u=c.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});c.index+4<u;)m=c.readInt(2),r=c.readInt(2),l=c.readData(r),this.extraFields[m]={id:m,length:r,value:l};c.setIndex(u)},handleUTF8:function(){var c=y.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=b.utf8decode(this.fileName),this.fileCommentStr=b.utf8decode(this.fileComment);else{var m=this.findExtraFieldUnicodePath();if(m!==null)this.fileNameStr=m;else{var r=a.transformTo(c,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var l=this.findExtraFieldUnicodeComment();if(l!==null)this.fileCommentStr=l;else{var u=a.transformTo(c,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(u)}}},findExtraFieldUnicodePath:function(){var c=this.extraFields[28789];if(c){var m=s(c.value);return m.readInt(1)!==1||d(this.fileName)!==m.readInt(4)?null:b.utf8decode(m.readData(c.length-5))}return null},findExtraFieldUnicodeComment:function(){var c=this.extraFields[25461];if(c){var m=s(c.value);return m.readInt(1)!==1||d(this.fileComment)!==m.readInt(4)?null:b.utf8decode(m.readData(c.length-5))}return null}},i.exports=w},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,i,h){function s(m,r,l){this.name=m,this.dir=l.dir,this.date=l.date,this.comment=l.comment,this.unixPermissions=l.unixPermissions,this.dosPermissions=l.dosPermissions,this._data=r,this._dataBinary=l.binary,this.options={compression:l.compression,compressionOptions:l.compressionOptions}}var a=t("./stream/StreamHelper"),e=t("./stream/DataWorker"),d=t("./utf8"),b=t("./compressedObject"),v=t("./stream/GenericWorker");s.prototype={internalStream:function(m){var r=null,l="string";try{if(!m)throw new Error("No output type specified.");var u=(l=m.toLowerCase())==="string"||l==="text";l!=="binarystring"&&l!=="text"||(l="string"),r=this._decompressWorker();var g=!this._dataBinary;g&&!u&&(r=r.pipe(new d.Utf8EncodeWorker)),!g&&u&&(r=r.pipe(new d.Utf8DecodeWorker))}catch(k){(r=new v("error")).error(k)}return new a(r,l,"")},async:function(m,r){return this.internalStream(m).accumulate(r)},nodeStream:function(m,r){return this.internalStream(m||"nodebuffer").toNodejsStream(r)},_compressWorker:function(m,r){if(this._data instanceof b&&this._data.compression.magic===m.magic)return this._data.getCompressedWorker();var l=this._decompressWorker();return this._dataBinary||(l=l.pipe(new d.Utf8EncodeWorker)),b.createWorkerFrom(l,m,r)},_decompressWorker:function(){return this._data instanceof b?this._data.getContentWorker():this._data instanceof v?this._data:new e(this._data)}};for(var y=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],w=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},c=0;c<y.length;c++)s.prototype[y[c]]=w;i.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,i,h){(function(s){var a,e,d=s.MutationObserver||s.WebKitMutationObserver;if(d){var b=0,v=new d(m),y=s.document.createTextNode("");v.observe(y,{characterData:!0}),a=function(){y.data=b=++b%2}}else if(s.setImmediate||s.MessageChannel===void 0)a="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var r=s.document.createElement("script");r.onreadystatechange=function(){m(),r.onreadystatechange=null,r.parentNode.removeChild(r),r=null},s.document.documentElement.appendChild(r)}:function(){setTimeout(m,0)};else{var w=new s.MessageChannel;w.port1.onmessage=m,a=function(){w.port2.postMessage(0)}}var c=[];function m(){var r,l;e=!0;for(var u=c.length;u;){for(l=c,c=[],r=-1;++r<u;)l[r]();u=c.length}e=!1}i.exports=function(r){c.push(r)!==1||e||a()}}).call(this,typeof Oe<"u"?Oe:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,i,h){var s=t("immediate");function a(){}var e={},d=["REJECTED"],b=["FULFILLED"],v=["PENDING"];function y(u){if(typeof u!="function")throw new TypeError("resolver must be a function");this.state=v,this.queue=[],this.outcome=void 0,u!==a&&r(this,u)}function w(u,g,k){this.promise=u,typeof g=="function"&&(this.onFulfilled=g,this.callFulfilled=this.otherCallFulfilled),typeof k=="function"&&(this.onRejected=k,this.callRejected=this.otherCallRejected)}function c(u,g,k){s(function(){var z;try{z=g(k)}catch(x){return e.reject(u,x)}z===u?e.reject(u,new TypeError("Cannot resolve promise with itself")):e.resolve(u,z)})}function m(u){var g=u&&u.then;if(u&&(typeof u=="object"||typeof u=="function")&&typeof g=="function")return function(){g.apply(u,arguments)}}function r(u,g){var k=!1;function z(A){k||(k=!0,e.reject(u,A))}function x(A){k||(k=!0,e.resolve(u,A))}var D=l(function(){g(x,z)});D.status==="error"&&z(D.value)}function l(u,g){var k={};try{k.value=u(g),k.status="success"}catch(z){k.status="error",k.value=z}return k}(i.exports=y).prototype.finally=function(u){if(typeof u!="function")return this;var g=this.constructor;return this.then(function(k){return g.resolve(u()).then(function(){return k})},function(k){return g.resolve(u()).then(function(){throw k})})},y.prototype.catch=function(u){return this.then(null,u)},y.prototype.then=function(u,g){if(typeof u!="function"&&this.state===b||typeof g!="function"&&this.state===d)return this;var k=new this.constructor(a);return this.state!==v?c(k,this.state===b?u:g,this.outcome):this.queue.push(new w(k,u,g)),k},w.prototype.callFulfilled=function(u){e.resolve(this.promise,u)},w.prototype.otherCallFulfilled=function(u){c(this.promise,this.onFulfilled,u)},w.prototype.callRejected=function(u){e.reject(this.promise,u)},w.prototype.otherCallRejected=function(u){c(this.promise,this.onRejected,u)},e.resolve=function(u,g){var k=l(m,g);if(k.status==="error")return e.reject(u,k.value);var z=k.value;if(z)r(u,z);else{u.state=b,u.outcome=g;for(var x=-1,D=u.queue.length;++x<D;)u.queue[x].callFulfilled(g)}return u},e.reject=function(u,g){u.state=d,u.outcome=g;for(var k=-1,z=u.queue.length;++k<z;)u.queue[k].callRejected(g);return u},y.resolve=function(u){return u instanceof this?u:e.resolve(new this(a),u)},y.reject=function(u){var g=new this(a);return e.reject(g,u)},y.all=function(u){var g=this;if(Object.prototype.toString.call(u)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=u.length,z=!1;if(!k)return this.resolve([]);for(var x=new Array(k),D=0,A=-1,P=new this(a);++A<k;)T(u[A],A);return P;function T(j,nt){g.resolve(j).then(function(E){x[nt]=E,++D!==k||z||(z=!0,e.resolve(P,x))},function(E){z||(z=!0,e.reject(P,E))})}},y.race=function(u){var g=this;if(Object.prototype.toString.call(u)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=u.length,z=!1;if(!k)return this.resolve([]);for(var x=-1,D=new this(a);++x<k;)A=u[x],g.resolve(A).then(function(P){z||(z=!0,e.resolve(D,P))},function(P){z||(z=!0,e.reject(D,P))});var A;return D}},{immediate:36}],38:[function(t,i,h){var s={};(0,t("./lib/utils/common").assign)(s,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),i.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,i,h){var s=t("./zlib/deflate"),a=t("./utils/common"),e=t("./utils/strings"),d=t("./zlib/messages"),b=t("./zlib/zstream"),v=Object.prototype.toString,y=0,w=-1,c=0,m=8;function r(u){if(!(this instanceof r))return new r(u);this.options=a.assign({level:w,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:c,to:""},u||{});var g=this.options;g.raw&&0<g.windowBits?g.windowBits=-g.windowBits:g.gzip&&0<g.windowBits&&g.windowBits<16&&(g.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new b,this.strm.avail_out=0;var k=s.deflateInit2(this.strm,g.level,g.method,g.windowBits,g.memLevel,g.strategy);if(k!==y)throw new Error(d[k]);if(g.header&&s.deflateSetHeader(this.strm,g.header),g.dictionary){var z;if(z=typeof g.dictionary=="string"?e.string2buf(g.dictionary):v.call(g.dictionary)==="[object ArrayBuffer]"?new Uint8Array(g.dictionary):g.dictionary,(k=s.deflateSetDictionary(this.strm,z))!==y)throw new Error(d[k]);this._dict_set=!0}}function l(u,g){var k=new r(g);if(k.push(u,!0),k.err)throw k.msg||d[k.err];return k.result}r.prototype.push=function(u,g){var k,z,x=this.strm,D=this.options.chunkSize;if(this.ended)return!1;z=g===~~g?g:g===!0?4:0,typeof u=="string"?x.input=e.string2buf(u):v.call(u)==="[object ArrayBuffer]"?x.input=new Uint8Array(u):x.input=u,x.next_in=0,x.avail_in=x.input.length;do{if(x.avail_out===0&&(x.output=new a.Buf8(D),x.next_out=0,x.avail_out=D),(k=s.deflate(x,z))!==1&&k!==y)return this.onEnd(k),!(this.ended=!0);x.avail_out!==0&&(x.avail_in!==0||z!==4&&z!==2)||(this.options.to==="string"?this.onData(e.buf2binstring(a.shrinkBuf(x.output,x.next_out))):this.onData(a.shrinkBuf(x.output,x.next_out)))}while((0<x.avail_in||x.avail_out===0)&&k!==1);return z===4?(k=s.deflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===y):z!==2||(this.onEnd(y),!(x.avail_out=0))},r.prototype.onData=function(u){this.chunks.push(u)},r.prototype.onEnd=function(u){u===y&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=u,this.msg=this.strm.msg},h.Deflate=r,h.deflate=l,h.deflateRaw=function(u,g){return(g=g||{}).raw=!0,l(u,g)},h.gzip=function(u,g){return(g=g||{}).gzip=!0,l(u,g)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,i,h){var s=t("./zlib/inflate"),a=t("./utils/common"),e=t("./utils/strings"),d=t("./zlib/constants"),b=t("./zlib/messages"),v=t("./zlib/zstream"),y=t("./zlib/gzheader"),w=Object.prototype.toString;function c(r){if(!(this instanceof c))return new c(r);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},r||{});var l=this.options;l.raw&&0<=l.windowBits&&l.windowBits<16&&(l.windowBits=-l.windowBits,l.windowBits===0&&(l.windowBits=-15)),!(0<=l.windowBits&&l.windowBits<16)||r&&r.windowBits||(l.windowBits+=32),15<l.windowBits&&l.windowBits<48&&!(15&l.windowBits)&&(l.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new v,this.strm.avail_out=0;var u=s.inflateInit2(this.strm,l.windowBits);if(u!==d.Z_OK)throw new Error(b[u]);this.header=new y,s.inflateGetHeader(this.strm,this.header)}function m(r,l){var u=new c(l);if(u.push(r,!0),u.err)throw u.msg||b[u.err];return u.result}c.prototype.push=function(r,l){var u,g,k,z,x,D,A=this.strm,P=this.options.chunkSize,T=this.options.dictionary,j=!1;if(this.ended)return!1;g=l===~~l?l:l===!0?d.Z_FINISH:d.Z_NO_FLUSH,typeof r=="string"?A.input=e.binstring2buf(r):w.call(r)==="[object ArrayBuffer]"?A.input=new Uint8Array(r):A.input=r,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new a.Buf8(P),A.next_out=0,A.avail_out=P),(u=s.inflate(A,d.Z_NO_FLUSH))===d.Z_NEED_DICT&&T&&(D=typeof T=="string"?e.string2buf(T):w.call(T)==="[object ArrayBuffer]"?new Uint8Array(T):T,u=s.inflateSetDictionary(this.strm,D)),u===d.Z_BUF_ERROR&&j===!0&&(u=d.Z_OK,j=!1),u!==d.Z_STREAM_END&&u!==d.Z_OK)return this.onEnd(u),!(this.ended=!0);A.next_out&&(A.avail_out!==0&&u!==d.Z_STREAM_END&&(A.avail_in!==0||g!==d.Z_FINISH&&g!==d.Z_SYNC_FLUSH)||(this.options.to==="string"?(k=e.utf8border(A.output,A.next_out),z=A.next_out-k,x=e.buf2string(A.output,k),A.next_out=z,A.avail_out=P-z,z&&a.arraySet(A.output,A.output,k,z,0),this.onData(x)):this.onData(a.shrinkBuf(A.output,A.next_out)))),A.avail_in===0&&A.avail_out===0&&(j=!0)}while((0<A.avail_in||A.avail_out===0)&&u!==d.Z_STREAM_END);return u===d.Z_STREAM_END&&(g=d.Z_FINISH),g===d.Z_FINISH?(u=s.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===d.Z_OK):g!==d.Z_SYNC_FLUSH||(this.onEnd(d.Z_OK),!(A.avail_out=0))},c.prototype.onData=function(r){this.chunks.push(r)},c.prototype.onEnd=function(r){r===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg},h.Inflate=c,h.inflate=m,h.inflateRaw=function(r,l){return(l=l||{}).raw=!0,m(r,l)},h.ungzip=m},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,i,h){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";h.assign=function(d){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var v=b.shift();if(v){if(typeof v!="object")throw new TypeError(v+"must be non-object");for(var y in v)v.hasOwnProperty(y)&&(d[y]=v[y])}}return d},h.shrinkBuf=function(d,b){return d.length===b?d:d.subarray?d.subarray(0,b):(d.length=b,d)};var a={arraySet:function(d,b,v,y,w){if(b.subarray&&d.subarray)d.set(b.subarray(v,v+y),w);else for(var c=0;c<y;c++)d[w+c]=b[v+c]},flattenChunks:function(d){var b,v,y,w,c,m;for(b=y=0,v=d.length;b<v;b++)y+=d[b].length;for(m=new Uint8Array(y),b=w=0,v=d.length;b<v;b++)c=d[b],m.set(c,w),w+=c.length;return m}},e={arraySet:function(d,b,v,y,w){for(var c=0;c<y;c++)d[w+c]=b[v+c]},flattenChunks:function(d){return[].concat.apply([],d)}};h.setTyped=function(d){d?(h.Buf8=Uint8Array,h.Buf16=Uint16Array,h.Buf32=Int32Array,h.assign(h,a)):(h.Buf8=Array,h.Buf16=Array,h.Buf32=Array,h.assign(h,e))},h.setTyped(s)},{}],42:[function(t,i,h){var s=t("./common"),a=!0,e=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{e=!1}for(var d=new s.Buf8(256),b=0;b<256;b++)d[b]=252<=b?6:248<=b?5:240<=b?4:224<=b?3:192<=b?2:1;function v(y,w){if(w<65537&&(y.subarray&&e||!y.subarray&&a))return String.fromCharCode.apply(null,s.shrinkBuf(y,w));for(var c="",m=0;m<w;m++)c+=String.fromCharCode(y[m]);return c}d[254]=d[254]=1,h.string2buf=function(y){var w,c,m,r,l,u=y.length,g=0;for(r=0;r<u;r++)(64512&(c=y.charCodeAt(r)))==55296&&r+1<u&&(64512&(m=y.charCodeAt(r+1)))==56320&&(c=65536+(c-55296<<10)+(m-56320),r++),g+=c<128?1:c<2048?2:c<65536?3:4;for(w=new s.Buf8(g),r=l=0;l<g;r++)(64512&(c=y.charCodeAt(r)))==55296&&r+1<u&&(64512&(m=y.charCodeAt(r+1)))==56320&&(c=65536+(c-55296<<10)+(m-56320),r++),c<128?w[l++]=c:(c<2048?w[l++]=192|c>>>6:(c<65536?w[l++]=224|c>>>12:(w[l++]=240|c>>>18,w[l++]=128|c>>>12&63),w[l++]=128|c>>>6&63),w[l++]=128|63&c);return w},h.buf2binstring=function(y){return v(y,y.length)},h.binstring2buf=function(y){for(var w=new s.Buf8(y.length),c=0,m=w.length;c<m;c++)w[c]=y.charCodeAt(c);return w},h.buf2string=function(y,w){var c,m,r,l,u=w||y.length,g=new Array(2*u);for(c=m=0;c<u;)if((r=y[c++])<128)g[m++]=r;else if(4<(l=d[r]))g[m++]=65533,c+=l-1;else{for(r&=l===2?31:l===3?15:7;1<l&&c<u;)r=r<<6|63&y[c++],l--;1<l?g[m++]=65533:r<65536?g[m++]=r:(r-=65536,g[m++]=55296|r>>10&1023,g[m++]=56320|1023&r)}return v(g,m)},h.utf8border=function(y,w){var c;for((w=w||y.length)>y.length&&(w=y.length),c=w-1;0<=c&&(192&y[c])==128;)c--;return c<0||c===0?w:c+d[y[c]]>w?c:w}},{"./common":41}],43:[function(t,i,h){i.exports=function(s,a,e,d){for(var b=65535&s|0,v=s>>>16&65535|0,y=0;e!==0;){for(e-=y=2e3<e?2e3:e;v=v+(b=b+a[d++]|0)|0,--y;);b%=65521,v%=65521}return b|v<<16|0}},{}],44:[function(t,i,h){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,i,h){var s=function(){for(var a,e=[],d=0;d<256;d++){a=d;for(var b=0;b<8;b++)a=1&a?3988292384^a>>>1:a>>>1;e[d]=a}return e}();i.exports=function(a,e,d,b){var v=s,y=b+d;a^=-1;for(var w=b;w<y;w++)a=a>>>8^v[255&(a^e[w])];return-1^a}},{}],46:[function(t,i,h){var s,a=t("../utils/common"),e=t("./trees"),d=t("./adler32"),b=t("./crc32"),v=t("./messages"),y=0,w=4,c=0,m=-2,r=-1,l=4,u=2,g=8,k=9,z=286,x=30,D=19,A=2*z+1,P=15,T=3,j=258,nt=j+T+1,E=42,U=113,o=1,W=2,at=3,q=4;function F(n,M){return n.msg=v[M],M}function Z(n){return(n<<1)-(4<n?9:0)}function ot(n){for(var M=n.length;0<=--M;)n[M]=0}function O(n){var M=n.state,R=M.pending;R>n.avail_out&&(R=n.avail_out),R!==0&&(a.arraySet(n.output,M.pending_buf,M.pending_out,R,n.next_out),n.next_out+=R,M.pending_out+=R,n.total_out+=R,n.avail_out-=R,M.pending-=R,M.pending===0&&(M.pending_out=0))}function N(n,M){e._tr_flush_block(n,0<=n.block_start?n.block_start:-1,n.strstart-n.block_start,M),n.block_start=n.strstart,O(n.strm)}function H(n,M){n.pending_buf[n.pending++]=M}function L(n,M){n.pending_buf[n.pending++]=M>>>8&255,n.pending_buf[n.pending++]=255&M}function G(n,M){var R,_,f=n.max_chain_length,C=n.strstart,X=n.prev_length,J=n.nice_match,B=n.strstart>n.w_size-nt?n.strstart-(n.w_size-nt):0,$=n.window,rt=n.w_mask,tt=n.prev,st=n.strstart+j,pt=$[C+X-1],mt=$[C+X];n.prev_length>=n.good_match&&(f>>=2),J>n.lookahead&&(J=n.lookahead);do if($[(R=M)+X]===mt&&$[R+X-1]===pt&&$[R]===$[C]&&$[++R]===$[C+1]){C+=2,R++;do;while($[++C]===$[++R]&&$[++C]===$[++R]&&$[++C]===$[++R]&&$[++C]===$[++R]&&$[++C]===$[++R]&&$[++C]===$[++R]&&$[++C]===$[++R]&&$[++C]===$[++R]&&C<st);if(_=j-(st-C),C=st-j,X<_){if(n.match_start=M,J<=(X=_))break;pt=$[C+X-1],mt=$[C+X]}}while((M=tt[M&rt])>B&&--f!=0);return X<=n.lookahead?X:n.lookahead}function vt(n){var M,R,_,f,C,X,J,B,$,rt,tt=n.w_size;do{if(f=n.window_size-n.lookahead-n.strstart,n.strstart>=tt+(tt-nt)){for(a.arraySet(n.window,n.window,tt,tt,0),n.match_start-=tt,n.strstart-=tt,n.block_start-=tt,M=R=n.hash_size;_=n.head[--M],n.head[M]=tt<=_?_-tt:0,--R;);for(M=R=tt;_=n.prev[--M],n.prev[M]=tt<=_?_-tt:0,--R;);f+=tt}if(n.strm.avail_in===0)break;if(X=n.strm,J=n.window,B=n.strstart+n.lookahead,$=f,rt=void 0,rt=X.avail_in,$<rt&&(rt=$),R=rt===0?0:(X.avail_in-=rt,a.arraySet(J,X.input,X.next_in,rt,B),X.state.wrap===1?X.adler=d(X.adler,J,rt,B):X.state.wrap===2&&(X.adler=b(X.adler,J,rt,B)),X.next_in+=rt,X.total_in+=rt,rt),n.lookahead+=R,n.lookahead+n.insert>=T)for(C=n.strstart-n.insert,n.ins_h=n.window[C],n.ins_h=(n.ins_h<<n.hash_shift^n.window[C+1])&n.hash_mask;n.insert&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[C+T-1])&n.hash_mask,n.prev[C&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=C,C++,n.insert--,!(n.lookahead+n.insert<T)););}while(n.lookahead<nt&&n.strm.avail_in!==0)}function bt(n,M){for(var R,_;;){if(n.lookahead<nt){if(vt(n),n.lookahead<nt&&M===y)return o;if(n.lookahead===0)break}if(R=0,n.lookahead>=T&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+T-1])&n.hash_mask,R=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),R!==0&&n.strstart-R<=n.w_size-nt&&(n.match_length=G(n,R)),n.match_length>=T)if(_=e._tr_tally(n,n.strstart-n.match_start,n.match_length-T),n.lookahead-=n.match_length,n.match_length<=n.max_lazy_match&&n.lookahead>=T){for(n.match_length--;n.strstart++,n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+T-1])&n.hash_mask,R=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart,--n.match_length!=0;);n.strstart++}else n.strstart+=n.match_length,n.match_length=0,n.ins_h=n.window[n.strstart],n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+1])&n.hash_mask;else _=e._tr_tally(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++;if(_&&(N(n,!1),n.strm.avail_out===0))return o}return n.insert=n.strstart<T-1?n.strstart:T-1,M===w?(N(n,!0),n.strm.avail_out===0?at:q):n.last_lit&&(N(n,!1),n.strm.avail_out===0)?o:W}function dt(n,M){for(var R,_,f;;){if(n.lookahead<nt){if(vt(n),n.lookahead<nt&&M===y)return o;if(n.lookahead===0)break}if(R=0,n.lookahead>=T&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+T-1])&n.hash_mask,R=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),n.prev_length=n.match_length,n.prev_match=n.match_start,n.match_length=T-1,R!==0&&n.prev_length<n.max_lazy_match&&n.strstart-R<=n.w_size-nt&&(n.match_length=G(n,R),n.match_length<=5&&(n.strategy===1||n.match_length===T&&4096<n.strstart-n.match_start)&&(n.match_length=T-1)),n.prev_length>=T&&n.match_length<=n.prev_length){for(f=n.strstart+n.lookahead-T,_=e._tr_tally(n,n.strstart-1-n.prev_match,n.prev_length-T),n.lookahead-=n.prev_length-1,n.prev_length-=2;++n.strstart<=f&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+T-1])&n.hash_mask,R=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),--n.prev_length!=0;);if(n.match_available=0,n.match_length=T-1,n.strstart++,_&&(N(n,!1),n.strm.avail_out===0))return o}else if(n.match_available){if((_=e._tr_tally(n,0,n.window[n.strstart-1]))&&N(n,!1),n.strstart++,n.lookahead--,n.strm.avail_out===0)return o}else n.match_available=1,n.strstart++,n.lookahead--}return n.match_available&&(_=e._tr_tally(n,0,n.window[n.strstart-1]),n.match_available=0),n.insert=n.strstart<T-1?n.strstart:T-1,M===w?(N(n,!0),n.strm.avail_out===0?at:q):n.last_lit&&(N(n,!1),n.strm.avail_out===0)?o:W}function _t(n,M,R,_,f){this.good_length=n,this.max_lazy=M,this.nice_length=R,this.max_chain=_,this.func=f}function yt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*A),this.dyn_dtree=new a.Buf16(2*(2*x+1)),this.bl_tree=new a.Buf16(2*(2*D+1)),ot(this.dyn_ltree),ot(this.dyn_dtree),ot(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(P+1),this.heap=new a.Buf16(2*z+1),ot(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*z+1),ot(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function gt(n){var M;return n&&n.state?(n.total_in=n.total_out=0,n.data_type=u,(M=n.state).pending=0,M.pending_out=0,M.wrap<0&&(M.wrap=-M.wrap),M.status=M.wrap?E:U,n.adler=M.wrap===2?0:1,M.last_flush=y,e._tr_init(M),c):F(n,m)}function kt(n){var M=gt(n);return M===c&&function(R){R.window_size=2*R.w_size,ot(R.head),R.max_lazy_match=s[R.level].max_lazy,R.good_match=s[R.level].good_length,R.nice_match=s[R.level].nice_length,R.max_chain_length=s[R.level].max_chain,R.strstart=0,R.block_start=0,R.lookahead=0,R.insert=0,R.match_length=R.prev_length=T-1,R.match_available=0,R.ins_h=0}(n.state),M}function St(n,M,R,_,f,C){if(!n)return m;var X=1;if(M===r&&(M=6),_<0?(X=0,_=-_):15<_&&(X=2,_-=16),f<1||k<f||R!==g||_<8||15<_||M<0||9<M||C<0||l<C)return F(n,m);_===8&&(_=9);var J=new yt;return(n.state=J).strm=n,J.wrap=X,J.gzhead=null,J.w_bits=_,J.w_size=1<<J.w_bits,J.w_mask=J.w_size-1,J.hash_bits=f+7,J.hash_size=1<<J.hash_bits,J.hash_mask=J.hash_size-1,J.hash_shift=~~((J.hash_bits+T-1)/T),J.window=new a.Buf8(2*J.w_size),J.head=new a.Buf16(J.hash_size),J.prev=new a.Buf16(J.w_size),J.lit_bufsize=1<<f+6,J.pending_buf_size=4*J.lit_bufsize,J.pending_buf=new a.Buf8(J.pending_buf_size),J.d_buf=1*J.lit_bufsize,J.l_buf=3*J.lit_bufsize,J.level=M,J.strategy=C,J.method=R,kt(n)}s=[new _t(0,0,0,0,function(n,M){var R=65535;for(R>n.pending_buf_size-5&&(R=n.pending_buf_size-5);;){if(n.lookahead<=1){if(vt(n),n.lookahead===0&&M===y)return o;if(n.lookahead===0)break}n.strstart+=n.lookahead,n.lookahead=0;var _=n.block_start+R;if((n.strstart===0||n.strstart>=_)&&(n.lookahead=n.strstart-_,n.strstart=_,N(n,!1),n.strm.avail_out===0)||n.strstart-n.block_start>=n.w_size-nt&&(N(n,!1),n.strm.avail_out===0))return o}return n.insert=0,M===w?(N(n,!0),n.strm.avail_out===0?at:q):(n.strstart>n.block_start&&(N(n,!1),n.strm.avail_out),o)}),new _t(4,4,8,4,bt),new _t(4,5,16,8,bt),new _t(4,6,32,32,bt),new _t(4,4,16,16,dt),new _t(8,16,32,32,dt),new _t(8,16,128,128,dt),new _t(8,32,128,256,dt),new _t(32,128,258,1024,dt),new _t(32,258,258,4096,dt)],h.deflateInit=function(n,M){return St(n,M,g,15,8,0)},h.deflateInit2=St,h.deflateReset=kt,h.deflateResetKeep=gt,h.deflateSetHeader=function(n,M){return n&&n.state?n.state.wrap!==2?m:(n.state.gzhead=M,c):m},h.deflate=function(n,M){var R,_,f,C;if(!n||!n.state||5<M||M<0)return n?F(n,m):m;if(_=n.state,!n.output||!n.input&&n.avail_in!==0||_.status===666&&M!==w)return F(n,n.avail_out===0?-5:m);if(_.strm=n,R=_.last_flush,_.last_flush=M,_.status===E)if(_.wrap===2)n.adler=0,H(_,31),H(_,139),H(_,8),_.gzhead?(H(_,(_.gzhead.text?1:0)+(_.gzhead.hcrc?2:0)+(_.gzhead.extra?4:0)+(_.gzhead.name?8:0)+(_.gzhead.comment?16:0)),H(_,255&_.gzhead.time),H(_,_.gzhead.time>>8&255),H(_,_.gzhead.time>>16&255),H(_,_.gzhead.time>>24&255),H(_,_.level===9?2:2<=_.strategy||_.level<2?4:0),H(_,255&_.gzhead.os),_.gzhead.extra&&_.gzhead.extra.length&&(H(_,255&_.gzhead.extra.length),H(_,_.gzhead.extra.length>>8&255)),_.gzhead.hcrc&&(n.adler=b(n.adler,_.pending_buf,_.pending,0)),_.gzindex=0,_.status=69):(H(_,0),H(_,0),H(_,0),H(_,0),H(_,0),H(_,_.level===9?2:2<=_.strategy||_.level<2?4:0),H(_,3),_.status=U);else{var X=g+(_.w_bits-8<<4)<<8;X|=(2<=_.strategy||_.level<2?0:_.level<6?1:_.level===6?2:3)<<6,_.strstart!==0&&(X|=32),X+=31-X%31,_.status=U,L(_,X),_.strstart!==0&&(L(_,n.adler>>>16),L(_,65535&n.adler)),n.adler=1}if(_.status===69)if(_.gzhead.extra){for(f=_.pending;_.gzindex<(65535&_.gzhead.extra.length)&&(_.pending!==_.pending_buf_size||(_.gzhead.hcrc&&_.pending>f&&(n.adler=b(n.adler,_.pending_buf,_.pending-f,f)),O(n),f=_.pending,_.pending!==_.pending_buf_size));)H(_,255&_.gzhead.extra[_.gzindex]),_.gzindex++;_.gzhead.hcrc&&_.pending>f&&(n.adler=b(n.adler,_.pending_buf,_.pending-f,f)),_.gzindex===_.gzhead.extra.length&&(_.gzindex=0,_.status=73)}else _.status=73;if(_.status===73)if(_.gzhead.name){f=_.pending;do{if(_.pending===_.pending_buf_size&&(_.gzhead.hcrc&&_.pending>f&&(n.adler=b(n.adler,_.pending_buf,_.pending-f,f)),O(n),f=_.pending,_.pending===_.pending_buf_size)){C=1;break}C=_.gzindex<_.gzhead.name.length?255&_.gzhead.name.charCodeAt(_.gzindex++):0,H(_,C)}while(C!==0);_.gzhead.hcrc&&_.pending>f&&(n.adler=b(n.adler,_.pending_buf,_.pending-f,f)),C===0&&(_.gzindex=0,_.status=91)}else _.status=91;if(_.status===91)if(_.gzhead.comment){f=_.pending;do{if(_.pending===_.pending_buf_size&&(_.gzhead.hcrc&&_.pending>f&&(n.adler=b(n.adler,_.pending_buf,_.pending-f,f)),O(n),f=_.pending,_.pending===_.pending_buf_size)){C=1;break}C=_.gzindex<_.gzhead.comment.length?255&_.gzhead.comment.charCodeAt(_.gzindex++):0,H(_,C)}while(C!==0);_.gzhead.hcrc&&_.pending>f&&(n.adler=b(n.adler,_.pending_buf,_.pending-f,f)),C===0&&(_.status=103)}else _.status=103;if(_.status===103&&(_.gzhead.hcrc?(_.pending+2>_.pending_buf_size&&O(n),_.pending+2<=_.pending_buf_size&&(H(_,255&n.adler),H(_,n.adler>>8&255),n.adler=0,_.status=U)):_.status=U),_.pending!==0){if(O(n),n.avail_out===0)return _.last_flush=-1,c}else if(n.avail_in===0&&Z(M)<=Z(R)&&M!==w)return F(n,-5);if(_.status===666&&n.avail_in!==0)return F(n,-5);if(n.avail_in!==0||_.lookahead!==0||M!==y&&_.status!==666){var J=_.strategy===2?function(B,$){for(var rt;;){if(B.lookahead===0&&(vt(B),B.lookahead===0)){if($===y)return o;break}if(B.match_length=0,rt=e._tr_tally(B,0,B.window[B.strstart]),B.lookahead--,B.strstart++,rt&&(N(B,!1),B.strm.avail_out===0))return o}return B.insert=0,$===w?(N(B,!0),B.strm.avail_out===0?at:q):B.last_lit&&(N(B,!1),B.strm.avail_out===0)?o:W}(_,M):_.strategy===3?function(B,$){for(var rt,tt,st,pt,mt=B.window;;){if(B.lookahead<=j){if(vt(B),B.lookahead<=j&&$===y)return o;if(B.lookahead===0)break}if(B.match_length=0,B.lookahead>=T&&0<B.strstart&&(tt=mt[st=B.strstart-1])===mt[++st]&&tt===mt[++st]&&tt===mt[++st]){pt=B.strstart+j;do;while(tt===mt[++st]&&tt===mt[++st]&&tt===mt[++st]&&tt===mt[++st]&&tt===mt[++st]&&tt===mt[++st]&&tt===mt[++st]&&tt===mt[++st]&&st<pt);B.match_length=j-(pt-st),B.match_length>B.lookahead&&(B.match_length=B.lookahead)}if(B.match_length>=T?(rt=e._tr_tally(B,1,B.match_length-T),B.lookahead-=B.match_length,B.strstart+=B.match_length,B.match_length=0):(rt=e._tr_tally(B,0,B.window[B.strstart]),B.lookahead--,B.strstart++),rt&&(N(B,!1),B.strm.avail_out===0))return o}return B.insert=0,$===w?(N(B,!0),B.strm.avail_out===0?at:q):B.last_lit&&(N(B,!1),B.strm.avail_out===0)?o:W}(_,M):s[_.level].func(_,M);if(J!==at&&J!==q||(_.status=666),J===o||J===at)return n.avail_out===0&&(_.last_flush=-1),c;if(J===W&&(M===1?e._tr_align(_):M!==5&&(e._tr_stored_block(_,0,0,!1),M===3&&(ot(_.head),_.lookahead===0&&(_.strstart=0,_.block_start=0,_.insert=0))),O(n),n.avail_out===0))return _.last_flush=-1,c}return M!==w?c:_.wrap<=0?1:(_.wrap===2?(H(_,255&n.adler),H(_,n.adler>>8&255),H(_,n.adler>>16&255),H(_,n.adler>>24&255),H(_,255&n.total_in),H(_,n.total_in>>8&255),H(_,n.total_in>>16&255),H(_,n.total_in>>24&255)):(L(_,n.adler>>>16),L(_,65535&n.adler)),O(n),0<_.wrap&&(_.wrap=-_.wrap),_.pending!==0?c:1)},h.deflateEnd=function(n){var M;return n&&n.state?(M=n.state.status)!==E&&M!==69&&M!==73&&M!==91&&M!==103&&M!==U&&M!==666?F(n,m):(n.state=null,M===U?F(n,-3):c):m},h.deflateSetDictionary=function(n,M){var R,_,f,C,X,J,B,$,rt=M.length;if(!n||!n.state||(C=(R=n.state).wrap)===2||C===1&&R.status!==E||R.lookahead)return m;for(C===1&&(n.adler=d(n.adler,M,rt,0)),R.wrap=0,rt>=R.w_size&&(C===0&&(ot(R.head),R.strstart=0,R.block_start=0,R.insert=0),$=new a.Buf8(R.w_size),a.arraySet($,M,rt-R.w_size,R.w_size,0),M=$,rt=R.w_size),X=n.avail_in,J=n.next_in,B=n.input,n.avail_in=rt,n.next_in=0,n.input=M,vt(R);R.lookahead>=T;){for(_=R.strstart,f=R.lookahead-(T-1);R.ins_h=(R.ins_h<<R.hash_shift^R.window[_+T-1])&R.hash_mask,R.prev[_&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=_,_++,--f;);R.strstart=_,R.lookahead=T-1,vt(R)}return R.strstart+=R.lookahead,R.block_start=R.strstart,R.insert=R.lookahead,R.lookahead=0,R.match_length=R.prev_length=T-1,R.match_available=0,n.next_in=J,n.input=B,n.avail_in=X,R.wrap=C,c},h.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,i,h){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,i,h){i.exports=function(s,a){var e,d,b,v,y,w,c,m,r,l,u,g,k,z,x,D,A,P,T,j,nt,E,U,o,W;e=s.state,d=s.next_in,o=s.input,b=d+(s.avail_in-5),v=s.next_out,W=s.output,y=v-(a-s.avail_out),w=v+(s.avail_out-257),c=e.dmax,m=e.wsize,r=e.whave,l=e.wnext,u=e.window,g=e.hold,k=e.bits,z=e.lencode,x=e.distcode,D=(1<<e.lenbits)-1,A=(1<<e.distbits)-1;t:do{k<15&&(g+=o[d++]<<k,k+=8,g+=o[d++]<<k,k+=8),P=z[g&D];e:for(;;){if(g>>>=T=P>>>24,k-=T,(T=P>>>16&255)===0)W[v++]=65535&P;else{if(!(16&T)){if(!(64&T)){P=z[(65535&P)+(g&(1<<T)-1)];continue e}if(32&T){e.mode=12;break t}s.msg="invalid literal/length code",e.mode=30;break t}j=65535&P,(T&=15)&&(k<T&&(g+=o[d++]<<k,k+=8),j+=g&(1<<T)-1,g>>>=T,k-=T),k<15&&(g+=o[d++]<<k,k+=8,g+=o[d++]<<k,k+=8),P=x[g&A];n:for(;;){if(g>>>=T=P>>>24,k-=T,!(16&(T=P>>>16&255))){if(!(64&T)){P=x[(65535&P)+(g&(1<<T)-1)];continue n}s.msg="invalid distance code",e.mode=30;break t}if(nt=65535&P,k<(T&=15)&&(g+=o[d++]<<k,(k+=8)<T&&(g+=o[d++]<<k,k+=8)),c<(nt+=g&(1<<T)-1)){s.msg="invalid distance too far back",e.mode=30;break t}if(g>>>=T,k-=T,(T=v-y)<nt){if(r<(T=nt-T)&&e.sane){s.msg="invalid distance too far back",e.mode=30;break t}if(U=u,(E=0)===l){if(E+=m-T,T<j){for(j-=T;W[v++]=u[E++],--T;);E=v-nt,U=W}}else if(l<T){if(E+=m+l-T,(T-=l)<j){for(j-=T;W[v++]=u[E++],--T;);if(E=0,l<j){for(j-=T=l;W[v++]=u[E++],--T;);E=v-nt,U=W}}}else if(E+=l-T,T<j){for(j-=T;W[v++]=u[E++],--T;);E=v-nt,U=W}for(;2<j;)W[v++]=U[E++],W[v++]=U[E++],W[v++]=U[E++],j-=3;j&&(W[v++]=U[E++],1<j&&(W[v++]=U[E++]))}else{for(E=v-nt;W[v++]=W[E++],W[v++]=W[E++],W[v++]=W[E++],2<(j-=3););j&&(W[v++]=W[E++],1<j&&(W[v++]=W[E++]))}break}}break}}while(d<b&&v<w);d-=j=k>>3,g&=(1<<(k-=j<<3))-1,s.next_in=d,s.next_out=v,s.avail_in=d<b?b-d+5:5-(d-b),s.avail_out=v<w?w-v+257:257-(v-w),e.hold=g,e.bits=k}},{}],49:[function(t,i,h){var s=t("../utils/common"),a=t("./adler32"),e=t("./crc32"),d=t("./inffast"),b=t("./inftrees"),v=1,y=2,w=0,c=-2,m=1,r=852,l=592;function u(E){return(E>>>24&255)+(E>>>8&65280)+((65280&E)<<8)+((255&E)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function k(E){var U;return E&&E.state?(U=E.state,E.total_in=E.total_out=U.total=0,E.msg="",U.wrap&&(E.adler=1&U.wrap),U.mode=m,U.last=0,U.havedict=0,U.dmax=32768,U.head=null,U.hold=0,U.bits=0,U.lencode=U.lendyn=new s.Buf32(r),U.distcode=U.distdyn=new s.Buf32(l),U.sane=1,U.back=-1,w):c}function z(E){var U;return E&&E.state?((U=E.state).wsize=0,U.whave=0,U.wnext=0,k(E)):c}function x(E,U){var o,W;return E&&E.state?(W=E.state,U<0?(o=0,U=-U):(o=1+(U>>4),U<48&&(U&=15)),U&&(U<8||15<U)?c:(W.window!==null&&W.wbits!==U&&(W.window=null),W.wrap=o,W.wbits=U,z(E))):c}function D(E,U){var o,W;return E?(W=new g,(E.state=W).window=null,(o=x(E,U))!==w&&(E.state=null),o):c}var A,P,T=!0;function j(E){if(T){var U;for(A=new s.Buf32(512),P=new s.Buf32(32),U=0;U<144;)E.lens[U++]=8;for(;U<256;)E.lens[U++]=9;for(;U<280;)E.lens[U++]=7;for(;U<288;)E.lens[U++]=8;for(b(v,E.lens,0,288,A,0,E.work,{bits:9}),U=0;U<32;)E.lens[U++]=5;b(y,E.lens,0,32,P,0,E.work,{bits:5}),T=!1}E.lencode=A,E.lenbits=9,E.distcode=P,E.distbits=5}function nt(E,U,o,W){var at,q=E.state;return q.window===null&&(q.wsize=1<<q.wbits,q.wnext=0,q.whave=0,q.window=new s.Buf8(q.wsize)),W>=q.wsize?(s.arraySet(q.window,U,o-q.wsize,q.wsize,0),q.wnext=0,q.whave=q.wsize):(W<(at=q.wsize-q.wnext)&&(at=W),s.arraySet(q.window,U,o-W,at,q.wnext),(W-=at)?(s.arraySet(q.window,U,o-W,W,0),q.wnext=W,q.whave=q.wsize):(q.wnext+=at,q.wnext===q.wsize&&(q.wnext=0),q.whave<q.wsize&&(q.whave+=at))),0}h.inflateReset=z,h.inflateReset2=x,h.inflateResetKeep=k,h.inflateInit=function(E){return D(E,15)},h.inflateInit2=D,h.inflate=function(E,U){var o,W,at,q,F,Z,ot,O,N,H,L,G,vt,bt,dt,_t,yt,gt,kt,St,n,M,R,_,f=0,C=new s.Buf8(4),X=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!E||!E.state||!E.output||!E.input&&E.avail_in!==0)return c;(o=E.state).mode===12&&(o.mode=13),F=E.next_out,at=E.output,ot=E.avail_out,q=E.next_in,W=E.input,Z=E.avail_in,O=o.hold,N=o.bits,H=Z,L=ot,M=w;t:for(;;)switch(o.mode){case m:if(o.wrap===0){o.mode=13;break}for(;N<16;){if(Z===0)break t;Z--,O+=W[q++]<<N,N+=8}if(2&o.wrap&&O===35615){C[o.check=0]=255&O,C[1]=O>>>8&255,o.check=e(o.check,C,2,0),N=O=0,o.mode=2;break}if(o.flags=0,o.head&&(o.head.done=!1),!(1&o.wrap)||(((255&O)<<8)+(O>>8))%31){E.msg="incorrect header check",o.mode=30;break}if((15&O)!=8){E.msg="unknown compression method",o.mode=30;break}if(N-=4,n=8+(15&(O>>>=4)),o.wbits===0)o.wbits=n;else if(n>o.wbits){E.msg="invalid window size",o.mode=30;break}o.dmax=1<<n,E.adler=o.check=1,o.mode=512&O?10:12,N=O=0;break;case 2:for(;N<16;){if(Z===0)break t;Z--,O+=W[q++]<<N,N+=8}if(o.flags=O,(255&o.flags)!=8){E.msg="unknown compression method",o.mode=30;break}if(57344&o.flags){E.msg="unknown header flags set",o.mode=30;break}o.head&&(o.head.text=O>>8&1),512&o.flags&&(C[0]=255&O,C[1]=O>>>8&255,o.check=e(o.check,C,2,0)),N=O=0,o.mode=3;case 3:for(;N<32;){if(Z===0)break t;Z--,O+=W[q++]<<N,N+=8}o.head&&(o.head.time=O),512&o.flags&&(C[0]=255&O,C[1]=O>>>8&255,C[2]=O>>>16&255,C[3]=O>>>24&255,o.check=e(o.check,C,4,0)),N=O=0,o.mode=4;case 4:for(;N<16;){if(Z===0)break t;Z--,O+=W[q++]<<N,N+=8}o.head&&(o.head.xflags=255&O,o.head.os=O>>8),512&o.flags&&(C[0]=255&O,C[1]=O>>>8&255,o.check=e(o.check,C,2,0)),N=O=0,o.mode=5;case 5:if(1024&o.flags){for(;N<16;){if(Z===0)break t;Z--,O+=W[q++]<<N,N+=8}o.length=O,o.head&&(o.head.extra_len=O),512&o.flags&&(C[0]=255&O,C[1]=O>>>8&255,o.check=e(o.check,C,2,0)),N=O=0}else o.head&&(o.head.extra=null);o.mode=6;case 6:if(1024&o.flags&&(Z<(G=o.length)&&(G=Z),G&&(o.head&&(n=o.head.extra_len-o.length,o.head.extra||(o.head.extra=new Array(o.head.extra_len)),s.arraySet(o.head.extra,W,q,G,n)),512&o.flags&&(o.check=e(o.check,W,G,q)),Z-=G,q+=G,o.length-=G),o.length))break t;o.length=0,o.mode=7;case 7:if(2048&o.flags){if(Z===0)break t;for(G=0;n=W[q+G++],o.head&&n&&o.length<65536&&(o.head.name+=String.fromCharCode(n)),n&&G<Z;);if(512&o.flags&&(o.check=e(o.check,W,G,q)),Z-=G,q+=G,n)break t}else o.head&&(o.head.name=null);o.length=0,o.mode=8;case 8:if(4096&o.flags){if(Z===0)break t;for(G=0;n=W[q+G++],o.head&&n&&o.length<65536&&(o.head.comment+=String.fromCharCode(n)),n&&G<Z;);if(512&o.flags&&(o.check=e(o.check,W,G,q)),Z-=G,q+=G,n)break t}else o.head&&(o.head.comment=null);o.mode=9;case 9:if(512&o.flags){for(;N<16;){if(Z===0)break t;Z--,O+=W[q++]<<N,N+=8}if(O!==(65535&o.check)){E.msg="header crc mismatch",o.mode=30;break}N=O=0}o.head&&(o.head.hcrc=o.flags>>9&1,o.head.done=!0),E.adler=o.check=0,o.mode=12;break;case 10:for(;N<32;){if(Z===0)break t;Z--,O+=W[q++]<<N,N+=8}E.adler=o.check=u(O),N=O=0,o.mode=11;case 11:if(o.havedict===0)return E.next_out=F,E.avail_out=ot,E.next_in=q,E.avail_in=Z,o.hold=O,o.bits=N,2;E.adler=o.check=1,o.mode=12;case 12:if(U===5||U===6)break t;case 13:if(o.last){O>>>=7&N,N-=7&N,o.mode=27;break}for(;N<3;){if(Z===0)break t;Z--,O+=W[q++]<<N,N+=8}switch(o.last=1&O,N-=1,3&(O>>>=1)){case 0:o.mode=14;break;case 1:if(j(o),o.mode=20,U!==6)break;O>>>=2,N-=2;break t;case 2:o.mode=17;break;case 3:E.msg="invalid block type",o.mode=30}O>>>=2,N-=2;break;case 14:for(O>>>=7&N,N-=7&N;N<32;){if(Z===0)break t;Z--,O+=W[q++]<<N,N+=8}if((65535&O)!=(O>>>16^65535)){E.msg="invalid stored block lengths",o.mode=30;break}if(o.length=65535&O,N=O=0,o.mode=15,U===6)break t;case 15:o.mode=16;case 16:if(G=o.length){if(Z<G&&(G=Z),ot<G&&(G=ot),G===0)break t;s.arraySet(at,W,q,G,F),Z-=G,q+=G,ot-=G,F+=G,o.length-=G;break}o.mode=12;break;case 17:for(;N<14;){if(Z===0)break t;Z--,O+=W[q++]<<N,N+=8}if(o.nlen=257+(31&O),O>>>=5,N-=5,o.ndist=1+(31&O),O>>>=5,N-=5,o.ncode=4+(15&O),O>>>=4,N-=4,286<o.nlen||30<o.ndist){E.msg="too many length or distance symbols",o.mode=30;break}o.have=0,o.mode=18;case 18:for(;o.have<o.ncode;){for(;N<3;){if(Z===0)break t;Z--,O+=W[q++]<<N,N+=8}o.lens[X[o.have++]]=7&O,O>>>=3,N-=3}for(;o.have<19;)o.lens[X[o.have++]]=0;if(o.lencode=o.lendyn,o.lenbits=7,R={bits:o.lenbits},M=b(0,o.lens,0,19,o.lencode,0,o.work,R),o.lenbits=R.bits,M){E.msg="invalid code lengths set",o.mode=30;break}o.have=0,o.mode=19;case 19:for(;o.have<o.nlen+o.ndist;){for(;_t=(f=o.lencode[O&(1<<o.lenbits)-1])>>>16&255,yt=65535&f,!((dt=f>>>24)<=N);){if(Z===0)break t;Z--,O+=W[q++]<<N,N+=8}if(yt<16)O>>>=dt,N-=dt,o.lens[o.have++]=yt;else{if(yt===16){for(_=dt+2;N<_;){if(Z===0)break t;Z--,O+=W[q++]<<N,N+=8}if(O>>>=dt,N-=dt,o.have===0){E.msg="invalid bit length repeat",o.mode=30;break}n=o.lens[o.have-1],G=3+(3&O),O>>>=2,N-=2}else if(yt===17){for(_=dt+3;N<_;){if(Z===0)break t;Z--,O+=W[q++]<<N,N+=8}N-=dt,n=0,G=3+(7&(O>>>=dt)),O>>>=3,N-=3}else{for(_=dt+7;N<_;){if(Z===0)break t;Z--,O+=W[q++]<<N,N+=8}N-=dt,n=0,G=11+(127&(O>>>=dt)),O>>>=7,N-=7}if(o.have+G>o.nlen+o.ndist){E.msg="invalid bit length repeat",o.mode=30;break}for(;G--;)o.lens[o.have++]=n}}if(o.mode===30)break;if(o.lens[256]===0){E.msg="invalid code -- missing end-of-block",o.mode=30;break}if(o.lenbits=9,R={bits:o.lenbits},M=b(v,o.lens,0,o.nlen,o.lencode,0,o.work,R),o.lenbits=R.bits,M){E.msg="invalid literal/lengths set",o.mode=30;break}if(o.distbits=6,o.distcode=o.distdyn,R={bits:o.distbits},M=b(y,o.lens,o.nlen,o.ndist,o.distcode,0,o.work,R),o.distbits=R.bits,M){E.msg="invalid distances set",o.mode=30;break}if(o.mode=20,U===6)break t;case 20:o.mode=21;case 21:if(6<=Z&&258<=ot){E.next_out=F,E.avail_out=ot,E.next_in=q,E.avail_in=Z,o.hold=O,o.bits=N,d(E,L),F=E.next_out,at=E.output,ot=E.avail_out,q=E.next_in,W=E.input,Z=E.avail_in,O=o.hold,N=o.bits,o.mode===12&&(o.back=-1);break}for(o.back=0;_t=(f=o.lencode[O&(1<<o.lenbits)-1])>>>16&255,yt=65535&f,!((dt=f>>>24)<=N);){if(Z===0)break t;Z--,O+=W[q++]<<N,N+=8}if(_t&&!(240&_t)){for(gt=dt,kt=_t,St=yt;_t=(f=o.lencode[St+((O&(1<<gt+kt)-1)>>gt)])>>>16&255,yt=65535&f,!(gt+(dt=f>>>24)<=N);){if(Z===0)break t;Z--,O+=W[q++]<<N,N+=8}O>>>=gt,N-=gt,o.back+=gt}if(O>>>=dt,N-=dt,o.back+=dt,o.length=yt,_t===0){o.mode=26;break}if(32&_t){o.back=-1,o.mode=12;break}if(64&_t){E.msg="invalid literal/length code",o.mode=30;break}o.extra=15&_t,o.mode=22;case 22:if(o.extra){for(_=o.extra;N<_;){if(Z===0)break t;Z--,O+=W[q++]<<N,N+=8}o.length+=O&(1<<o.extra)-1,O>>>=o.extra,N-=o.extra,o.back+=o.extra}o.was=o.length,o.mode=23;case 23:for(;_t=(f=o.distcode[O&(1<<o.distbits)-1])>>>16&255,yt=65535&f,!((dt=f>>>24)<=N);){if(Z===0)break t;Z--,O+=W[q++]<<N,N+=8}if(!(240&_t)){for(gt=dt,kt=_t,St=yt;_t=(f=o.distcode[St+((O&(1<<gt+kt)-1)>>gt)])>>>16&255,yt=65535&f,!(gt+(dt=f>>>24)<=N);){if(Z===0)break t;Z--,O+=W[q++]<<N,N+=8}O>>>=gt,N-=gt,o.back+=gt}if(O>>>=dt,N-=dt,o.back+=dt,64&_t){E.msg="invalid distance code",o.mode=30;break}o.offset=yt,o.extra=15&_t,o.mode=24;case 24:if(o.extra){for(_=o.extra;N<_;){if(Z===0)break t;Z--,O+=W[q++]<<N,N+=8}o.offset+=O&(1<<o.extra)-1,O>>>=o.extra,N-=o.extra,o.back+=o.extra}if(o.offset>o.dmax){E.msg="invalid distance too far back",o.mode=30;break}o.mode=25;case 25:if(ot===0)break t;if(G=L-ot,o.offset>G){if((G=o.offset-G)>o.whave&&o.sane){E.msg="invalid distance too far back",o.mode=30;break}vt=G>o.wnext?(G-=o.wnext,o.wsize-G):o.wnext-G,G>o.length&&(G=o.length),bt=o.window}else bt=at,vt=F-o.offset,G=o.length;for(ot<G&&(G=ot),ot-=G,o.length-=G;at[F++]=bt[vt++],--G;);o.length===0&&(o.mode=21);break;case 26:if(ot===0)break t;at[F++]=o.length,ot--,o.mode=21;break;case 27:if(o.wrap){for(;N<32;){if(Z===0)break t;Z--,O|=W[q++]<<N,N+=8}if(L-=ot,E.total_out+=L,o.total+=L,L&&(E.adler=o.check=o.flags?e(o.check,at,L,F-L):a(o.check,at,L,F-L)),L=ot,(o.flags?O:u(O))!==o.check){E.msg="incorrect data check",o.mode=30;break}N=O=0}o.mode=28;case 28:if(o.wrap&&o.flags){for(;N<32;){if(Z===0)break t;Z--,O+=W[q++]<<N,N+=8}if(O!==(4294967295&o.total)){E.msg="incorrect length check",o.mode=30;break}N=O=0}o.mode=29;case 29:M=1;break t;case 30:M=-3;break t;case 31:return-4;case 32:default:return c}return E.next_out=F,E.avail_out=ot,E.next_in=q,E.avail_in=Z,o.hold=O,o.bits=N,(o.wsize||L!==E.avail_out&&o.mode<30&&(o.mode<27||U!==4))&&nt(E,E.output,E.next_out,L-E.avail_out)?(o.mode=31,-4):(H-=E.avail_in,L-=E.avail_out,E.total_in+=H,E.total_out+=L,o.total+=L,o.wrap&&L&&(E.adler=o.check=o.flags?e(o.check,at,L,E.next_out-L):a(o.check,at,L,E.next_out-L)),E.data_type=o.bits+(o.last?64:0)+(o.mode===12?128:0)+(o.mode===20||o.mode===15?256:0),(H==0&&L===0||U===4)&&M===w&&(M=-5),M)},h.inflateEnd=function(E){if(!E||!E.state)return c;var U=E.state;return U.window&&(U.window=null),E.state=null,w},h.inflateGetHeader=function(E,U){var o;return E&&E.state&&2&(o=E.state).wrap?((o.head=U).done=!1,w):c},h.inflateSetDictionary=function(E,U){var o,W=U.length;return E&&E.state?(o=E.state).wrap!==0&&o.mode!==11?c:o.mode===11&&a(1,U,W,0)!==o.check?-3:nt(E,U,W,W)?(o.mode=31,-4):(o.havedict=1,w):c},h.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,i,h){var s=t("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],e=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],b=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(v,y,w,c,m,r,l,u){var g,k,z,x,D,A,P,T,j,nt=u.bits,E=0,U=0,o=0,W=0,at=0,q=0,F=0,Z=0,ot=0,O=0,N=null,H=0,L=new s.Buf16(16),G=new s.Buf16(16),vt=null,bt=0;for(E=0;E<=15;E++)L[E]=0;for(U=0;U<c;U++)L[y[w+U]]++;for(at=nt,W=15;1<=W&&L[W]===0;W--);if(W<at&&(at=W),W===0)return m[r++]=20971520,m[r++]=20971520,u.bits=1,0;for(o=1;o<W&&L[o]===0;o++);for(at<o&&(at=o),E=Z=1;E<=15;E++)if(Z<<=1,(Z-=L[E])<0)return-1;if(0<Z&&(v===0||W!==1))return-1;for(G[1]=0,E=1;E<15;E++)G[E+1]=G[E]+L[E];for(U=0;U<c;U++)y[w+U]!==0&&(l[G[y[w+U]]++]=U);if(A=v===0?(N=vt=l,19):v===1?(N=a,H-=257,vt=e,bt-=257,256):(N=d,vt=b,-1),E=o,D=r,F=U=O=0,z=-1,x=(ot=1<<(q=at))-1,v===1&&852<ot||v===2&&592<ot)return 1;for(;;){for(P=E-F,j=l[U]<A?(T=0,l[U]):l[U]>A?(T=vt[bt+l[U]],N[H+l[U]]):(T=96,0),g=1<<E-F,o=k=1<<q;m[D+(O>>F)+(k-=g)]=P<<24|T<<16|j|0,k!==0;);for(g=1<<E-1;O&g;)g>>=1;if(g!==0?(O&=g-1,O+=g):O=0,U++,--L[E]==0){if(E===W)break;E=y[w+l[U]]}if(at<E&&(O&x)!==z){for(F===0&&(F=at),D+=o,Z=1<<(q=E-F);q+F<W&&!((Z-=L[q+F])<=0);)q++,Z<<=1;if(ot+=1<<q,v===1&&852<ot||v===2&&592<ot)return 1;m[z=O&x]=at<<24|q<<16|D-r|0}}return O!==0&&(m[D+O]=E-F<<24|64<<16|0),u.bits=at,0}},{"../utils/common":41}],51:[function(t,i,h){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,i,h){var s=t("../utils/common"),a=0,e=1;function d(f){for(var C=f.length;0<=--C;)f[C]=0}var b=0,v=29,y=256,w=y+1+v,c=30,m=19,r=2*w+1,l=15,u=16,g=7,k=256,z=16,x=17,D=18,A=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],P=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],nt=new Array(2*(w+2));d(nt);var E=new Array(2*c);d(E);var U=new Array(512);d(U);var o=new Array(256);d(o);var W=new Array(v);d(W);var at,q,F,Z=new Array(c);function ot(f,C,X,J,B){this.static_tree=f,this.extra_bits=C,this.extra_base=X,this.elems=J,this.max_length=B,this.has_stree=f&&f.length}function O(f,C){this.dyn_tree=f,this.max_code=0,this.stat_desc=C}function N(f){return f<256?U[f]:U[256+(f>>>7)]}function H(f,C){f.pending_buf[f.pending++]=255&C,f.pending_buf[f.pending++]=C>>>8&255}function L(f,C,X){f.bi_valid>u-X?(f.bi_buf|=C<<f.bi_valid&65535,H(f,f.bi_buf),f.bi_buf=C>>u-f.bi_valid,f.bi_valid+=X-u):(f.bi_buf|=C<<f.bi_valid&65535,f.bi_valid+=X)}function G(f,C,X){L(f,X[2*C],X[2*C+1])}function vt(f,C){for(var X=0;X|=1&f,f>>>=1,X<<=1,0<--C;);return X>>>1}function bt(f,C,X){var J,B,$=new Array(l+1),rt=0;for(J=1;J<=l;J++)$[J]=rt=rt+X[J-1]<<1;for(B=0;B<=C;B++){var tt=f[2*B+1];tt!==0&&(f[2*B]=vt($[tt]++,tt))}}function dt(f){var C;for(C=0;C<w;C++)f.dyn_ltree[2*C]=0;for(C=0;C<c;C++)f.dyn_dtree[2*C]=0;for(C=0;C<m;C++)f.bl_tree[2*C]=0;f.dyn_ltree[2*k]=1,f.opt_len=f.static_len=0,f.last_lit=f.matches=0}function _t(f){8<f.bi_valid?H(f,f.bi_buf):0<f.bi_valid&&(f.pending_buf[f.pending++]=f.bi_buf),f.bi_buf=0,f.bi_valid=0}function yt(f,C,X,J){var B=2*C,$=2*X;return f[B]<f[$]||f[B]===f[$]&&J[C]<=J[X]}function gt(f,C,X){for(var J=f.heap[X],B=X<<1;B<=f.heap_len&&(B<f.heap_len&&yt(C,f.heap[B+1],f.heap[B],f.depth)&&B++,!yt(C,J,f.heap[B],f.depth));)f.heap[X]=f.heap[B],X=B,B<<=1;f.heap[X]=J}function kt(f,C,X){var J,B,$,rt,tt=0;if(f.last_lit!==0)for(;J=f.pending_buf[f.d_buf+2*tt]<<8|f.pending_buf[f.d_buf+2*tt+1],B=f.pending_buf[f.l_buf+tt],tt++,J===0?G(f,B,C):(G(f,($=o[B])+y+1,C),(rt=A[$])!==0&&L(f,B-=W[$],rt),G(f,$=N(--J),X),(rt=P[$])!==0&&L(f,J-=Z[$],rt)),tt<f.last_lit;);G(f,k,C)}function St(f,C){var X,J,B,$=C.dyn_tree,rt=C.stat_desc.static_tree,tt=C.stat_desc.has_stree,st=C.stat_desc.elems,pt=-1;for(f.heap_len=0,f.heap_max=r,X=0;X<st;X++)$[2*X]!==0?(f.heap[++f.heap_len]=pt=X,f.depth[X]=0):$[2*X+1]=0;for(;f.heap_len<2;)$[2*(B=f.heap[++f.heap_len]=pt<2?++pt:0)]=1,f.depth[B]=0,f.opt_len--,tt&&(f.static_len-=rt[2*B+1]);for(C.max_code=pt,X=f.heap_len>>1;1<=X;X--)gt(f,$,X);for(B=st;X=f.heap[1],f.heap[1]=f.heap[f.heap_len--],gt(f,$,1),J=f.heap[1],f.heap[--f.heap_max]=X,f.heap[--f.heap_max]=J,$[2*B]=$[2*X]+$[2*J],f.depth[B]=(f.depth[X]>=f.depth[J]?f.depth[X]:f.depth[J])+1,$[2*X+1]=$[2*J+1]=B,f.heap[1]=B++,gt(f,$,1),2<=f.heap_len;);f.heap[--f.heap_max]=f.heap[1],function(mt,It){var Ot,xt,Bt,ut,Yt,Ht,Ut=It.dyn_tree,jt=It.max_code,me=It.stat_desc.static_tree,fe=It.stat_desc.has_stree,Gt=It.stat_desc.extra_bits,Lt=It.stat_desc.extra_base,qt=It.stat_desc.max_length,Xt=0;for(ut=0;ut<=l;ut++)mt.bl_count[ut]=0;for(Ut[2*mt.heap[mt.heap_max]+1]=0,Ot=mt.heap_max+1;Ot<r;Ot++)qt<(ut=Ut[2*Ut[2*(xt=mt.heap[Ot])+1]+1]+1)&&(ut=qt,Xt++),Ut[2*xt+1]=ut,jt<xt||(mt.bl_count[ut]++,Yt=0,Lt<=xt&&(Yt=Gt[xt-Lt]),Ht=Ut[2*xt],mt.opt_len+=Ht*(ut+Yt),fe&&(mt.static_len+=Ht*(me[2*xt+1]+Yt)));if(Xt!==0){do{for(ut=qt-1;mt.bl_count[ut]===0;)ut--;mt.bl_count[ut]--,mt.bl_count[ut+1]+=2,mt.bl_count[qt]--,Xt-=2}while(0<Xt);for(ut=qt;ut!==0;ut--)for(xt=mt.bl_count[ut];xt!==0;)jt<(Bt=mt.heap[--Ot])||(Ut[2*Bt+1]!==ut&&(mt.opt_len+=(ut-Ut[2*Bt+1])*Ut[2*Bt],Ut[2*Bt+1]=ut),xt--)}}(f,C),bt($,pt,f.bl_count)}function n(f,C,X){var J,B,$=-1,rt=C[1],tt=0,st=7,pt=4;for(rt===0&&(st=138,pt=3),C[2*(X+1)+1]=65535,J=0;J<=X;J++)B=rt,rt=C[2*(J+1)+1],++tt<st&&B===rt||(tt<pt?f.bl_tree[2*B]+=tt:B!==0?(B!==$&&f.bl_tree[2*B]++,f.bl_tree[2*z]++):tt<=10?f.bl_tree[2*x]++:f.bl_tree[2*D]++,$=B,pt=(tt=0)===rt?(st=138,3):B===rt?(st=6,3):(st=7,4))}function M(f,C,X){var J,B,$=-1,rt=C[1],tt=0,st=7,pt=4;for(rt===0&&(st=138,pt=3),J=0;J<=X;J++)if(B=rt,rt=C[2*(J+1)+1],!(++tt<st&&B===rt)){if(tt<pt)for(;G(f,B,f.bl_tree),--tt!=0;);else B!==0?(B!==$&&(G(f,B,f.bl_tree),tt--),G(f,z,f.bl_tree),L(f,tt-3,2)):tt<=10?(G(f,x,f.bl_tree),L(f,tt-3,3)):(G(f,D,f.bl_tree),L(f,tt-11,7));$=B,pt=(tt=0)===rt?(st=138,3):B===rt?(st=6,3):(st=7,4)}}d(Z);var R=!1;function _(f,C,X,J){L(f,(b<<1)+(J?1:0),3),function(B,$,rt,tt){_t(B),tt&&(H(B,rt),H(B,~rt)),s.arraySet(B.pending_buf,B.window,$,rt,B.pending),B.pending+=rt}(f,C,X,!0)}h._tr_init=function(f){R||(function(){var C,X,J,B,$,rt=new Array(l+1);for(B=J=0;B<v-1;B++)for(W[B]=J,C=0;C<1<<A[B];C++)o[J++]=B;for(o[J-1]=B,B=$=0;B<16;B++)for(Z[B]=$,C=0;C<1<<P[B];C++)U[$++]=B;for($>>=7;B<c;B++)for(Z[B]=$<<7,C=0;C<1<<P[B]-7;C++)U[256+$++]=B;for(X=0;X<=l;X++)rt[X]=0;for(C=0;C<=143;)nt[2*C+1]=8,C++,rt[8]++;for(;C<=255;)nt[2*C+1]=9,C++,rt[9]++;for(;C<=279;)nt[2*C+1]=7,C++,rt[7]++;for(;C<=287;)nt[2*C+1]=8,C++,rt[8]++;for(bt(nt,w+1,rt),C=0;C<c;C++)E[2*C+1]=5,E[2*C]=vt(C,5);at=new ot(nt,A,y+1,w,l),q=new ot(E,P,0,c,l),F=new ot(new Array(0),T,0,m,g)}(),R=!0),f.l_desc=new O(f.dyn_ltree,at),f.d_desc=new O(f.dyn_dtree,q),f.bl_desc=new O(f.bl_tree,F),f.bi_buf=0,f.bi_valid=0,dt(f)},h._tr_stored_block=_,h._tr_flush_block=function(f,C,X,J){var B,$,rt=0;0<f.level?(f.strm.data_type===2&&(f.strm.data_type=function(tt){var st,pt=4093624447;for(st=0;st<=31;st++,pt>>>=1)if(1&pt&&tt.dyn_ltree[2*st]!==0)return a;if(tt.dyn_ltree[18]!==0||tt.dyn_ltree[20]!==0||tt.dyn_ltree[26]!==0)return e;for(st=32;st<y;st++)if(tt.dyn_ltree[2*st]!==0)return e;return a}(f)),St(f,f.l_desc),St(f,f.d_desc),rt=function(tt){var st;for(n(tt,tt.dyn_ltree,tt.l_desc.max_code),n(tt,tt.dyn_dtree,tt.d_desc.max_code),St(tt,tt.bl_desc),st=m-1;3<=st&&tt.bl_tree[2*j[st]+1]===0;st--);return tt.opt_len+=3*(st+1)+5+5+4,st}(f),B=f.opt_len+3+7>>>3,($=f.static_len+3+7>>>3)<=B&&(B=$)):B=$=X+5,X+4<=B&&C!==-1?_(f,C,X,J):f.strategy===4||$===B?(L(f,2+(J?1:0),3),kt(f,nt,E)):(L(f,4+(J?1:0),3),function(tt,st,pt,mt){var It;for(L(tt,st-257,5),L(tt,pt-1,5),L(tt,mt-4,4),It=0;It<mt;It++)L(tt,tt.bl_tree[2*j[It]+1],3);M(tt,tt.dyn_ltree,st-1),M(tt,tt.dyn_dtree,pt-1)}(f,f.l_desc.max_code+1,f.d_desc.max_code+1,rt+1),kt(f,f.dyn_ltree,f.dyn_dtree)),dt(f),J&&_t(f)},h._tr_tally=function(f,C,X){return f.pending_buf[f.d_buf+2*f.last_lit]=C>>>8&255,f.pending_buf[f.d_buf+2*f.last_lit+1]=255&C,f.pending_buf[f.l_buf+f.last_lit]=255&X,f.last_lit++,C===0?f.dyn_ltree[2*X]++:(f.matches++,C--,f.dyn_ltree[2*(o[X]+y+1)]++,f.dyn_dtree[2*N(C)]++),f.last_lit===f.lit_bufsize-1},h._tr_align=function(f){L(f,2,3),G(f,k,nt),function(C){C.bi_valid===16?(H(C,C.bi_buf),C.bi_buf=0,C.bi_valid=0):8<=C.bi_valid&&(C.pending_buf[C.pending++]=255&C.bi_buf,C.bi_buf>>=8,C.bi_valid-=8)}(f)}},{"../utils/common":41}],53:[function(t,i,h){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,i,h){(function(s){(function(a,e){if(!a.setImmediate){var d,b,v,y,w=1,c={},m=!1,r=a.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(a);l=l&&l.setTimeout?l:a,d={}.toString.call(a.process)==="[object process]"?function(z){process.nextTick(function(){g(z)})}:function(){if(a.postMessage&&!a.importScripts){var z=!0,x=a.onmessage;return a.onmessage=function(){z=!1},a.postMessage("","*"),a.onmessage=x,z}}()?(y="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",k,!1):a.attachEvent("onmessage",k),function(z){a.postMessage(y+z,"*")}):a.MessageChannel?((v=new MessageChannel).port1.onmessage=function(z){g(z.data)},function(z){v.port2.postMessage(z)}):r&&"onreadystatechange"in r.createElement("script")?(b=r.documentElement,function(z){var x=r.createElement("script");x.onreadystatechange=function(){g(z),x.onreadystatechange=null,b.removeChild(x),x=null},b.appendChild(x)}):function(z){setTimeout(g,0,z)},l.setImmediate=function(z){typeof z!="function"&&(z=new Function(""+z));for(var x=new Array(arguments.length-1),D=0;D<x.length;D++)x[D]=arguments[D+1];var A={callback:z,args:x};return c[w]=A,d(w),w++},l.clearImmediate=u}function u(z){delete c[z]}function g(z){if(m)setTimeout(g,0,z);else{var x=c[z];if(x){m=!0;try{(function(D){var A=D.callback,P=D.args;switch(P.length){case 0:A();break;case 1:A(P[0]);break;case 2:A(P[0],P[1]);break;case 3:A(P[0],P[1],P[2]);break;default:A.apply(e,P)}})(x)}finally{u(z),m=!1}}}}function k(z){z.source===a&&typeof z.data=="string"&&z.data.indexOf(y)===0&&g(+z.data.slice(y.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Oe<"u"?Oe:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(er);var ur=er.exports;const nr=cr(ur);function*$t(S,p){for(const t of S)yield p(t)}function*De(S,p){for(const t of S)p(t)&&(yield t)}const hr=/[^a-z0-9.]/g,fr=["application/zip","application/x-zip-compressed"];async function dr(S,p=S.name+".zip"){const t=new Map;S.items.forEach(y=>{if(y.image){const w=y.image.name.lastIndexOf("."),c=w>=0?y.image.name.substring(w):"";t.set(y.image,kn(y.name+c))}});const i=[...$t(S.effects.values(),y=>y.name)],h=[...$t(S.item_tags.values(),y=>y.name)],s=[...$t(S.conversion_tags.values(),y=>y.name)],a=[...S.items].map(y=>({name:y.name,image:y.image?t.get(y.image):void 0,tags:[...$t(y.tags.values(),c=>c.name)],conversions:[...$t(y.conversions.values(),c=>({tags:[...$t(c.tags.values(),m=>m.name)],inputs:[...$t(c.inputs.values(),m=>m.name)],outputs:[...$t(c.outputs.values(),m=>m.name)]}))]})),e=JSON.stringify({name:S.name,effects:i,item_tags:h,conversion_tags:s,items:a}),d=new nr;d.file("database.json",e);const b=d.folder("images");t.forEach((y,w)=>{b.file(y,w)});const v=await d.generateAsync({type:"blob"});return new File([v],kn(p),{type:v.type})}async function _r(S){if(!fr.includes(S.type))throw new Error("Invalid item database file type.");const p=await nr.loadAsync(S),t=new Map,i=p.folder("images");if(i){const m=[],r=async(l,u)=>{const g=await u.async("blob");t.set(l,new File([g],l,{type:g.type}))};i.forEach((l,u)=>{m.push(r(l,u))}),await Promise.all(m)}const h=p.file("database.json");if(!h)throw new Error("Cannot find item database file.");const s=await h.async("text"),a=JSON.parse(s),e=new We(a.name),d=a.effects.map(m=>e.effects_create(m)),b=Object.fromEntries(d.map(m=>[m.name,m])),v=a.item_tags?.map(m=>e.item_tags_create(m))??[],y=Object.fromEntries(v.map(m=>[m.name,m])),w=a.conversion_tags?.map(m=>e.conversion_tags_create(m))??[],c=Object.fromEntries(w.map(m=>[m.name,m]));return a.items.forEach(m=>{const r=e.items_create(m.name,t.get(m.image));m.tags.forEach(l=>r.tags_add(y[l])),m.conversions.forEach(l=>{const u=e.conversions_create();l.tags.forEach(g=>u.tags_add(c[g])),l.inputs.forEach(g=>u.inputs_add(b[g])),l.outputs.forEach(g=>u.outputs_add(b[g])),r.conversions_add(u)})}),e}function kn(S){return S.toLowerCase().replaceAll(hr,"_")}function pr(S){const p=URL.createObjectURL(S),t=document.createElement("a");t.href=p,t.download=S.name,t.hidden=!0,t.click(),URL.revokeObjectURL(p)}async function rr(S){return new Promise(p=>{const t=document.createElement("input");t.type="file",t.accept=S,t.addEventListener("change",()=>p(t.files?.[0])),t.addEventListener("cancel",()=>p(void 0)),t.click()})}function En(S,p,t){const i=S.slice();return i[20]=p[t],i}function Cn(S,p,t){const i=S.slice();return i[20]=p[t],i}function Sn(S,p,t){const i=S.slice();return i[20]=p[t],i}function xn(S,p,t){const i=S.slice();return i[20]=p[t],i}function zn(S,p,t){const i=S.slice();return i[29]=p[t],i}function An(S,p,t){const i=S.slice();return i[29]=p[t],i}function In(S,p){let t,i,h=p[29].name+"",s,a,e;function d(){return p[11](p[29])}return{key:S,first:null,c(){t=K("li"),i=K("button"),s=zt(h),this.h()},l(b){t=Y(b,"LI",{});var v=et(t);i=Y(v,"BUTTON",{title:!0});var y=et(i);s=At(y,h),y.forEach(Q),v.forEach(Q),this.h()},h(){V(i,"title","Delete Tag"),this.first=t},m(b,v){Tt(b,t,v),I(t,i),I(i,s),a||(e=wt(i,"click",d),a=!0)},p(b,v){p=b,v[0]&1&&h!==(h=p[29].name+"")&&Dt(s,h)},d(b){b&&Q(t),a=!1,e()}}}function Tn(S,p){let t,i=p[29].name+"",h,s;return{key:S,first:null,c(){t=K("option"),h=zt(i),this.h()},l(a){t=Y(a,"OPTION",{});var e=et(t);h=At(e,i),e.forEach(Q),this.h()},h(){t.__value=s=p[29],Rt(t,t.__value),this.first=t},m(a,e){Tt(a,t,e),I(t,h)},p(a,e){p=a,e[0]&16&&i!==(i=p[29].name+"")&&Dt(h,i),e[0]&16&&s!==(s=p[29])&&(t.__value=s,Rt(t,t.__value))},d(a){a&&Q(t)}}}function On(S,p){let t,i,h=p[20].name+"",s,a,e;function d(){return p[13](p[20])}return{key:S,first:null,c(){t=K("li"),i=K("button"),s=zt(h),this.h()},l(b){t=Y(b,"LI",{});var v=et(t);i=Y(v,"BUTTON",{title:!0});var y=et(i);s=At(y,h),y.forEach(Q),v.forEach(Q),this.h()},h(){V(i,"title","Delete Input"),this.first=t},m(b,v){Tt(b,t,v),I(t,i),I(i,s),a||(e=wt(i,"click",d),a=!0)},p(b,v){p=b,v[0]&1&&h!==(h=p[20].name+"")&&Dt(s,h)},d(b){b&&Q(t),a=!1,e()}}}function Bn(S,p){let t,i=p[20].name+"",h,s;return{key:S,first:null,c(){t=K("option"),h=zt(i),this.h()},l(a){t=Y(a,"OPTION",{});var e=et(t);h=At(e,i),e.forEach(Q),this.h()},h(){t.__value=s=p[20],Rt(t,t.__value),this.first=t},m(a,e){Tt(a,t,e),I(t,h)},p(a,e){p=a,e[0]&64&&i!==(i=p[20].name+"")&&Dt(h,i),e[0]&64&&s!==(s=p[20])&&(t.__value=s,Rt(t,t.__value))},d(a){a&&Q(t)}}}function Nn(S,p){let t,i,h=p[20].name+"",s,a,e;function d(){return p[15](p[20])}return{key:S,first:null,c(){t=K("li"),i=K("button"),s=zt(h),this.h()},l(b){t=Y(b,"LI",{});var v=et(t);i=Y(v,"BUTTON",{title:!0});var y=et(i);s=At(y,h),y.forEach(Q),v.forEach(Q),this.h()},h(){V(i,"title","Delete Output"),this.first=t},m(b,v){Tt(b,t,v),I(t,i),I(i,s),a||(e=wt(i,"click",d),a=!0)},p(b,v){p=b,v[0]&1&&h!==(h=p[20].name+"")&&Dt(s,h)},d(b){b&&Q(t),a=!1,e()}}}function Rn(S,p){let t,i=p[20].name+"",h,s;return{key:S,first:null,c(){t=K("option"),h=zt(i),this.h()},l(a){t=Y(a,"OPTION",{});var e=et(t);h=At(e,i),e.forEach(Q),this.h()},h(){t.__value=s=p[20],Rt(t,t.__value),this.first=t},m(a,e){Tt(a,t,e),I(t,h)},p(a,e){p=a,e[0]&32&&i!==(i=p[20].name+"")&&Dt(h,i),e[0]&32&&s!==(s=p[20])&&(t.__value=s,Rt(t,t.__value))},d(a){a&&Q(t)}}}function mr(S){let p,t,i=[],h=new Map,s,a,e,d,b,v=[],y=new Map,w,c,m,r=[],l=new Map,u,g,k,z,x,D=[],A=new Map,P,T,j="🠒",nt,E,U,o=[],W=new Map,at,q,F,Z,ot,O=[],N=new Map,H,L,G=Ct(S[0].tags);const vt=_=>_[29];for(let _=0;_<G.length;_+=1){let f=An(S,G,_),C=vt(f);h.set(C,i[_]=In(C,f))}let bt=Ct(S[4]);const dt=_=>_[29];for(let _=0;_<bt.length;_+=1){let f=zn(S,bt,_),C=dt(f);y.set(C,v[_]=Tn(C,f))}let _t=Ct(S[0].inputs);const yt=_=>_[20];for(let _=0;_<_t.length;_+=1){let f=xn(S,_t,_),C=yt(f);l.set(C,r[_]=On(C,f))}let gt=Ct(S[6]);const kt=_=>_[20];for(let _=0;_<gt.length;_+=1){let f=Sn(S,gt,_),C=kt(f);A.set(C,D[_]=Bn(C,f))}let St=Ct(S[0].outputs);const n=_=>_[20];for(let _=0;_<St.length;_+=1){let f=Cn(S,St,_),C=n(f);W.set(C,o[_]=Nn(C,f))}let M=Ct(S[5]);const R=_=>_[20];for(let _=0;_<M.length;_+=1){let f=En(S,M,_),C=R(f);N.set(C,O[_]=Rn(C,f))}return{c(){p=K("div"),t=K("ul");for(let _=0;_<i.length;_+=1)i[_].c();s=lt(),a=K("li"),e=K("select"),d=K("option"),b=zt("+");for(let _=0;_<v.length;_+=1)v[_].c();w=lt(),c=K("div"),m=K("ul");for(let _=0;_<r.length;_+=1)r[_].c();u=lt(),g=K("li"),k=K("select"),z=K("option"),x=zt("+");for(let _=0;_<D.length;_+=1)D[_].c();P=lt(),T=K("span"),T.textContent=j,nt=lt(),E=K("div"),U=K("ul");for(let _=0;_<o.length;_+=1)o[_].c();at=lt(),q=K("li"),F=K("select"),Z=K("option"),ot=zt("+");for(let _=0;_<O.length;_+=1)O[_].c();this.h()},l(_){p=Y(_,"DIV",{class:!0});var f=et(p);t=Y(f,"UL",{class:!0});var C=et(t);for(let ut=0;ut<i.length;ut+=1)i[ut].l(C);s=ct(C),a=Y(C,"LI",{});var X=et(a);e=Y(X,"SELECT",{class:!0});var J=et(e);d=Y(J,"OPTION",{});var B=et(d);b=At(B,"+"),B.forEach(Q);for(let ut=0;ut<v.length;ut+=1)v[ut].l(J);J.forEach(Q),X.forEach(Q),C.forEach(Q),w=ct(f),c=Y(f,"DIV",{class:!0});var $=et(c);m=Y($,"UL",{class:!0});var rt=et(m);for(let ut=0;ut<r.length;ut+=1)r[ut].l(rt);u=ct(rt),g=Y(rt,"LI",{});var tt=et(g);k=Y(tt,"SELECT",{class:!0});var st=et(k);z=Y(st,"OPTION",{});var pt=et(z);x=At(pt,"+"),pt.forEach(Q);for(let ut=0;ut<D.length;ut+=1)D[ut].l(st);st.forEach(Q),tt.forEach(Q),rt.forEach(Q),$.forEach(Q),P=ct(f),T=Y(f,"SPAN",{class:!0,"data-svelte-h":!0}),Et(T)!=="svelte-1fysel8"&&(T.textContent=j),nt=ct(f),E=Y(f,"DIV",{class:!0});var mt=et(E);U=Y(mt,"UL",{class:!0});var It=et(U);for(let ut=0;ut<o.length;ut+=1)o[ut].l(It);at=ct(It),q=Y(It,"LI",{});var Ot=et(q);F=Y(Ot,"SELECT",{class:!0});var xt=et(F);Z=Y(xt,"OPTION",{});var Bt=et(Z);ot=At(Bt,"+"),Bt.forEach(Q);for(let ut=0;ut<O.length;ut+=1)O[ut].l(xt);xt.forEach(Q),Ot.forEach(Q),It.forEach(Q),mt.forEach(Q),f.forEach(Q),this.h()},h(){d.__value=void 0,Rt(d,d.__value),V(e,"class","svelte-1f4ww2e"),S[3]===void 0&&Ne(()=>S[12].call(e)),V(t,"class","tags svelte-1f4ww2e"),z.__value=void 0,Rt(z,z.__value),V(k,"class","svelte-1f4ww2e"),S[1]===void 0&&Ne(()=>S[14].call(k)),V(m,"class","svelte-1f4ww2e"),V(c,"class","inputs svelte-1f4ww2e"),V(T,"class","maps_to svelte-1f4ww2e"),Z.__value=void 0,Rt(Z,Z.__value),V(F,"class","svelte-1f4ww2e"),S[2]===void 0&&Ne(()=>S[16].call(F)),V(U,"class","svelte-1f4ww2e"),V(E,"class","outputs svelte-1f4ww2e"),V(p,"class","conversion-editor svelte-1f4ww2e")},m(_,f){Tt(_,p,f),I(p,t);for(let C=0;C<i.length;C+=1)i[C]&&i[C].m(t,null);I(t,s),I(t,a),I(a,e),I(e,d),I(d,b);for(let C=0;C<v.length;C+=1)v[C]&&v[C].m(e,null);ee(e,S[3],!0),I(p,w),I(p,c),I(c,m);for(let C=0;C<r.length;C+=1)r[C]&&r[C].m(m,null);I(m,u),I(m,g),I(g,k),I(k,z),I(z,x);for(let C=0;C<D.length;C+=1)D[C]&&D[C].m(k,null);ee(k,S[1],!0),I(p,P),I(p,T),I(p,nt),I(p,E),I(E,U);for(let C=0;C<o.length;C+=1)o[C]&&o[C].m(U,null);I(U,at),I(U,q),I(q,F),I(F,Z),I(Z,ot);for(let C=0;C<O.length;C+=1)O[C]&&O[C].m(F,null);ee(F,S[2],!0),H||(L=[wt(e,"change",S[12]),wt(k,"change",S[14]),wt(F,"change",S[16])],H=!0)},p(_,f){f[0]&513&&(G=Ct(_[0].tags),i=Pt(i,f,vt,1,_,G,h,t,Zt,In,s,An)),f[0]&16&&(bt=Ct(_[4]),v=Pt(v,f,dt,1,_,bt,y,e,Zt,Tn,null,zn)),f[0]&24&&ee(e,_[3]),f[0]&129&&(_t=Ct(_[0].inputs),r=Pt(r,f,yt,1,_,_t,l,m,Zt,On,u,xn)),f[0]&64&&(gt=Ct(_[6]),D=Pt(D,f,kt,1,_,gt,A,k,Zt,Bn,null,Sn)),f[0]&66&&ee(k,_[1]),f[0]&257&&(St=Ct(_[0].outputs),o=Pt(o,f,n,1,_,St,W,U,Zt,Nn,at,Cn)),f[0]&32&&(M=Ct(_[5]),O=Pt(O,f,R,1,_,M,N,F,Zt,Rn,null,En)),f[0]&36&&ee(F,_[2])},i:pe,o:pe,d(_){_&&Q(p);for(let f=0;f<i.length;f+=1)i[f].d();for(let f=0;f<v.length;f+=1)v[f].d();for(let f=0;f<r.length;f+=1)r[f].d();for(let f=0;f<D.length;f+=1)D[f].d();for(let f=0;f<o.length;f+=1)o[f].d();for(let f=0;f<O.length;f+=1)O[f].d();H=!1,Kt(L)}}}function gr(S,p,t){let i,h,s,{item_db:a}=p,{conversion:e}=p,d,b,v;function y(A){e.inputs_add(A),t(0,e)}function w(A){e.inputs_remove(A),t(0,e)}function c(A){e.outputs_add(A),t(0,e)}function m(A){e.outputs_remove(A),t(0,e)}function r(A){e.tags_add(A),t(0,e)}function l(A){e.tags_remove(A),t(0,e)}const u=A=>l(A);function g(){v=Re(this),t(3,v),t(4,s),t(10,a),t(0,e)}const k=A=>w(A);function z(){d=Re(this),t(1,d),t(6,i),t(10,a),t(0,e)}const x=A=>m(A);function D(){b=Re(this),t(2,b),t(5,h),t(10,a),t(0,e)}return S.$$set=A=>{"item_db"in A&&t(10,a=A.item_db),"conversion"in A&&t(0,e=A.conversion)},S.$$.update=()=>{S.$$.dirty[0]&2&&d&&(y(d),t(1,d=void 0)),S.$$.dirty[0]&1025&&t(6,i=[...De(a.effects.values(),A=>!e.inputs.has(A))]),S.$$.dirty[0]&4&&b&&(c(b),t(2,b=void 0)),S.$$.dirty[0]&1025&&t(5,h=[...De(a.effects.values(),A=>!e.outputs.has(A))]),S.$$.dirty[0]&8&&v&&(r(v),t(3,v=void 0)),S.$$.dirty[0]&1025&&t(4,s=[...De(a.conversion_tags.values(),A=>!e.tags.has(A))])},[e,d,b,v,s,h,i,w,m,l,a,u,g,k,z,x,D]}class vr extends Le{constructor(p){super(),Fe(this,p,gr,mr,Ue,{item_db:10,conversion:0},null,[-1,-1])}}function Dn(S){let p,t,i="❌",h,s;return{c(){p=K("li"),t=K("button"),t.textContent=i,this.h()},l(a){p=Y(a,"LI",{});var e=et(p);t=Y(e,"BUTTON",{title:!0,"data-svelte-h":!0}),Et(t)!=="svelte-xj7h6h"&&(t.textContent=i),e.forEach(Q),this.h()},h(){V(t,"title","Delete Image")},m(a,e){Tt(a,p,e),I(p,t),h||(s=wt(t,"click",S[9]),h=!0)},p:pe,d(a){a&&Q(p),h=!1,s()}}}function br(S){let p,t,i,h,s,a,e="🌐",d,b,v,y="📁",w,c,m,r=S[0]&&Dn(S);return{c(){p=K("div"),t=K("img"),i=lt(),h=K("menu"),s=K("li"),a=K("button"),a.textContent=e,d=lt(),b=K("li"),v=K("button"),v.textContent=y,w=lt(),r&&r.c(),this.h()},l(l){p=Y(l,"DIV",{class:!0});var u=et(p);t=Y(u,"IMG",{class:!0}),i=ct(u),h=Y(u,"MENU",{class:!0});var g=et(h);s=Y(g,"LI",{});var k=et(s);a=Y(k,"BUTTON",{title:!0,"data-svelte-h":!0}),Et(a)!=="svelte-wi1skv"&&(a.textContent=e),k.forEach(Q),d=ct(g),b=Y(g,"LI",{});var z=et(b);v=Y(z,"BUTTON",{title:!0,"data-svelte-h":!0}),Et(v)!=="svelte-1h4gqn4"&&(v.textContent=y),z.forEach(Q),w=ct(g),r&&r.l(g),g.forEach(Q),u.forEach(Q),this.h()},h(){V(t,"class","svelte-j620p6"),V(a,"title","Load Image From Web"),V(v,"title","Load Image From Device"),V(h,"class","svelte-j620p6"),V(p,"class","svelte-j620p6")},m(l,u){Tt(l,p,u),I(p,t),S[6](t),I(p,i),I(p,h),I(h,s),I(s,a),I(h,d),I(h,b),I(b,v),I(h,w),r&&r.m(h,null),c||(m=[wt(a,"click",S[7]),wt(v,"click",S[8])],c=!0)},p(l,[u]){l[0]?r?r.p(l,u):(r=Dn(l),r.c(),r.m(h,null)):r&&(r.d(1),r=null)},i:pe,o:pe,d(l){l&&Q(p),S[6](null),r&&r.d(),c=!1,Kt(m)}}}function yr(S,p,t){let{source:i}=p,{placeholder:h=""}=p;const s=ir();let a;function e(r,l){if(l instanceof File){const u=URL.createObjectURL(l);r.src=u,r.addEventListener("load",()=>{URL.revokeObjectURL(u)},{once:!0})}else r.src=h}async function d(){const r=prompt("Enter image URL:");if(r)try{const l=await fetch(r,{mode:"cors"});if(!l.ok)throw new Error(l.statusText);const u=l.headers.get("Content-Type");if(!u||!u.startsWith("image/"))throw new Error(`File is not an image. Content-Type: ${u}.`);const g=l.url.substring(l.url.lastIndexOf("/")+1),k=await l.blob();t(0,i=new File([k],g,{type:k.type})),s("change",i)}catch(l){alert(`Failed to load image. (${l})`)}}async function b(){const r=await rr("image/*");r&&(t(0,i=r),s("change",i))}function v(){t(0,i=void 0),s("change",i)}function y(r){sr[r?"unshift":"push"](()=>{a=r,t(1,a)})}const w=()=>d(),c=()=>b(),m=()=>v();return S.$$set=r=>{"source"in r&&t(0,i=r.source),"placeholder"in r&&t(5,h=r.placeholder)},S.$$.update=()=>{S.$$.dirty&3&&a&&e(a,i)},[i,a,d,b,v,h,y,w,c,m]}class wr extends Le{constructor(p){super(),Fe(this,p,yr,br,Ue,{source:0,placeholder:5})}}function Un(S,p,t){const i=S.slice();return i[13]=p[t],i}function Ln(S,p,t){const i=S.slice();return i[16]=p[t],i}function Fn(S,p,t){const i=S.slice();return i[16]=p[t],i}function Pn(S){let p,t,i="Image",h,s,a,e,d,b="Tags",v,y,w=[],c=new Map,m,r,l,u,g,k=[],z=new Map,x,D,A,P,T="+",j,nt,E=[],U=new Map,o,W,at;a=new wr({props:{source:S[0].image}}),a.$on("change",S[8]);let q=Ct(S[0].tags);const F=H=>H[16];for(let H=0;H<q.length;H+=1){let L=Fn(S,q,H),G=F(L);c.set(G,w[H]=jn(G,L))}let Z=Ct(S[3]);const ot=H=>H[16];for(let H=0;H<Z.length;H+=1){let L=Ln(S,Z,H),G=ot(L);z.set(G,k[H]=Mn(G,L))}let O=Ct(S[0].conversions);const N=H=>H[13];for(let H=0;H<O.length;H+=1){let L=Un(S,O,H),G=N(L);U.set(G,E[H]=Zn(G,L))}return{c(){p=K("div"),t=K("h3"),t.textContent=i,h=lt(),s=K("div"),He(a.$$.fragment),e=lt(),d=K("h3"),d.textContent=b,v=lt(),y=K("ul");for(let H=0;H<w.length;H+=1)w[H].c();m=lt(),r=K("li"),l=K("select"),u=K("option"),g=zt("+");for(let H=0;H<k.length;H+=1)k[H].c();x=lt(),D=K("h3"),A=zt(`Effect Conversions
      `),P=K("button"),P.textContent=T,j=lt(),nt=K("div");for(let H=0;H<E.length;H+=1)E[H].c();this.h()},l(H){p=Y(H,"DIV",{class:!0});var L=et(p);t=Y(L,"H3",{class:!0,"data-svelte-h":!0}),Et(t)!=="svelte-2qut89"&&(t.textContent=i),h=ct(L),s=Y(L,"DIV",{class:!0});var G=et(s);Ge(a.$$.fragment,G),G.forEach(Q),e=ct(L),d=Y(L,"H3",{class:!0,"data-svelte-h":!0}),Et(d)!=="svelte-1nl40cx"&&(d.textContent=b),v=ct(L),y=Y(L,"UL",{class:!0});var vt=et(y);for(let kt=0;kt<w.length;kt+=1)w[kt].l(vt);m=ct(vt),r=Y(vt,"LI",{});var bt=et(r);l=Y(bt,"SELECT",{class:!0});var dt=et(l);u=Y(dt,"OPTION",{});var _t=et(u);g=At(_t,"+"),_t.forEach(Q);for(let kt=0;kt<k.length;kt+=1)k[kt].l(dt);dt.forEach(Q),bt.forEach(Q),vt.forEach(Q),x=ct(L),D=Y(L,"H3",{class:!0});var yt=et(D);A=At(yt,`Effect Conversions
      `),P=Y(yt,"BUTTON",{class:!0,title:!0,style:!0,"data-svelte-h":!0}),Et(P)!=="svelte-1mxzg4y"&&(P.textContent=T),yt.forEach(Q),j=ct(L),nt=Y(L,"DIV",{class:!0});var gt=et(nt);for(let kt=0;kt<E.length;kt+=1)E[kt].l(gt);gt.forEach(Q),L.forEach(Q),this.h()},h(){V(t,"class","svelte-111ejom"),V(s,"class","item-image-container svelte-111ejom"),V(d,"class","svelte-111ejom"),u.__value=void 0,Rt(u,u.__value),V(l,"class","svelte-111ejom"),S[2]===void 0&&Ne(()=>S[10].call(l)),V(y,"class","svelte-111ejom"),V(P,"class","flat large svelte-111ejom"),V(P,"title","Add Effect Conversion"),re(P,"padding","0.125em 0.5em"),V(D,"class","svelte-111ejom"),V(nt,"class","conversion-list svelte-111ejom"),V(p,"class","main-container scrollable svelte-111ejom")},m(H,L){Tt(H,p,L),I(p,t),I(p,h),I(p,s),Ve(a,s,null),I(p,e),I(p,d),I(p,v),I(p,y);for(let G=0;G<w.length;G+=1)w[G]&&w[G].m(y,null);I(y,m),I(y,r),I(r,l),I(l,u),I(u,g);for(let G=0;G<k.length;G+=1)k[G]&&k[G].m(l,null);ee(l,S[2],!0),I(p,x),I(p,D),I(D,A),I(D,P),I(p,j),I(p,nt);for(let G=0;G<E.length;G+=1)E[G]&&E[G].m(nt,null);o=!0,W||(at=[wt(l,"change",S[10]),wt(P,"click",S[6])],W=!0)},p(H,L){const G={};L&1&&(G.source=H[0].image),a.$set(G),L&33&&(q=Ct(H[0].tags),w=Pt(w,L,F,1,H,q,c,y,Zt,jn,m,Fn)),L&8&&(Z=Ct(H[3]),k=Pt(k,L,ot,1,H,Z,z,l,Zt,Mn,null,Ln)),L&12&&ee(l,H[2]),L&131&&(O=Ct(H[0].conversions),$n(),E=Pt(E,L,N,1,H,O,U,nt,or,Zn,null,Un),tr())},i(H){if(!o){ie(a.$$.fragment,H);for(let L=0;L<O.length;L+=1)ie(E[L]);o=!0}},o(H){le(a.$$.fragment,H);for(let L=0;L<E.length;L+=1)le(E[L]);o=!1},d(H){H&&Q(p),Ke(a);for(let L=0;L<w.length;L+=1)w[L].d();for(let L=0;L<k.length;L+=1)k[L].d();for(let L=0;L<E.length;L+=1)E[L].d();W=!1,Kt(at)}}}function jn(S,p){let t,i,h=p[16].name+"",s,a,e;function d(){return p[9](p[16])}return{key:S,first:null,c(){t=K("li"),i=K("button"),s=zt(h),this.h()},l(b){t=Y(b,"LI",{});var v=et(t);i=Y(v,"BUTTON",{title:!0});var y=et(i);s=At(y,h),y.forEach(Q),v.forEach(Q),this.h()},h(){V(i,"title","Delete Tag"),this.first=t},m(b,v){Tt(b,t,v),I(t,i),I(i,s),a||(e=wt(i,"click",d),a=!0)},p(b,v){p=b,v&1&&h!==(h=p[16].name+"")&&Dt(s,h)},d(b){b&&Q(t),a=!1,e()}}}function Mn(S,p){let t,i=p[16].name+"",h,s;return{key:S,first:null,c(){t=K("option"),h=zt(i),this.h()},l(a){t=Y(a,"OPTION",{});var e=et(t);h=At(e,i),e.forEach(Q),this.h()},h(){t.__value=s=p[16],Rt(t,t.__value),this.first=t},m(a,e){Tt(a,t,e),I(t,h)},p(a,e){p=a,e&8&&i!==(i=p[16].name+"")&&Dt(h,i),e&8&&s!==(s=p[16])&&(t.__value=s,Rt(t,t.__value))},d(a){a&&Q(t)}}}function Zn(S,p){let t,i,h,s,a,e,d="❌",b,v,y,w;i=new vr({props:{item_db:p[1],conversion:p[13]}});function c(){return p[11](p[13])}return{key:S,first:null,c(){t=K("div"),He(i.$$.fragment),h=lt(),s=K("menu"),a=K("li"),e=K("button"),e.textContent=d,b=lt(),this.h()},l(m){t=Y(m,"DIV",{class:!0});var r=et(t);Ge(i.$$.fragment,r),h=ct(r),s=Y(r,"MENU",{class:!0});var l=et(s);a=Y(l,"LI",{});var u=et(a);e=Y(u,"BUTTON",{title:!0,"data-svelte-h":!0}),Et(e)!=="svelte-3ao5rj"&&(e.textContent=d),u.forEach(Q),l.forEach(Q),b=ct(r),r.forEach(Q),this.h()},h(){V(e,"title","Delete Effect Conversion"),V(s,"class","svelte-111ejom"),V(t,"class","conversion svelte-111ejom"),this.first=t},m(m,r){Tt(m,t,r),Ve(i,t,null),I(t,h),I(t,s),I(s,a),I(a,e),I(t,b),v=!0,y||(w=wt(e,"click",c),y=!0)},p(m,r){p=m;const l={};r&2&&(l.item_db=p[1]),r&1&&(l.conversion=p[13]),i.$set(l)},i(m){v||(ie(i.$$.fragment,m),v=!0)},o(m){le(i.$$.fragment,m),v=!1},d(m){m&&Q(t),Ke(i),y=!1,w()}}}function kr(S){let p,t,i=S[0]&&Pn(S);return{c(){i&&i.c(),p=yn()},l(h){i&&i.l(h),p=yn()},m(h,s){i&&i.m(h,s),Tt(h,p,s),t=!0},p(h,[s]){h[0]?i?(i.p(h,s),s&1&&ie(i,1)):(i=Pn(h),i.c(),ie(i,1),i.m(p.parentNode,p)):i&&($n(),le(i,1,1,()=>{i=null}),tr())},i(h){t||(ie(i),t=!0)},o(h){le(i),t=!1},d(h){h&&Q(p),i&&i.d(h)}}}function Er(S,p,t){let i,{item_db:h}=p,{item:s=void 0}=p,a;function e(l){s&&t(0,s.image=l,s)}function d(l){s&&(s.tags_add(l),t(0,s))}function b(l){s&&(s.tags_remove(l),t(0,s))}function v(){if(s){const l=h.conversions_create();s.conversions_add(l),t(0,s)}}function y(l){s&&confirm("Are you sure you want to delete the effect conversion?")&&(h.conversions_delete(l),t(0,s))}const w=l=>e(l.detail),c=l=>b(l);function m(){a=Re(this),t(2,a),t(3,i),t(0,s),t(1,h)}const r=l=>y(l);return S.$$set=l=>{"item_db"in l&&t(1,h=l.item_db),"item"in l&&t(0,s=l.item)},S.$$.update=()=>{S.$$.dirty&4&&a&&(d(a),t(2,a=void 0)),S.$$.dirty&3&&t(3,i=s?[...De(h.item_tags.values(),l=>!s.tags.has(l))]:[])},[s,h,a,i,e,b,v,y,w,c,m,r]}class Cr extends Le{constructor(p){super(),Fe(this,p,Er,kr,Ue,{item_db:1,item:0})}}function Wn(S,p,t){const i=S.slice();return i[31]=p[t],i}function Hn(S,p,t){const i=S.slice();return i[31]=p[t],i}function Gn(S,p,t){const i=S.slice();i[36]=p[t],i[39]=t;const h=`radio-button-effect-${i[39]}`;return i[37]=h,i}function Vn(S,p,t){const i=S.slice();i[40]=p[t],i[39]=t;const h=`radio-button-item-${i[39]}`;return i[37]=h,i}function Kn(S,p){let t,i,h,s,a=!1,e,d,b,v=p[40].name+"",y,w,c,m="🖉",r,l,u="❌",g,k,z,x,D;function A(){return p[21](p[40])}function P(){return p[22](p[40])}return z=Qn(p[20][1]),{key:S,first:null,c(){t=K("li"),i=K("input"),e=lt(),d=K("label"),b=K("span"),y=zt(v),w=lt(),c=K("button"),c.textContent=m,r=lt(),l=K("button"),l.textContent=u,k=lt(),this.h()},l(T){t=Y(T,"LI",{class:!0});var j=et(t);i=Y(j,"INPUT",{type:!0,id:!0,class:!0}),e=ct(j),d=Y(j,"LABEL",{for:!0,class:!0});var nt=et(d);b=Y(nt,"SPAN",{class:!0});var E=et(b);y=At(E,v),E.forEach(Q),w=ct(nt),c=Y(nt,"BUTTON",{class:!0,title:!0,style:!0,"data-svelte-h":!0}),Et(c)!=="svelte-1mjif60"&&(c.textContent=m),r=ct(nt),l=Y(nt,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Et(l)!=="svelte-10y5kq0"&&(l.textContent=u),nt.forEach(Q),k=ct(j),j.forEach(Q),this.h()},h(){V(i,"type","radio"),V(i,"id",h=p[37]),i.__value=s=p[40],Rt(i,i.__value),V(i,"class","svelte-1yovlyt"),V(b,"class","fill-right svelte-1yovlyt"),V(c,"class","flat on-parent-hover svelte-1yovlyt"),V(c,"title","Rename Item"),re(c,"line-height","1.25em"),V(l,"class","flat on-parent-hover svelte-1yovlyt"),V(l,"title","Delete Item"),V(d,"for",g=p[37]),V(d,"class","item-row svelte-1yovlyt"),V(t,"class","svelte-1yovlyt"),z.p(i),this.first=t},m(T,j){Tt(T,t,j),I(t,i),i.checked=i.__value===p[1],I(t,e),I(t,d),I(d,b),I(b,y),I(d,w),I(d,c),I(d,r),I(d,l),I(t,k),x||(D=[wt(i,"change",p[19]),wt(c,"click",A),wt(l,"click",P)],x=!0)},p(T,j){p=T,j[0]&1&&h!==(h=p[37])&&V(i,"id",h),j[0]&1&&s!==(s=p[40])&&(i.__value=s,Rt(i,i.__value),a=!0),(a||j[0]&3)&&(i.checked=i.__value===p[1]),j[0]&1&&v!==(v=p[40].name+"")&&Dt(y,v),j[0]&1&&g!==(g=p[37])&&V(d,"for",g)},d(T){T&&Q(t),z.r(),x=!1,Kt(D)}}}function Yn(S){let p,t=(S[1]?.name??"")+"",i;return{c(){p=K("h2"),i=zt(t),this.h()},l(h){p=Y(h,"H2",{class:!0});var s=et(p);i=At(s,t),s.forEach(Q),this.h()},h(){V(p,"class","centered svelte-1yovlyt")},m(h,s){Tt(h,p,s),I(p,i)},p(h,s){s[0]&2&&t!==(t=(h[1]?.name??"")+"")&&Dt(i,t)},d(h){h&&Q(p)}}}function qn(S,p){let t,i,h,s,a=!1,e,d,b,v=p[36].name+"",y,w,c,m="🖉",r,l,u="❌",g,k,z,x,D;function A(){return p[24](p[36])}function P(){return p[25](p[36])}return z=Qn(p[20][0]),{key:S,first:null,c(){t=K("li"),i=K("input"),e=lt(),d=K("label"),b=K("span"),y=zt(v),w=lt(),c=K("button"),c.textContent=m,r=lt(),l=K("button"),l.textContent=u,k=lt(),this.h()},l(T){t=Y(T,"LI",{class:!0});var j=et(t);i=Y(j,"INPUT",{type:!0,id:!0,class:!0}),e=ct(j),d=Y(j,"LABEL",{for:!0,class:!0});var nt=et(d);b=Y(nt,"SPAN",{class:!0});var E=et(b);y=At(E,v),E.forEach(Q),w=ct(nt),c=Y(nt,"BUTTON",{class:!0,title:!0,style:!0,"data-svelte-h":!0}),Et(c)!=="svelte-ij4fh6"&&(c.textContent=m),r=ct(nt),l=Y(nt,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Et(l)!=="svelte-1ppeovu"&&(l.textContent=u),nt.forEach(Q),k=ct(j),j.forEach(Q),this.h()},h(){V(i,"type","radio"),V(i,"id",h=p[37]),i.__value=s=p[36],Rt(i,i.__value),V(i,"class","svelte-1yovlyt"),V(b,"class","fill-right svelte-1yovlyt"),V(c,"class","flat on-parent-hover svelte-1yovlyt"),V(c,"title","Rename Effect"),re(c,"line-height","1.25em"),V(l,"class","flat on-parent-hover svelte-1yovlyt"),V(l,"title","Delete Effect"),V(d,"for",g=p[37]),V(d,"class","item-row svelte-1yovlyt"),V(t,"class","svelte-1yovlyt"),z.p(i),this.first=t},m(T,j){Tt(T,t,j),I(t,i),i.checked=i.__value===p[2],I(t,e),I(t,d),I(d,b),I(b,y),I(d,w),I(d,c),I(d,r),I(d,l),I(t,k),x||(D=[wt(i,"change",p[23]),wt(c,"click",A),wt(l,"click",P)],x=!0)},p(T,j){p=T,j[0]&1&&h!==(h=p[37])&&V(i,"id",h),j[0]&1&&s!==(s=p[36])&&(i.__value=s,Rt(i,i.__value),a=!0),(a||j[0]&5)&&(i.checked=i.__value===p[2]),j[0]&1&&v!==(v=p[36].name+"")&&Dt(y,v),j[0]&1&&g!==(g=p[37])&&V(d,"for",g)},d(T){T&&Q(t),z.r(),x=!1,Kt(D)}}}function Xn(S,p){let t,i,h=p[31].name+"",s,a,e,d="🖉",b,v,y="❌",w,c,m;function r(){return p[26](p[31])}function l(){return p[27](p[31])}return{key:S,first:null,c(){t=K("li"),i=K("span"),s=zt(h),a=lt(),e=K("button"),e.textContent=d,b=lt(),v=K("button"),v.textContent=y,w=lt(),this.h()},l(u){t=Y(u,"LI",{class:!0});var g=et(t);i=Y(g,"SPAN",{class:!0});var k=et(i);s=At(k,h),k.forEach(Q),a=ct(g),e=Y(g,"BUTTON",{class:!0,title:!0,style:!0,"data-svelte-h":!0}),Et(e)!=="svelte-ooyis8"&&(e.textContent=d),b=ct(g),v=Y(g,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Et(v)!=="svelte-8brneo"&&(v.textContent=y),w=ct(g),g.forEach(Q),this.h()},h(){V(i,"class","fill-right svelte-1yovlyt"),V(e,"class","flat on-parent-hover svelte-1yovlyt"),V(e,"title","Rename Item Tag"),re(e,"line-height","1.25em"),V(v,"class","flat on-parent-hover svelte-1yovlyt"),V(v,"title","Delete Item Tag"),V(t,"class","item-row svelte-1yovlyt"),this.first=t},m(u,g){Tt(u,t,g),I(t,i),I(i,s),I(t,a),I(t,e),I(t,b),I(t,v),I(t,w),c||(m=[wt(e,"click",r),wt(v,"click",l)],c=!0)},p(u,g){p=u,g[0]&1&&h!==(h=p[31].name+"")&&Dt(s,h)},d(u){u&&Q(t),c=!1,Kt(m)}}}function Jn(S,p){let t,i,h=p[31].name+"",s,a,e,d="🖉",b,v,y="❌",w,c,m;function r(){return p[28](p[31])}function l(){return p[29](p[31])}return{key:S,first:null,c(){t=K("li"),i=K("span"),s=zt(h),a=lt(),e=K("button"),e.textContent=d,b=lt(),v=K("button"),v.textContent=y,w=lt(),this.h()},l(u){t=Y(u,"LI",{class:!0});var g=et(t);i=Y(g,"SPAN",{class:!0});var k=et(i);s=At(k,h),k.forEach(Q),a=ct(g),e=Y(g,"BUTTON",{class:!0,title:!0,style:!0,"data-svelte-h":!0}),Et(e)!=="svelte-jdau4z"&&(e.textContent=d),b=ct(g),v=Y(g,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Et(v)!=="svelte-a8rv67"&&(v.textContent=y),w=ct(g),g.forEach(Q),this.h()},h(){V(i,"class","fill-right svelte-1yovlyt"),V(e,"class","flat on-parent-hover svelte-1yovlyt"),V(e,"title","Rename Item Tag"),re(e,"line-height","1.25em"),V(v,"class","flat on-parent-hover svelte-1yovlyt"),V(v,"title","Delete Item Tag"),V(t,"class","item-row svelte-1yovlyt"),this.first=t},m(u,g){Tt(u,t,g),I(t,i),I(i,s),I(t,a),I(t,e),I(t,b),I(t,v),I(t,w),c||(m=[wt(e,"click",r),wt(v,"click",l)],c=!0)},p(u,g){p=u,g[0]&1&&h!==(h=p[31].name+"")&&Dt(s,h)},d(u){u&&Q(t),c=!1,Kt(m)}}}function Sr(S){let p,t,i,h,s,a="New",e,d,b,v="Load",y,w,c,m="Save",r,l,u,g=S[0].name+"",k,z,x,D="🖉",A,P,T=S[0].effects.size+"",j,nt,E=S[0].items.size+"",U,o,W,at,q,F,Z="Items",ot,O,N,H,L="+",G,vt,bt=[],dt=new Map,_t,yt,gt,kt,St,n,M,R,_,f,C="Effects",X,J,B,$,rt="+",tt,st,pt=[],mt=new Map,It,Ot,xt,Bt,ut="Item Tags",Yt,Ht,Ut,jt,me="+",fe,Gt,Lt=[],qt=new Map,Xt,Jt,Qt,se,Ye="Effect Conversion Tags",je,ce,de,Vt,qe="+",Me,ae,Mt=[],Xe=new Map,oe,Ze,Je,ge=Ct([...S[0].items].sort(te));const Qe=it=>it[40];for(let it=0;it<ge.length;it+=1){let ft=Vn(S,ge,it),ht=Qe(ft);dt.set(ht,bt[it]=Kn(ht,ft))}let Nt=S[1]&&Yn(S);St=new Cr({props:{item_db:S[0],item:S[1]}});let ve=Ct([...S[0].effects].sort(te));const $e=it=>it[36];for(let it=0;it<ve.length;it+=1){let ft=Gn(S,ve,it),ht=$e(ft);mt.set(ht,pt[it]=qn(ht,ft))}let be=Ct([...S[0].item_tags].sort(te));const tn=it=>it[31];for(let it=0;it<be.length;it+=1){let ft=Hn(S,be,it),ht=tn(ft);qt.set(ht,Lt[it]=Xn(ht,ft))}let ye=Ct([...S[0].conversion_tags].sort(te));const en=it=>it[31];for(let it=0;it<ye.length;it+=1){let ft=Wn(S,ye,it),ht=en(ft);Xe.set(ht,Mt[it]=Jn(ht,ft))}return{c(){p=lt(),t=K("div"),i=K("menu"),h=K("li"),s=K("button"),s.textContent=a,e=lt(),d=K("li"),b=K("button"),b.textContent=v,y=lt(),w=K("li"),c=K("button"),c.textContent=m,r=lt(),l=K("header"),u=K("h1"),k=zt(g),z=lt(),x=K("button"),x.textContent=D,A=lt(),P=K("header"),j=zt(T),nt=zt(" effects, "),U=zt(E),o=zt(" items"),W=lt(),at=K("aside"),q=K("header"),F=K("h2"),F.textContent=Z,ot=lt(),O=K("menu"),N=K("li"),H=K("button"),H.textContent=L,G=lt(),vt=K("ul");for(let it=0;it<bt.length;it+=1)bt[it].c();_t=lt(),yt=K("main"),gt=K("header"),Nt&&Nt.c(),kt=lt(),He(St.$$.fragment),n=lt(),M=K("aside"),R=K("section"),_=K("header"),f=K("h2"),f.textContent=C,X=lt(),J=K("menu"),B=K("li"),$=K("button"),$.textContent=rt,tt=lt(),st=K("ul");for(let it=0;it<pt.length;it+=1)pt[it].c();It=lt(),Ot=K("section"),xt=K("header"),Bt=K("h2"),Bt.textContent=ut,Yt=lt(),Ht=K("menu"),Ut=K("li"),jt=K("button"),jt.textContent=me,fe=lt(),Gt=K("ul");for(let it=0;it<Lt.length;it+=1)Lt[it].c();Xt=lt(),Jt=K("section"),Qt=K("header"),se=K("h2"),se.textContent=Ye,je=lt(),ce=K("menu"),de=K("li"),Vt=K("button"),Vt.textContent=qe,Me=lt(),ae=K("ul");for(let it=0;it<Mt.length;it+=1)Mt[it].c();this.h()},l(it){ar("svelte-8jldbh",document.head).forEach(Q),p=ct(it),t=Y(it,"DIV",{class:!0});var ht=et(t);i=Y(ht,"MENU",{class:!0});var ue=et(i);h=Y(ue,"LI",{class:!0});var nn=et(h);s=Y(nn,"BUTTON",{class:!0,"data-svelte-h":!0}),Et(s)!=="svelte-1k02kzi"&&(s.textContent=a),nn.forEach(Q),e=ct(ue),d=Y(ue,"LI",{class:!0});var rn=et(d);b=Y(rn,"BUTTON",{class:!0,"data-svelte-h":!0}),Et(b)!=="svelte-qw05j0"&&(b.textContent=v),rn.forEach(Q),y=ct(ue),w=Y(ue,"LI",{class:!0});var sn=et(w);c=Y(sn,"BUTTON",{class:!0,"data-svelte-h":!0}),Et(c)!=="svelte-rapr1q"&&(c.textContent=m),sn.forEach(Q),ue.forEach(Q),r=ct(ht),l=Y(ht,"HEADER",{class:!0});var we=et(l);u=Y(we,"H1",{class:!0});var an=et(u);k=At(an,g),an.forEach(Q),z=ct(we),x=Y(we,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Et(x)!=="svelte-18krhi0"&&(x.textContent=D),we.forEach(Q),A=ct(ht),P=Y(ht,"HEADER",{class:!0});var _e=et(P);j=At(_e,T),nt=At(_e," effects, "),U=At(_e,E),o=At(_e," items"),_e.forEach(Q),W=ct(ht),at=Y(ht,"ASIDE",{class:!0});var ke=et(at);q=Y(ke,"HEADER",{class:!0});var Ee=et(q);F=Y(Ee,"H2",{class:!0,"data-svelte-h":!0}),Et(F)!=="svelte-1hc3rnu"&&(F.textContent=Z),ot=ct(Ee),O=Y(Ee,"MENU",{class:!0});var on=et(O);N=Y(on,"LI",{});var ln=et(N);H=Y(ln,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Et(H)!=="svelte-m9kak"&&(H.textContent=L),ln.forEach(Q),on.forEach(Q),Ee.forEach(Q),G=ct(ke),vt=Y(ke,"UL",{class:!0});var cn=et(vt);for(let Ft=0;Ft<bt.length;Ft+=1)bt[Ft].l(cn);cn.forEach(Q),ke.forEach(Q),_t=ct(ht),yt=Y(ht,"MAIN",{class:!0,style:!0});var Ce=et(yt);gt=Y(Ce,"HEADER",{style:!0,class:!0});var un=et(gt);Nt&&Nt.l(un),un.forEach(Q),kt=ct(Ce),Ge(St.$$.fragment,Ce),Ce.forEach(Q),n=ct(ht),M=Y(ht,"ASIDE",{class:!0,style:!0});var he=et(M);R=Y(he,"SECTION",{class:!0});var Se=et(R);_=Y(Se,"HEADER",{class:!0});var xe=et(_);f=Y(xe,"H2",{class:!0,"data-svelte-h":!0}),Et(f)!=="svelte-1ythqko"&&(f.textContent=C),X=ct(xe),J=Y(xe,"MENU",{class:!0});var hn=et(J);B=Y(hn,"LI",{});var fn=et(B);$=Y(fn,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Et($)!=="svelte-1hf2s1c"&&($.textContent=rt),fn.forEach(Q),hn.forEach(Q),xe.forEach(Q),tt=ct(Se),st=Y(Se,"UL",{class:!0});var dn=et(st);for(let Ft=0;Ft<pt.length;Ft+=1)pt[Ft].l(dn);dn.forEach(Q),Se.forEach(Q),It=ct(he),Ot=Y(he,"SECTION",{class:!0});var ze=et(Ot);xt=Y(ze,"HEADER",{class:!0});var Ae=et(xt);Bt=Y(Ae,"H2",{class:!0,"data-svelte-h":!0}),Et(Bt)!=="svelte-169m74u"&&(Bt.textContent=ut),Yt=ct(Ae),Ht=Y(Ae,"MENU",{class:!0});var _n=et(Ht);Ut=Y(_n,"LI",{});var pn=et(Ut);jt=Y(pn,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Et(jt)!=="svelte-1l6bgc9"&&(jt.textContent=me),pn.forEach(Q),_n.forEach(Q),Ae.forEach(Q),fe=ct(ze),Gt=Y(ze,"UL",{class:!0});var mn=et(Gt);for(let Ft=0;Ft<Lt.length;Ft+=1)Lt[Ft].l(mn);mn.forEach(Q),ze.forEach(Q),Xt=ct(he),Jt=Y(he,"SECTION",{class:!0});var Ie=et(Jt);Qt=Y(Ie,"HEADER",{class:!0});var Te=et(Qt);se=Y(Te,"H2",{class:!0,"data-svelte-h":!0}),Et(se)!=="svelte-byf7zq"&&(se.textContent=Ye),je=ct(Te),ce=Y(Te,"MENU",{class:!0});var gn=et(ce);de=Y(gn,"LI",{});var vn=et(de);Vt=Y(vn,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Et(Vt)!=="svelte-km21yn"&&(Vt.textContent=qe),vn.forEach(Q),gn.forEach(Q),Te.forEach(Q),Me=ct(Ie),ae=Y(Ie,"UL",{class:!0});var bn=et(ae);for(let Ft=0;Ft<Mt.length;Ft+=1)Mt[Ft].l(bn);bn.forEach(Q),Ie.forEach(Q),he.forEach(Q),ht.forEach(Q),this.h()},h(){document.title="Procedural Adventure Editor",V(s,"class","svelte-1yovlyt"),V(h,"class","svelte-1yovlyt"),V(b,"class","svelte-1yovlyt"),V(d,"class","svelte-1yovlyt"),V(c,"class","svelte-1yovlyt"),V(w,"class","svelte-1yovlyt"),V(i,"class","inset stretch svelte-1yovlyt"),V(u,"class","svelte-1yovlyt"),V(x,"class","flat"),V(x,"title","Rename Item Database"),V(l,"class","inset svelte-1yovlyt"),V(P,"class","inset centered svelte-1yovlyt"),V(F,"class","svelte-1yovlyt"),V(H,"class","flat large"),V(H,"title","Add Item"),V(O,"class","svelte-1yovlyt"),V(q,"class","svelte-1yovlyt"),V(vt,"class","scrollable svelte-1yovlyt"),V(at,"class","inset panel svelte-1yovlyt"),re(gt,"z-index","1"),V(gt,"class","svelte-1yovlyt"),V(yt,"class","inset panel svelte-1yovlyt"),re(yt,"row-gap","0"),V(f,"class","svelte-1yovlyt"),V($,"class","flat large"),V($,"title","Add Effect"),V(J,"class","svelte-1yovlyt"),V(_,"class","svelte-1yovlyt"),V(st,"class","scrollable svelte-1yovlyt"),V(R,"class","inset panel svelte-1yovlyt"),V(Bt,"class","svelte-1yovlyt"),V(jt,"class","flat large"),V(jt,"title","Add Item Tag"),V(Ht,"class","svelte-1yovlyt"),V(xt,"class","svelte-1yovlyt"),V(Gt,"class","scrollable svelte-1yovlyt"),V(Ot,"class","inset panel svelte-1yovlyt"),V(se,"class","svelte-1yovlyt"),V(Vt,"class","flat large"),V(Vt,"title","Add Conversion Tag"),V(ce,"class","svelte-1yovlyt"),V(Qt,"class","svelte-1yovlyt"),V(ae,"class","scrollable svelte-1yovlyt"),V(Jt,"class","inset panel svelte-1yovlyt"),V(M,"class","grid auto-rows"),re(M,"gap","inherit"),V(t,"class","main-layout svelte-1yovlyt")},m(it,ft){Tt(it,p,ft),Tt(it,t,ft),I(t,i),I(i,h),I(h,s),I(i,e),I(i,d),I(d,b),I(i,y),I(i,w),I(w,c),I(t,r),I(t,l),I(l,u),I(u,k),I(l,z),I(l,x),I(t,A),I(t,P),I(P,j),I(P,nt),I(P,U),I(P,o),I(t,W),I(t,at),I(at,q),I(q,F),I(q,ot),I(q,O),I(O,N),I(N,H),I(at,G),I(at,vt);for(let ht=0;ht<bt.length;ht+=1)bt[ht]&&bt[ht].m(vt,null);I(t,_t),I(t,yt),I(yt,gt),Nt&&Nt.m(gt,null),I(yt,kt),Ve(St,yt,null),I(t,n),I(t,M),I(M,R),I(R,_),I(_,f),I(_,X),I(_,J),I(J,B),I(B,$),I(R,tt),I(R,st);for(let ht=0;ht<pt.length;ht+=1)pt[ht]&&pt[ht].m(st,null);I(M,It),I(M,Ot),I(Ot,xt),I(xt,Bt),I(xt,Yt),I(xt,Ht),I(Ht,Ut),I(Ut,jt),I(Ot,fe),I(Ot,Gt);for(let ht=0;ht<Lt.length;ht+=1)Lt[ht]&&Lt[ht].m(Gt,null);I(M,Xt),I(M,Jt),I(Jt,Qt),I(Qt,se),I(Qt,je),I(Qt,ce),I(ce,de),I(de,Vt),I(Jt,Me),I(Jt,ae);for(let ht=0;ht<Mt.length;ht+=1)Mt[ht]&&Mt[ht].m(ae,null);oe=!0,Ze||(Je=[wt(s,"click",S[3]),wt(b,"click",S[4]),wt(c,"click",S[5]),wt(x,"click",S[6]),wt(H,"click",S[7]),wt($,"click",S[10]),wt(jt,"click",S[13]),wt(Vt,"click",S[16])],Ze=!0)},p(it,ft){(!oe||ft[0]&1)&&g!==(g=it[0].name+"")&&Dt(k,g),(!oe||ft[0]&1)&&T!==(T=it[0].effects.size+"")&&Dt(j,T),(!oe||ft[0]&1)&&E!==(E=it[0].items.size+"")&&Dt(U,E),ft[0]&771&&(ge=Ct([...it[0].items].sort(te)),bt=Pt(bt,ft,Qe,1,it,ge,dt,vt,Zt,Kn,null,Vn)),it[1]?Nt?Nt.p(it,ft):(Nt=Yn(it),Nt.c(),Nt.m(gt,null)):Nt&&(Nt.d(1),Nt=null);const ht={};ft[0]&1&&(ht.item_db=it[0]),ft[0]&2&&(ht.item=it[1]),St.$set(ht),ft[0]&6149&&(ve=Ct([...it[0].effects].sort(te)),pt=Pt(pt,ft,$e,1,it,ve,mt,st,Zt,qn,null,Gn)),ft[0]&49153&&(be=Ct([...it[0].item_tags].sort(te)),Lt=Pt(Lt,ft,tn,1,it,be,qt,Gt,Zt,Xn,null,Hn)),ft[0]&393217&&(ye=Ct([...it[0].conversion_tags].sort(te)),Mt=Pt(Mt,ft,en,1,it,ye,Xe,ae,Zt,Jn,null,Wn))},i(it){oe||(ie(St.$$.fragment,it),oe=!0)},o(it){le(St.$$.fragment,it),oe=!1},d(it){it&&(Q(p),Q(t));for(let ft=0;ft<bt.length;ft+=1)bt[ft].d();Nt&&Nt.d(),Ke(St);for(let ft=0;ft<pt.length;ft+=1)pt[ft].d();for(let ft=0;ft<Lt.length;ft+=1)Lt[ft].d();for(let ft=0;ft<Mt.length;ft+=1)Mt[ft].d();Ze=!1,Kt(Je)}}}function te(S,p){return S.name.localeCompare(p.name)}function xr(S,p,t){let i=D(),h,s;function a(){confirm(`Are you sure you want to create a new item database?
Unsaved changes will be discarded.`)&&(t(0,i=new We("Unnamed Item Database")),t(1,h=void 0))}async function e(){const F=await rr("application/zip");F&&(t(0,i=await _r(F)),t(1,h=void 0))}async function d(){const F=await dr(i);pr(F)}function b(){const F=prompt("Enter item database name:",i.name);F&&t(0,i.name=F,i)}function v(){const F=prompt("Enter item name:");if(!F)return;const Z=i.items_create(F);t(1,h=Z),t(0,i)}function y(F){confirm(`Are you sure you want to delete "${F.name}"?`)&&(i.items_delete(F),t(0,i))}function w(F){const Z=prompt("Enter item name:",F.name);Z&&(F.name=Z,t(0,i),h===F&&t(1,h=F))}function c(){const F=prompt("Enter effect name:");F&&(i.effects_create(F),t(0,i))}function m(F){confirm(`Are you sure you want to delete "${F.name}"?
All references to the effect will be removed from the item database.`)&&(i.effects_delete(F),t(0,i),t(1,h),t(0,i))}function r(F){const Z=prompt("Enter effect name:",F.name);Z&&(F.name=Z,t(0,i),t(1,h),t(0,i))}function l(){const F=prompt("Enter tag name:");F&&(i.item_tags_create(F),t(0,i))}function u(F){confirm(`Are you sure you want to delete "${F.name}"?
All references to the tag will be removed from the item database.`)&&(i.item_tags_delete(F),t(0,i),t(1,h),t(0,i))}function g(F){const Z=prompt("Enter tag name:",F.name);Z&&(F.name=Z,t(0,i),t(1,h),t(0,i))}function k(){const F=prompt("Enter tag name:");F&&(i.conversion_tags_create(F),t(0,i))}function z(F){confirm(`Are you sure you want to delete "${F.name}"?
All references to the tag will be removed from the item database.`)&&(i.conversion_tags_delete(F),t(0,i),t(1,h),t(0,i))}function x(F){const Z=prompt("Enter tag name:",F.name);Z&&(F.name=Z,t(0,i),t(1,h),t(0,i))}function D(){const F=new We("Example Item Database"),Z=["electricity","heat","light"].map(L=>F.effects_create(L)),ot=["electricity"],O=["heat","light"],N=F.conversions_create();return Z.filter(L=>ot.includes(L.name)).forEach(L=>N.inputs_add(L)),Z.filter(L=>O.includes(L.name)).forEach(L=>N.outputs_add(L)),F.items_create("light bulb").conversions_add(N),F.item_tags_create("garage"),F.item_tags_create("kitchen"),F.conversion_tags_create("fun"),F.conversion_tags_create("realistic"),F}const A=[[],[]];function P(){h=this.__value,t(1,h),t(0,i)}const T=F=>w(F),j=F=>y(F);function nt(){s=this.__value,t(2,s)}const E=F=>r(F),U=F=>m(F),o=F=>g(F),W=F=>u(F),at=F=>x(F),q=F=>z(F);return S.$$.update=()=>{S.$$.dirty[0]&3&&(h&&!i.items.has(h)?t(1,h=void 0):!h&&i.items.size>0&&t(1,h=i.items.values().next().value))},[i,h,s,a,e,d,b,v,y,w,c,m,r,l,u,g,k,z,x,P,A,T,j,nt,E,U,o,W,at,q]}class Ir extends Le{constructor(p){super(),Fe(this,p,xr,Sr,Ue,{},null,[-1,-1])}}export{Ir as component};
