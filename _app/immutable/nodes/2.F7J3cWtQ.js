import{r as Le,s as yt,f as rt,n as ct}from"../chunks/scheduler.gf8ilvFp.js";import{t as Ue,d as ye,S as Nt,i as It,g as h,s as M,m as ee,h as m,j as w,c as P,n as te,f as v,y as x,z as fe,k as u,a as oe,x as i,A as He,B as G,o as ue,C as ut,l as ze,b as Ut,D as Lt,p as At,r as Dt,u as Rt,v as St,w as Bt}from"../chunks/index.dT9B4WSc.js";function $(o){return o?.length!==void 0?o:Array.from(o)}function Oe(o,t){o.d(1),t.delete(o.key)}function Mt(o,t){Ue(o,1,1,()=>{t.delete(o.key)})}function ke(o,t,e,l,n,s,c,a,r,_,E,p){let j=o.length,O=s.length,y=j;const U={};for(;y--;)U[o[y].key]=y;const C=[],b=new Map,I=new Map,R=[];for(y=O;y--;){const T=p(n,s,y),S=e(T);let D=c.get(S);D?l&&R.push(()=>D.p(T,t)):(D=_(S,T),D.c()),b.set(S,C[y]=D),S in U&&I.set(S,Math.abs(y-U[S]))}const V=new Set,W=new Set;function K(T){ye(T,1),T.m(a,E),c.set(T.key,T),E=T.first,O--}for(;j&&O;){const T=C[O-1],S=o[j-1],D=T.key,g=S.key;T===S?(E=T.first,j--,O--):b.has(g)?!c.has(D)||V.has(D)?K(T):W.has(g)?j--:I.get(D)>I.get(g)?(W.add(D),K(T)):(V.add(g),j--):(r(S,c),j--)}for(;j--;){const T=o[j];b.has(T.key)||r(T,c)}for(;O;)K(C[O-1]);return Le(R),C}function ft(o,t,e){const l=o.slice();return l[14]=t[e],l}function _t(o,t,e){const l=o.slice();return l[14]=t[e],l}function ht(o,t,e){const l=o.slice();return l[14]=t[e],l}function mt(o,t,e){const l=o.slice();return l[14]=t[e],l}function dt(o,t){let e,l,n=t[14].name+"",s,c,a;function r(){return t[8](t[14])}return{key:o,first:null,c(){e=h("li"),l=h("button"),s=ee(n),this.h()},l(_){e=m(_,"LI",{});var E=w(e);l=m(E,"BUTTON",{});var p=w(l);s=te(p,n),p.forEach(v),E.forEach(v),this.h()},h(){this.first=e},m(_,E){oe(_,e,E),i(e,l),i(l,s),c||(a=G(l,"click",r),c=!0)},p(_,E){t=_,E&1&&n!==(n=t[14].name+"")&&ue(s,n)},d(_){_&&v(e),c=!1,a()}}}function vt(o,t){let e,l=t[14].name+"",n,s;return{key:o,first:null,c(){e=h("option"),n=ee(l),this.h()},l(c){e=m(c,"OPTION",{});var a=w(e);n=te(a,l),a.forEach(v),this.h()},h(){e.__value=s=t[14],fe(e,e.__value),this.first=e},m(c,a){oe(c,e,a),i(e,n)},p(c,a){t=c,a&16&&l!==(l=t[14].name+"")&&ue(n,l),a&16&&s!==(s=t[14])&&(e.__value=s,fe(e,e.__value))},d(c){c&&v(e)}}}function pt(o,t){let e,l,n=t[14].name+"",s,c,a;function r(){return t[10](t[14])}return{key:o,first:null,c(){e=h("li"),l=h("button"),s=ee(n),this.h()},l(_){e=m(_,"LI",{});var E=w(e);l=m(E,"BUTTON",{});var p=w(l);s=te(p,n),p.forEach(v),E.forEach(v),this.h()},h(){this.first=e},m(_,E){oe(_,e,E),i(e,l),i(l,s),c||(a=G(l,"click",r),c=!0)},p(_,E){t=_,E&1&&n!==(n=t[14].name+"")&&ue(s,n)},d(_){_&&v(e),c=!1,a()}}}function gt(o,t){let e,l=t[14].name+"",n,s;return{key:o,first:null,c(){e=h("option"),n=ee(l),this.h()},l(c){e=m(c,"OPTION",{});var a=w(e);n=te(a,l),a.forEach(v),this.h()},h(){e.__value=s=t[14],fe(e,e.__value),this.first=e},m(c,a){oe(c,e,a),i(e,n)},p(c,a){t=c,a&8&&l!==(l=t[14].name+"")&&ue(n,l),a&8&&s!==(s=t[14])&&(e.__value=s,fe(e,e.__value))},d(c){c&&v(e)}}}function Pt(o){let t,e,l,n=[],s=new Map,c,a,r,_,E,p=[],j=new Map,O,y,U="ðŸ ’",C,b,I,R=[],V=new Map,W,K,T,S,D,g=[],H=new Map,d,B,F=$(o[0].inputs);const Y=f=>f[14];for(let f=0;f<F.length;f+=1){let k=mt(o,F,f),A=Y(k);s.set(A,n[f]=dt(A,k))}let Q=$(o[4]);const le=f=>f[14];for(let f=0;f<Q.length;f+=1){let k=ht(o,Q,f),A=le(k);j.set(A,p[f]=vt(A,k))}let me=$(o[0].outputs);const we=f=>f[14];for(let f=0;f<me.length;f+=1){let k=_t(o,me,f),A=we(k);V.set(A,R[f]=pt(A,k))}let re=$(o[3]);const he=f=>f[14];for(let f=0;f<re.length;f+=1){let k=ft(o,re,f),A=he(k);H.set(A,g[f]=gt(A,k))}return{c(){t=h("div"),e=h("div"),l=h("ul");for(let f=0;f<n.length;f+=1)n[f].c();c=M(),a=h("li"),r=h("select"),_=h("option"),E=ee("+");for(let f=0;f<p.length;f+=1)p[f].c();O=M(),y=h("span"),y.textContent=U,C=M(),b=h("div"),I=h("ul");for(let f=0;f<R.length;f+=1)R[f].c();W=M(),K=h("li"),T=h("select"),S=h("option"),D=ee("+");for(let f=0;f<g.length;f+=1)g[f].c();this.h()},l(f){t=m(f,"DIV",{class:!0});var k=w(t);e=m(k,"DIV",{class:!0});var A=w(e);l=m(A,"UL",{class:!0});var ae=w(l);for(let z=0;z<n.length;z+=1)n[z].l(ae);c=P(ae),a=m(ae,"LI",{});var Z=w(a);r=m(Z,"SELECT",{class:!0});var be=w(r);_=m(be,"OPTION",{});var je=w(_);E=te(je,"+"),je.forEach(v);for(let z=0;z<p.length;z+=1)p[z].l(be);be.forEach(v),Z.forEach(v),ae.forEach(v),A.forEach(v),O=P(k),y=m(k,"SPAN",{class:!0,"data-svelte-h":!0}),x(y)!=="svelte-1fysel8"&&(y.textContent=U),C=P(k),b=m(k,"DIV",{class:!0});var ne=w(b);I=m(ne,"UL",{class:!0});var se=w(I);for(let z=0;z<R.length;z+=1)R[z].l(se);W=P(se),K=m(se,"LI",{});var Ce=w(K);T=m(Ce,"SELECT",{class:!0});var de=w(T);S=m(de,"OPTION",{});var ce=w(S);D=te(ce,"+"),ce.forEach(v);for(let z=0;z<g.length;z+=1)g[z].l(de);de.forEach(v),Ce.forEach(v),se.forEach(v),ne.forEach(v),k.forEach(v),this.h()},h(){_.__value=void 0,fe(_,_.__value),u(r,"class","svelte-4ak9ur"),o[1]===void 0&&rt(()=>o[9].call(r)),u(l,"class","svelte-4ak9ur"),u(e,"class","inputs svelte-4ak9ur"),u(y,"class","maps_to svelte-4ak9ur"),S.__value=void 0,fe(S,S.__value),u(T,"class","svelte-4ak9ur"),o[2]===void 0&&rt(()=>o[11].call(T)),u(I,"class","svelte-4ak9ur"),u(b,"class","outputs svelte-4ak9ur"),u(t,"class","conversion-editor svelte-4ak9ur")},m(f,k){oe(f,t,k),i(t,e),i(e,l);for(let A=0;A<n.length;A+=1)n[A]&&n[A].m(l,null);i(l,c),i(l,a),i(a,r),i(r,_),i(_,E);for(let A=0;A<p.length;A+=1)p[A]&&p[A].m(r,null);He(r,o[1],!0),i(t,O),i(t,y),i(t,C),i(t,b),i(b,I);for(let A=0;A<R.length;A+=1)R[A]&&R[A].m(I,null);i(I,W),i(I,K),i(K,T),i(T,S),i(S,D);for(let A=0;A<g.length;A+=1)g[A]&&g[A].m(T,null);He(T,o[2],!0),d||(B=[G(r,"change",o[9]),G(T,"change",o[11])],d=!0)},p(f,[k]){k&33&&(F=$(f[0].inputs),n=ke(n,k,Y,1,f,F,s,l,Oe,dt,c,mt)),k&16&&(Q=$(f[4]),p=ke(p,k,le,1,f,Q,j,r,Oe,vt,null,ht)),k&18&&He(r,f[1]),k&65&&(me=$(f[0].outputs),R=ke(R,k,we,1,f,me,V,I,Oe,pt,W,_t)),k&8&&(re=$(f[3]),g=ke(g,k,he,1,f,re,H,T,Oe,gt,null,ft)),k&12&&He(T,f[2])},i:ct,o:ct,d(f){f&&v(t);for(let k=0;k<n.length;k+=1)n[k].d();for(let k=0;k<p.length;k+=1)p[k].d();for(let k=0;k<R.length;k+=1)R[k].d();for(let k=0;k<g.length;k+=1)g[k].d();d=!1,Le(B)}}}function Vt(o,t,e){let l,n,{conversion:s}=t,{effects:c}=t,a,r;function _(b){s.inputs.push(b),s.inputs.sort((I,R)=>I.name.localeCompare(R.name)),e(0,s)}function E(b){const I=s.inputs.indexOf(b);if(I<0)throw new Error("effect is not an input");s.inputs.splice(I,1),e(0,s)}function p(b){s.outputs.push(b),s.outputs.sort((I,R)=>I.name.localeCompare(R.name)),e(0,s)}function j(b){const I=s.outputs.indexOf(b);if(I<0)throw new Error("effect is not an output");s.outputs.splice(I,1),e(0,s)}const O=b=>E(b);function y(){a=ut(this),e(1,a),e(4,l),e(7,c),e(0,s)}const U=b=>j(b);function C(){r=ut(this),e(2,r),e(3,n),e(7,c),e(0,s)}return o.$$set=b=>{"conversion"in b&&e(0,s=b.conversion),"effects"in b&&e(7,c=b.effects)},o.$$.update=()=>{o.$$.dirty&2&&a&&(_(a),e(1,a=void 0)),o.$$.dirty&4&&r&&(p(r),e(2,r=void 0)),o.$$.dirty&129&&e(4,l=c.filter(b=>!s.inputs.includes(b))),o.$$.dirty&129&&e(3,n=c.filter(b=>!s.outputs.includes(b)))},[s,a,r,n,l,E,j,c,O,y,U,C]}class Ht extends Nt{constructor(t){super(),It(this,t,Vt,Pt,yt,{conversion:0,effects:7})}}function Et(o,t,e){const l=o.slice();l[25]=t[e],l[28]=e;const n=`radio-button-effect-${l[28]}`;return l[26]=n,l}function kt(o,t,e){const l=o.slice();return l[29]=t[e],l}function wt(o,t,e){const l=o.slice();l[32]=t[e],l[28]=e;const n=`radio-button-item-${l[28]}`;return l[26]=n,l}function bt(o,t){let e,l,n,s,c=!1,a,r,_,E=t[32].name+"",p,j,O,y="ðŸ–‰",U,C,b="âŒ",I,R,V,W,K;function T(){return t[18](t[32])}function S(){return t[19](t[32])}return V=Lt(t[17][1]),{key:o,first:null,c(){e=h("li"),l=h("input"),a=M(),r=h("label"),_=h("span"),p=ee(E),j=M(),O=h("button"),O.textContent=y,U=M(),C=h("button"),C.textContent=b,R=M(),this.h()},l(D){e=m(D,"LI",{class:!0});var g=w(e);l=m(g,"INPUT",{type:!0,id:!0,class:!0}),a=P(g),r=m(g,"LABEL",{for:!0,class:!0});var H=w(r);_=m(H,"SPAN",{class:!0});var d=w(_);p=te(d,E),d.forEach(v),j=P(H),O=m(H,"BUTTON",{class:!0,title:!0,style:!0,"data-svelte-h":!0}),x(O)!=="svelte-1mjif60"&&(O.textContent=y),U=P(H),C=m(H,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),x(C)!=="svelte-10y5kq0"&&(C.textContent=b),H.forEach(v),R=P(g),g.forEach(v),this.h()},h(){u(l,"type","radio"),u(l,"id",n=t[26]),l.__value=s=t[32],fe(l,l.__value),u(l,"class","svelte-fmj9wo"),u(_,"class","fill-right svelte-fmj9wo"),u(O,"class","flat on-parent-hover svelte-fmj9wo"),u(O,"title","Rename Item"),ze(O,"line-height","1.25em"),u(C,"class","flat on-parent-hover svelte-fmj9wo"),u(C,"title","Delete Item"),u(r,"for",I=t[26]),u(r,"class","item-row svelte-fmj9wo"),u(e,"class","svelte-fmj9wo"),V.p(l),this.first=e},m(D,g){oe(D,e,g),i(e,l),l.checked=l.__value===t[1],i(e,a),i(e,r),i(r,_),i(_,p),i(r,j),i(r,O),i(r,U),i(r,C),i(e,R),W||(K=[G(l,"change",t[16]),G(O,"click",T),G(C,"click",S)],W=!0)},p(D,g){t=D,g[0]&1&&n!==(n=t[26])&&u(l,"id",n),g[0]&1&&s!==(s=t[32])&&(l.__value=s,fe(l,l.__value),c=!0),(c||g[0]&3)&&(l.checked=l.__value===t[1]),g[0]&1&&E!==(E=t[32].name+"")&&ue(p,E),g[0]&1&&I!==(I=t[26])&&u(r,"for",I)},d(D){D&&v(e),V.r(),W=!1,Le(K)}}}function jt(o){let t,e=(o[1]?.name??"")+"",l,n,s,c,a,r="+",_,E;return{c(){t=h("h2"),l=ee(e),n=M(),s=h("menu"),c=h("li"),a=h("button"),a.textContent=r,this.h()},l(p){t=m(p,"H2",{class:!0});var j=w(t);l=te(j,e),j.forEach(v),n=P(p),s=m(p,"MENU",{class:!0});var O=w(s);c=m(O,"LI",{});var y=w(c);a=m(y,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),x(a)!=="svelte-1w66ewa"&&(a.textContent=r),y.forEach(v),O.forEach(v),this.h()},h(){u(t,"class","centered svelte-fmj9wo"),u(a,"class","flat large svelte-fmj9wo"),u(a,"title","Add Effect Conversion"),u(s,"class","svelte-fmj9wo")},m(p,j){oe(p,t,j),i(t,l),oe(p,n,j),oe(p,s,j),i(s,c),i(c,a),_||(E=G(a,"click",o[20]),_=!0)},p(p,j){j[0]&2&&e!==(e=(p[1]?.name??"")+"")&&ue(l,e)},d(p){p&&(v(t),v(n),v(s)),_=!1,E()}}}function Ct(o){let t,e=[],l=new Map,n,s=$(o[1].conversions);const c=a=>a[29];for(let a=0;a<s.length;a+=1){let r=kt(o,s,a),_=c(r);l.set(_,e[a]=Tt(_,r))}return{c(){t=h("div");for(let a=0;a<e.length;a+=1)e[a].c();this.h()},l(a){t=m(a,"DIV",{class:!0});var r=w(t);for(let _=0;_<e.length;_+=1)e[_].l(r);r.forEach(v),this.h()},h(){u(t,"class","conversion-list scrollable svelte-fmj9wo")},m(a,r){oe(a,t,r);for(let _=0;_<e.length;_+=1)e[_]&&e[_].m(t,null);n=!0},p(a,r){r[0]&32779&&(s=$(a[1].conversions),At(),e=ke(e,r,c,1,a,s,l,t,Mt,Tt,null,kt),Ut())},i(a){if(!n){for(let r=0;r<s.length;r+=1)ye(e[r]);n=!0}},o(a){for(let r=0;r<e.length;r+=1)Ue(e[r]);n=!1},d(a){a&&v(t);for(let r=0;r<e.length;r+=1)e[r].d()}}}function Tt(o,t){let e,l,n,s,c,a,r="âŒ",_,E,p,j;l=new Ht({props:{effects:t[0].effects,conversion:t[29]}});function O(){return t[21](t[29])}return{key:o,first:null,c(){e=h("div"),Dt(l.$$.fragment),n=M(),s=h("menu"),c=h("li"),a=h("button"),a.textContent=r,_=M(),this.h()},l(y){e=m(y,"DIV",{class:!0});var U=w(e);Rt(l.$$.fragment,U),n=P(U),s=m(U,"MENU",{class:!0});var C=w(s);c=m(C,"LI",{});var b=w(c);a=m(b,"BUTTON",{title:!0,"data-svelte-h":!0}),x(a)!=="svelte-lhawgn"&&(a.textContent=r),b.forEach(v),C.forEach(v),_=P(U),U.forEach(v),this.h()},h(){u(a,"title","Delete Effect Conversion"),u(s,"class","svelte-fmj9wo"),u(e,"class","conversion svelte-fmj9wo"),this.first=e},m(y,U){oe(y,e,U),St(l,e,null),i(e,n),i(e,s),i(s,c),i(c,a),i(e,_),E=!0,p||(j=G(a,"click",O),p=!0)},p(y,U){t=y;const C={};U[0]&1&&(C.effects=t[0].effects),U[0]&2&&(C.conversion=t[29]),l.$set(C)},i(y){E||(ye(l.$$.fragment,y),E=!0)},o(y){Ue(l.$$.fragment,y),E=!1},d(y){y&&v(e),Bt(l),p=!1,j()}}}function Ot(o,t){let e,l,n,s,c=!1,a,r,_,E=t[25].name+"",p,j,O,y="ðŸ–‰",U,C,b="âŒ",I,R,V,W,K;function T(){return t[23](t[25])}function S(){return t[24](t[25])}return V=Lt(t[17][0]),{key:o,first:null,c(){e=h("li"),l=h("input"),a=M(),r=h("label"),_=h("span"),p=ee(E),j=M(),O=h("button"),O.textContent=y,U=M(),C=h("button"),C.textContent=b,R=M(),this.h()},l(D){e=m(D,"LI",{class:!0});var g=w(e);l=m(g,"INPUT",{type:!0,id:!0,class:!0}),a=P(g),r=m(g,"LABEL",{for:!0,class:!0});var H=w(r);_=m(H,"SPAN",{class:!0});var d=w(_);p=te(d,E),d.forEach(v),j=P(H),O=m(H,"BUTTON",{class:!0,title:!0,style:!0,"data-svelte-h":!0}),x(O)!=="svelte-ij4fh6"&&(O.textContent=y),U=P(H),C=m(H,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),x(C)!=="svelte-1ppeovu"&&(C.textContent=b),H.forEach(v),R=P(g),g.forEach(v),this.h()},h(){u(l,"type","radio"),u(l,"id",n=t[26]),l.__value=s=t[25],fe(l,l.__value),u(l,"class","svelte-fmj9wo"),u(_,"class","fill-right svelte-fmj9wo"),u(O,"class","flat on-parent-hover svelte-fmj9wo"),u(O,"title","Rename Effect"),ze(O,"line-height","1.25em"),u(C,"class","flat on-parent-hover svelte-fmj9wo"),u(C,"title","Delete Effect"),u(r,"for",I=t[26]),u(r,"class","item-row svelte-fmj9wo"),u(e,"class","svelte-fmj9wo"),V.p(l),this.first=e},m(D,g){oe(D,e,g),i(e,l),l.checked=l.__value===t[2],i(e,a),i(e,r),i(r,_),i(_,p),i(r,j),i(r,O),i(r,U),i(r,C),i(e,R),W||(K=[G(l,"change",t[22]),G(O,"click",T),G(C,"click",S)],W=!0)},p(D,g){t=D,g[0]&1&&n!==(n=t[26])&&u(l,"id",n),g[0]&1&&s!==(s=t[25])&&(l.__value=s,fe(l,l.__value),c=!0),(c||g[0]&5)&&(l.checked=l.__value===t[2]),g[0]&1&&E!==(E=t[25].name+"")&&ue(p,E),g[0]&1&&I!==(I=t[26])&&u(r,"for",I)},d(D){D&&v(e),V.r(),W=!1,Le(K)}}}function zt(o){let t,e,l,n,s="New",c,a,r,_="Load",E,p,j,O="Save",y,U,C,b=o[0].name+"",I,R,V,W="ðŸ–‰",K,T,S=o[0].effects.length+"",D,g,H=o[0].items.length+"",d,B,F,Y,Q,le,me="Items",we,re,he,f,k="+",A,ae,Z=[],be=new Map,je,ne,se,Ce,de,ce,z,ve,Ye="Effects",qe,Te,Ne,_e,Je="+",Ke,pe,ie=[],Fe=new Map,ge,We,Ge,Ae=$(o[0].items);const Qe=N=>N[32];for(let N=0;N<Ae.length;N+=1){let L=wt(o,Ae,N),q=Qe(L);be.set(q,Z[N]=bt(q,L))}let X=o[1]&&jt(o),J=o[1]&&Ct(o),De=$(o[0].effects);const Xe=N=>N[25];for(let N=0;N<De.length;N+=1){let L=Et(o,De,N),q=Xe(L);Fe.set(q,ie[N]=Ot(q,L))}return{c(){t=h("div"),e=h("menu"),l=h("li"),n=h("button"),n.textContent=s,c=M(),a=h("li"),r=h("button"),r.textContent=_,E=M(),p=h("li"),j=h("button"),j.textContent=O,y=M(),U=h("header"),C=h("h1"),I=ee(b),R=M(),V=h("button"),V.textContent=W,K=M(),T=h("header"),D=ee(S),g=ee(" effects, "),d=ee(H),B=ee(" items"),F=M(),Y=h("aside"),Q=h("header"),le=h("h2"),le.textContent=me,we=M(),re=h("menu"),he=h("li"),f=h("button"),f.textContent=k,A=M(),ae=h("ul");for(let N=0;N<Z.length;N+=1)Z[N].c();je=M(),ne=h("main"),se=h("header"),X&&X.c(),Ce=M(),J&&J.c(),de=M(),ce=h("aside"),z=h("header"),ve=h("h2"),ve.textContent=Ye,qe=M(),Te=h("menu"),Ne=h("li"),_e=h("button"),_e.textContent=Je,Ke=M(),pe=h("ul");for(let N=0;N<ie.length;N+=1)ie[N].c();this.h()},l(N){t=m(N,"DIV",{class:!0});var L=w(t);e=m(L,"MENU",{class:!0});var q=w(e);l=m(q,"LI",{class:!0});var Ze=w(l);n=m(Ze,"BUTTON",{class:!0,"data-svelte-h":!0}),x(n)!=="svelte-1k02kzi"&&(n.textContent=s),Ze.forEach(v),c=P(q),a=m(q,"LI",{class:!0});var xe=w(a);r=m(xe,"BUTTON",{class:!0,"data-svelte-h":!0}),x(r)!=="svelte-qw05j0"&&(r.textContent=_),xe.forEach(v),E=P(q),p=m(q,"LI",{class:!0});var $e=w(p);j=m($e,"BUTTON",{class:!0,"data-svelte-h":!0}),x(j)!=="svelte-rapr1q"&&(j.textContent=O),$e.forEach(v),q.forEach(v),y=P(L),U=m(L,"HEADER",{class:!0});var Re=w(U);C=m(Re,"H1",{class:!0});var et=w(C);I=te(et,b),et.forEach(v),R=P(Re),V=m(Re,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),x(V)!=="svelte-18krhi0"&&(V.textContent=W),Re.forEach(v),K=P(L),T=m(L,"HEADER",{class:!0});var Ie=w(T);D=te(Ie,S),g=te(Ie," effects, "),d=te(Ie,H),B=te(Ie," items"),Ie.forEach(v),F=P(L),Y=m(L,"ASIDE",{class:!0});var Se=w(Y);Q=m(Se,"HEADER",{class:!0});var Be=w(Q);le=m(Be,"H2",{class:!0,"data-svelte-h":!0}),x(le)!=="svelte-1hc3rnu"&&(le.textContent=me),we=P(Be),re=m(Be,"MENU",{class:!0});var tt=w(re);he=m(tt,"LI",{});var lt=w(he);f=m(lt,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),x(f)!=="svelte-m9kak"&&(f.textContent=k),lt.forEach(v),tt.forEach(v),Be.forEach(v),A=P(Se),ae=m(Se,"UL",{class:!0});var nt=w(ae);for(let Ee=0;Ee<Z.length;Ee+=1)Z[Ee].l(nt);nt.forEach(v),Se.forEach(v),je=P(L),ne=m(L,"MAIN",{style:!0,class:!0});var Me=w(ne);se=m(Me,"HEADER",{style:!0,class:!0});var st=w(se);X&&X.l(st),st.forEach(v),Ce=P(Me),J&&J.l(Me),Me.forEach(v),de=P(L),ce=m(L,"ASIDE",{class:!0});var Pe=w(ce);z=m(Pe,"HEADER",{class:!0});var Ve=w(z);ve=m(Ve,"H2",{class:!0,"data-svelte-h":!0}),x(ve)!=="svelte-1ythqko"&&(ve.textContent=Ye),qe=P(Ve),Te=m(Ve,"MENU",{class:!0});var ot=w(Te);Ne=m(ot,"LI",{});var at=w(Ne);_e=m(at,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),x(_e)!=="svelte-1hf2s1c"&&(_e.textContent=Je),at.forEach(v),ot.forEach(v),Ve.forEach(v),Ke=P(Pe),pe=m(Pe,"UL",{class:!0});var it=w(pe);for(let Ee=0;Ee<ie.length;Ee+=1)ie[Ee].l(it);it.forEach(v),Pe.forEach(v),L.forEach(v),this.h()},h(){u(n,"class","svelte-fmj9wo"),u(l,"class","svelte-fmj9wo"),u(r,"class","svelte-fmj9wo"),u(a,"class","svelte-fmj9wo"),u(j,"class","svelte-fmj9wo"),u(p,"class","svelte-fmj9wo"),u(e,"class","stretch svelte-fmj9wo"),u(C,"class","svelte-fmj9wo"),u(V,"class","flat svelte-fmj9wo"),u(V,"title","Rename Item Database"),u(U,"class","svelte-fmj9wo"),u(T,"class","centered svelte-fmj9wo"),u(le,"class","svelte-fmj9wo"),u(f,"class","flat large svelte-fmj9wo"),u(f,"title","Add Item"),u(re,"class","svelte-fmj9wo"),u(Q,"class","svelte-fmj9wo"),u(ae,"class","scrollable svelte-fmj9wo"),u(Y,"class","svelte-fmj9wo"),ze(se,"z-index","1"),u(se,"class","svelte-fmj9wo"),ze(ne,"row-gap","0"),u(ne,"class","svelte-fmj9wo"),u(ve,"class","svelte-fmj9wo"),u(_e,"class","flat large svelte-fmj9wo"),u(_e,"title","Add Effect"),u(Te,"class","svelte-fmj9wo"),u(z,"class","svelte-fmj9wo"),u(pe,"class","scrollable svelte-fmj9wo"),u(ce,"class","svelte-fmj9wo"),u(t,"class","main-layout svelte-fmj9wo")},m(N,L){oe(N,t,L),i(t,e),i(e,l),i(l,n),i(e,c),i(e,a),i(a,r),i(e,E),i(e,p),i(p,j),i(t,y),i(t,U),i(U,C),i(C,I),i(U,R),i(U,V),i(t,K),i(t,T),i(T,D),i(T,g),i(T,d),i(T,B),i(t,F),i(t,Y),i(Y,Q),i(Q,le),i(Q,we),i(Q,re),i(re,he),i(he,f),i(Y,A),i(Y,ae);for(let q=0;q<Z.length;q+=1)Z[q]&&Z[q].m(ae,null);i(t,je),i(t,ne),i(ne,se),X&&X.m(se,null),i(ne,Ce),J&&J.m(ne,null),i(t,de),i(t,ce),i(ce,z),i(z,ve),i(z,qe),i(z,Te),i(Te,Ne),i(Ne,_e),i(ce,Ke),i(ce,pe);for(let q=0;q<ie.length;q+=1)ie[q]&&ie[q].m(pe,null);ge=!0,We||(Ge=[G(n,"click",o[4]),G(r,"click",o[5]),G(j,"click",o[6]),G(V,"click",o[7]),G(f,"click",o[8]),G(_e,"click",o[11])],We=!0)},p(N,L){(!ge||L[0]&1)&&b!==(b=N[0].name+"")&&ue(I,b),(!ge||L[0]&1)&&S!==(S=N[0].effects.length+"")&&ue(D,S),(!ge||L[0]&1)&&H!==(H=N[0].items.length+"")&&ue(d,H),L[0]&1539&&(Ae=$(N[0].items),Z=ke(Z,L,Qe,1,N,Ae,be,ae,Oe,bt,null,wt)),N[1]?X?X.p(N,L):(X=jt(N),X.c(),X.m(se,null)):X&&(X.d(1),X=null),N[1]?J?(J.p(N,L),L[0]&2&&ye(J,1)):(J=Ct(N),J.c(),ye(J,1),J.m(ne,null)):J&&(At(),Ue(J,1,1,()=>{J=null}),Ut()),L[0]&12293&&(De=$(N[0].effects),ie=ke(ie,L,Xe,1,N,De,Fe,pe,Oe,Ot,null,Et))},i(N){ge||(ye(J),ge=!0)},o(N){Ue(J),ge=!1},d(N){N&&v(t);for(let L=0;L<Z.length;L+=1)Z[L].d();X&&X.d(),J&&J.d();for(let L=0;L<ie.length;L+=1)ie[L].d();We=!1,Le(Ge)}}}function qt(o){const t=o.effects.map(n=>n.name).sort(),e=o.items.map(n=>({name:n.name,conversions:n.conversions.map(s=>({inputs:s.inputs.map(c=>c.name),outputs:s.outputs.map(c=>c.name)}))})),l={name:o.name,effects:t,items:e};return JSON.stringify(l)}function Kt(o){const t=JSON.parse(o),e=t.effects.map(s=>({name:s})),l=Object.fromEntries(e.map(s=>[s.name,s])),n=t.items.map(s=>({name:s.name,conversions:s.conversions.map(c=>({inputs:c.inputs.map(a=>l[a]),outputs:c.outputs.map(a=>l[a])}))}));return{name:t.name,effects:e,items:n}}function Wt(o){const t=URL.createObjectURL(o),e=document.createElement("a");e.href=t,e.download=o.name,e.hidden=!0,e.click(),URL.revokeObjectURL(t)}function Yt(){const o=["electricity","heat","light"].sort().map(s=>({name:s})),t=["electricity"],e=["heat","light"];return{name:"Example Item Database",items:[{name:"light bulb",conversions:[{inputs:o.filter(s=>t.includes(s.name)),outputs:o.filter(s=>e.includes(s.name))}]}],effects:o}}function Jt(o,t,e){let n=Yt(),s=n.items?.[0],c;function a(){confirm(`Are you sure you want to create a new item database?
Unsaved changes will be discarded.`)&&(e(0,n={name:"Unnamed Item Database",items:[],effects:[]}),e(1,s=void 0))}function r(){const d=document.createElement("input");d.type="file",d.accept="application/json",d.addEventListener("change",async()=>{if(d.files?.length){const F=await d.files[0].text();e(0,n=Kt(F)),e(1,s=void 0)}}),d.click()}function _(){const d=qt(n),B=new File([d],n.name+".json",{type:"application/json"});Wt(B)}function E(){const d=prompt("Enter item database name:",n.name);d&&e(0,n.name=d,n)}function p(){const d=prompt("Enter item name:");if(!d)return;const B={name:d,conversions:[]};n.items.push(B),n.items.sort((F,Y)=>F.name.localeCompare(Y.name)),e(1,s=B),e(0,n)}function j(d){if(!confirm(`Are you sure you want to delete "${d.name}"?`))return;const B=n.items.indexOf(d);if(B<0)throw new Error("invalid item");n.items.splice(B,1),e(0,n)}function O(d){const B=prompt("Enter item name:",d.name);B&&(d.name=B,e(0,n),s===d&&e(1,s=d))}function y(){const d=prompt("Enter effect name:");if(!d)return;const B={name:d};n.effects.push(B),n.effects.sort((F,Y)=>F.name.localeCompare(Y.name)),e(0,n)}function U(d){if(!confirm(`Are you sure you want to delete "${d.name}"?
All references to the effect will be removed from the item database.`))return;const B=n.effects.indexOf(d);if(B<0)throw new Error("invalid effect");n.effects.splice(B,1);for(const F of n.items)for(const Y of F.conversions){const Q=Y.inputs.indexOf(d);Q>=0&&Y.inputs.splice(Q,1);const le=Y.outputs.indexOf(d);le>=0&&Y.outputs.splice(le,1)}e(0,n),e(1,s),e(0,n)}function C(d){const B=prompt("Enter effect name:",d.name);B&&(d.name=B,e(0,n),e(1,s),e(0,n))}function b(d){const B={inputs:[],outputs:[]};d.conversions.push(B),e(0,n)}function I(d,B){if(!confirm("Are you sure you want to delete the effect conversion?"))return;const F=d.conversions.indexOf(B);if(F<0)throw new Error("item does not contain conversion");d.conversions.splice(F,1),e(0,n)}const R=[[],[]];function V(){s=this.__value,e(1,s),e(0,n)}const W=d=>O(d),K=d=>j(d),T=()=>b(s??void 0),S=d=>I(s??void 0,d);function D(){c=this.__value,e(2,c)}const g=d=>C(d),H=d=>U(d);return o.$$.update=()=>{o.$$.dirty[0]&3&&(s&&!n.items.includes(s)?e(1,s=void 0):!s&&n.items.length>0&&e(1,s=n.items[0]))},[n,s,c,void 0,a,r,_,E,p,j,O,y,U,C,b,I,V,R,W,K,T,S,D,g,H]}class Qt extends Nt{constructor(t){super(),It(this,t,Jt,zt,yt,{},null,[-1,-1])}}export{Qt as component};
