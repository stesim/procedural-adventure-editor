import{A as Kt,s as be,f as F,a as at,l as pt,g as j,h as tt,c as ot,m as mt,d as G,B as wt,C as Bt,j as Z,D as ge,i as Tt,x as I,E as Gt,F as bt,y as oe,n as xt,G as ve,H as ur,p as hr,e as kn,k as Qt,I as fr,J as ar}from"../chunks/scheduler.kyyrafxV.js";import{a as qt,t as Vt,S as ye,i as we,g as Xe,c as Je,b as Le,d as Pe,m as Fe,e as je}from"../chunks/index.buKi1GJv.js";function Et(C){return C?.length!==void 0?C:Array.from(C)}function Dt(C,h){C.d(1),h.delete(C.key)}function dr(C,h){Vt(C,1,1,()=>{h.delete(C.key)})}function Rt(C,h,t,n,c,i,a,e,d,v,b,y){let w=C.length,u=i.length,p=w;const o={};for(;p--;)o[C[p].key]=p;const l=[],f=new Map,g=new Map,k=[];for(p=u;p--;){const x=y(c,i,p),M=t(x);let B=a.get(M);B?n&&k.push(()=>B.p(x,h)):(B=v(M,x),B.c()),f.set(M,l[p]=B),M in o&&g.set(M,Math.abs(p-o[M]))}const z=new Set,T=new Set;function U(x){qt(x,1),x.m(e,b),a.set(x.key,x),b=x.first,u--}for(;w&&u;){const x=l[u-1],M=C[w-1],B=x.key,L=M.key;x===M?(b=x.first,w--,u--):f.has(L)?!a.has(B)||z.has(B)?U(x):T.has(L)?w--:g.get(B)>g.get(L)?(T.add(B),U(x)):(z.add(L),w--):(d(M,a),w--)}for(;w--;){const x=C[w];f.has(x.key)||d(x,a)}for(;u;)U(l[u-1]);return Kt(k),l}class Me{_references=new Map;references(h){return this._references.get(h)??[]}_add_reference(h,t){let n=this._references.get(h);n===void 0&&(n=[],this._references.set(h,n)),n.push(t)}_remove_reference(h,t){let n=this._references.get(h);if(n!==void 0){const c=n.indexOf(t);c>=0&&n.splice(c,1)}}_clear_references(){for(const[h,t]of this._references.entries())for(const n of t)n._detach_reference(h,this)}_detach_reference(h,t){}}class En extends Me{constructor(h=""){super(),this.name=h}}class _r extends Me{constructor(h=""){super(),this.name=h}}class jt extends Me{static TAGS=Symbol("tags");_tags=new Set;get tags(){return this._tags}tags_add(h){this._tags.add(h),h._add_reference(jt.TAGS,this)}tags_remove(h){this._tags.delete(h)&&h._remove_reference(jt.TAGS,this)}static INPUTS=Symbol("inputs");_inputs=new Set;get inputs(){return this._inputs}inputs_add(h){this._inputs.add(h),h._add_reference(jt.INPUTS,this)}inputs_remove(h){this._inputs.delete(h)&&h._remove_reference(jt.INPUTS,this)}static OUTPUTS=Symbol("outputs");_outputs=new Set;get outputs(){return this._outputs}outputs_add(h){this._outputs.add(h),h._add_reference(jt.OUTPUTS,this)}outputs_remove(h){this._outputs.delete(h)&&h._remove_reference(jt.OUTPUTS,this)}_detach_reference(h,t){switch(h){case jt.TAGS:this._tags.delete(t);break;case jt.INPUTS:this._inputs.delete(t);break;case jt.OUTPUTS:this._outputs.delete(t);break}}}class Jt extends Me{constructor(h="",t=void 0){super(),this.name=h,this.image=t}static TAGS=Symbol("tags");_tags=new Set;get tags(){return this._tags}tags_add(h){this._tags.add(h),h._add_reference(Jt.TAGS,this)}tags_remove(h){this._tags.delete(h)&&h._remove_reference(Jt.TAGS,this)}static CONVERSIONS=Symbol("conversions");_conversions=new Set;get conversions(){return this._conversions}conversions_add(h){this._conversions.add(h),h._add_reference(Jt.CONVERSIONS,this)}conversions_remove(h){this._conversions.delete(h)&&h._remove_reference(Jt.CONVERSIONS,this)}_detach_reference(h,t){switch(h){case Jt.TAGS:this._tags.delete(t);break;case Jt.CONVERSIONS:this._conversions.delete(t);break}}}class Ye{constructor(h=""){this.name=h}_effects=new Set;get effects(){return this._effects}effects_create(h){const t=new _r(h);return this._effects.add(t),t}effects_delete(h){this._effects.delete(h)&&h._clear_references()}_conversions=new Set;get conversions(){return this._conversions}conversions_create(){const h=new jt;return this._conversions.add(h),h}conversions_delete(h){this._conversions.delete(h)&&h._clear_references()}_items=new Set;get items(){return this._items}items_create(h,t){const n=new Jt(h,t);return this._items.add(n),n}items_delete(h){this._items.delete(h)&&h._clear_references()}_item_tags=new Set;get item_tags(){return this._item_tags}item_tags_create(h){const t=new En(h);return this._item_tags.add(t),t}item_tags_delete(h){this._item_tags.delete(h)&&h._clear_references()}_conversion_tags=new Set;get conversion_tags(){return this._conversion_tags}conversion_tags_create(h){const t=new En(h);return this._conversion_tags.add(t),t}conversion_tags_delete(h){this._conversion_tags.delete(h)&&h._clear_references()}}var Re=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pr(C){return C&&C.__esModule&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C}function Ue(C){throw new Error('Could not dynamically require "'+C+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var or={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(C,h){(function(t){C.exports=t()})(function(){return function t(n,c,i){function a(v,b){if(!c[v]){if(!n[v]){var y=typeof Ue=="function"&&Ue;if(!b&&y)return y(v,!0);if(e)return e(v,!0);var w=new Error("Cannot find module '"+v+"'");throw w.code="MODULE_NOT_FOUND",w}var u=c[v]={exports:{}};n[v][0].call(u.exports,function(p){var o=n[v][1][p];return a(o||p)},u,u.exports,t,n,c,i)}return c[v].exports}for(var e=typeof Ue=="function"&&Ue,d=0;d<i.length;d++)a(i[d]);return a}({1:[function(t,n,c){var i=t("./utils"),a=t("./support"),e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";c.encode=function(d){for(var v,b,y,w,u,p,o,l=[],f=0,g=d.length,k=g,z=i.getTypeOf(d)!=="string";f<d.length;)k=g-f,y=z?(v=d[f++],b=f<g?d[f++]:0,f<g?d[f++]:0):(v=d.charCodeAt(f++),b=f<g?d.charCodeAt(f++):0,f<g?d.charCodeAt(f++):0),w=v>>2,u=(3&v)<<4|b>>4,p=1<k?(15&b)<<2|y>>6:64,o=2<k?63&y:64,l.push(e.charAt(w)+e.charAt(u)+e.charAt(p)+e.charAt(o));return l.join("")},c.decode=function(d){var v,b,y,w,u,p,o=0,l=0,f="data:";if(d.substr(0,f.length)===f)throw new Error("Invalid base64 input, it looks like a data url.");var g,k=3*(d=d.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(d.charAt(d.length-1)===e.charAt(64)&&k--,d.charAt(d.length-2)===e.charAt(64)&&k--,k%1!=0)throw new Error("Invalid base64 input, bad content length.");for(g=a.uint8array?new Uint8Array(0|k):new Array(0|k);o<d.length;)v=e.indexOf(d.charAt(o++))<<2|(w=e.indexOf(d.charAt(o++)))>>4,b=(15&w)<<4|(u=e.indexOf(d.charAt(o++)))>>2,y=(3&u)<<6|(p=e.indexOf(d.charAt(o++))),g[l++]=v,u!==64&&(g[l++]=b),p!==64&&(g[l++]=y);return g}},{"./support":30,"./utils":32}],2:[function(t,n,c){var i=t("./external"),a=t("./stream/DataWorker"),e=t("./stream/Crc32Probe"),d=t("./stream/DataLengthProbe");function v(b,y,w,u,p){this.compressedSize=b,this.uncompressedSize=y,this.crc32=w,this.compression=u,this.compressedContent=p}v.prototype={getContentWorker:function(){var b=new a(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new d("data_length")),y=this;return b.on("end",function(){if(this.streamInfo.data_length!==y.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),b},getCompressedWorker:function(){return new a(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},v.createWorkerFrom=function(b,y,w){return b.pipe(new e).pipe(new d("uncompressedSize")).pipe(y.compressWorker(w)).pipe(new d("compressedSize")).withStreamInfo("compression",y)},n.exports=v},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,n,c){var i=t("./stream/GenericWorker");c.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},c.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,n,c){var i=t("./utils"),a=function(){for(var e,d=[],v=0;v<256;v++){e=v;for(var b=0;b<8;b++)e=1&e?3988292384^e>>>1:e>>>1;d[v]=e}return d}();n.exports=function(e,d){return e!==void 0&&e.length?i.getTypeOf(e)!=="string"?function(v,b,y,w){var u=a,p=w+y;v^=-1;for(var o=w;o<p;o++)v=v>>>8^u[255&(v^b[o])];return-1^v}(0|d,e,e.length,0):function(v,b,y,w){var u=a,p=w+y;v^=-1;for(var o=w;o<p;o++)v=v>>>8^u[255&(v^b.charCodeAt(o))];return-1^v}(0|d,e,e.length,0):0}},{"./utils":32}],5:[function(t,n,c){c.base64=!1,c.binary=!1,c.dir=!1,c.createFolders=!0,c.date=null,c.compression=null,c.compressionOptions=null,c.comment=null,c.unixPermissions=null,c.dosPermissions=null},{}],6:[function(t,n,c){var i=null;i=typeof Promise<"u"?Promise:t("lie"),n.exports={Promise:i}},{lie:37}],7:[function(t,n,c){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=t("pako"),e=t("./utils"),d=t("./stream/GenericWorker"),v=i?"uint8array":"array";function b(y,w){d.call(this,"FlateWorker/"+y),this._pako=null,this._pakoAction=y,this._pakoOptions=w,this.meta={}}c.magic="\b\0",e.inherits(b,d),b.prototype.processChunk=function(y){this.meta=y.meta,this._pako===null&&this._createPako(),this._pako.push(e.transformTo(v,y.data),!1)},b.prototype.flush=function(){d.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},b.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this._pako=null},b.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var y=this;this._pako.onData=function(w){y.push({data:w,meta:y.meta})}},c.compressWorker=function(y){return new b("Deflate",y)},c.uncompressWorker=function(){return new b("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,n,c){function i(u,p){var o,l="";for(o=0;o<p;o++)l+=String.fromCharCode(255&u),u>>>=8;return l}function a(u,p,o,l,f,g){var k,z,T=u.file,U=u.compression,x=g!==v.utf8encode,M=e.transformTo("string",g(T.name)),B=e.transformTo("string",v.utf8encode(T.name)),L=T.comment,et=e.transformTo("string",g(L)),E=e.transformTo("string",v.utf8encode(L)),P=B.length!==T.name.length,s=E.length!==L.length,O="",J="",R="",st=T.dir,V=T.date,q={crc32:0,compressedSize:0,uncompressedSize:0};p&&!o||(q.crc32=u.crc32,q.compressedSize=u.compressedSize,q.uncompressedSize=u.uncompressedSize);var A=0;p&&(A|=8),x||!P&&!s||(A|=2048);var N=0,X=0;st&&(N|=16),f==="UNIX"?(X=798,N|=function(K,ht){var St=K;return K||(St=ht?16893:33204),(65535&St)<<16}(T.unixPermissions,st)):(X=20,N|=function(K){return 63&(K||0)}(T.dosPermissions)),k=V.getUTCHours(),k<<=6,k|=V.getUTCMinutes(),k<<=5,k|=V.getUTCSeconds()/2,z=V.getUTCFullYear()-1980,z<<=4,z|=V.getUTCMonth()+1,z<<=5,z|=V.getUTCDate(),P&&(J=i(1,1)+i(b(M),4)+B,O+="up"+i(J.length,2)+J),s&&(R=i(1,1)+i(b(et),4)+E,O+="uc"+i(R.length,2)+R);var H="";return H+=`
\0`,H+=i(A,2),H+=U.magic,H+=i(k,2),H+=i(z,2),H+=i(q.crc32,4),H+=i(q.compressedSize,4),H+=i(q.uncompressedSize,4),H+=i(M.length,2),H+=i(O.length,2),{fileRecord:y.LOCAL_FILE_HEADER+H+M+O,dirRecord:y.CENTRAL_FILE_HEADER+i(X,2)+H+i(et.length,2)+"\0\0\0\0"+i(N,4)+i(l,4)+M+O+et}}var e=t("../utils"),d=t("../stream/GenericWorker"),v=t("../utf8"),b=t("../crc32"),y=t("../signature");function w(u,p,o,l){d.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=o,this.encodeFileName=l,this.streamFiles=u,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}e.inherits(w,d),w.prototype.push=function(u){var p=u.meta.percent||0,o=this.entriesCount,l=this._sources.length;this.accumulate?this.contentBuffer.push(u):(this.bytesWritten+=u.data.length,d.prototype.push.call(this,{data:u.data,meta:{currentFile:this.currentFile,percent:o?(p+100*(o-l-1))/o:100}}))},w.prototype.openedSource=function(u){this.currentSourceOffset=this.bytesWritten,this.currentFile=u.file.name;var p=this.streamFiles&&!u.file.dir;if(p){var o=a(u,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:o.fileRecord,meta:{percent:0}})}else this.accumulate=!0},w.prototype.closedSource=function(u){this.accumulate=!1;var p=this.streamFiles&&!u.file.dir,o=a(u,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(o.dirRecord),p)this.push({data:function(l){return y.DATA_DESCRIPTOR+i(l.crc32,4)+i(l.compressedSize,4)+i(l.uncompressedSize,4)}(u),meta:{percent:100}});else for(this.push({data:o.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},w.prototype.flush=function(){for(var u=this.bytesWritten,p=0;p<this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var o=this.bytesWritten-u,l=function(f,g,k,z,T){var U=e.transformTo("string",T(z));return y.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(f,2)+i(f,2)+i(g,4)+i(k,4)+i(U.length,2)+U}(this.dirRecords.length,o,u,this.zipComment,this.encodeFileName);this.push({data:l,meta:{percent:100}})},w.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},w.prototype.registerPrevious=function(u){this._sources.push(u);var p=this;return u.on("data",function(o){p.processChunk(o)}),u.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),u.on("error",function(o){p.error(o)}),this},w.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},w.prototype.error=function(u){var p=this._sources;if(!d.prototype.error.call(this,u))return!1;for(var o=0;o<p.length;o++)try{p[o].error(u)}catch{}return!0},w.prototype.lock=function(){d.prototype.lock.call(this);for(var u=this._sources,p=0;p<u.length;p++)u[p].lock()},n.exports=w},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,n,c){var i=t("../compressions"),a=t("./ZipFileWorker");c.generateWorker=function(e,d,v){var b=new a(d.streamFiles,v,d.platform,d.encodeFileName),y=0;try{e.forEach(function(w,u){y++;var p=function(g,k){var z=g||k,T=i[z];if(!T)throw new Error(z+" is not a valid compression method !");return T}(u.options.compression,d.compression),o=u.options.compressionOptions||d.compressionOptions||{},l=u.dir,f=u.date;u._compressWorker(p,o).withStreamInfo("file",{name:w,dir:l,date:f,comment:u.comment||"",unixPermissions:u.unixPermissions,dosPermissions:u.dosPermissions}).pipe(b)}),b.entriesCount=y}catch(w){b.error(w)}return b}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,n,c){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new i;for(var e in this)typeof this[e]!="function"&&(a[e]=this[e]);return a}}(i.prototype=t("./object")).loadAsync=t("./load"),i.support=t("./support"),i.defaults=t("./defaults"),i.version="3.10.1",i.loadAsync=function(a,e){return new i().loadAsync(a,e)},i.external=t("./external"),n.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,n,c){var i=t("./utils"),a=t("./external"),e=t("./utf8"),d=t("./zipEntries"),v=t("./stream/Crc32Probe"),b=t("./nodejsUtils");function y(w){return new a.Promise(function(u,p){var o=w.decompressed.getContentWorker().pipe(new v);o.on("error",function(l){p(l)}).on("end",function(){o.streamInfo.crc32!==w.decompressed.crc32?p(new Error("Corrupted zip : CRC32 mismatch")):u()}).resume()})}n.exports=function(w,u){var p=this;return u=i.extend(u||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:e.utf8decode}),b.isNode&&b.isStream(w)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",w,!0,u.optimizedBinaryString,u.base64).then(function(o){var l=new d(u);return l.load(o),l}).then(function(o){var l=[a.Promise.resolve(o)],f=o.files;if(u.checkCRC32)for(var g=0;g<f.length;g++)l.push(y(f[g]));return a.Promise.all(l)}).then(function(o){for(var l=o.shift(),f=l.files,g=0;g<f.length;g++){var k=f[g],z=k.fileNameStr,T=i.resolve(k.fileNameStr);p.file(T,k.decompressed,{binary:!0,optimizedBinaryString:!0,date:k.date,dir:k.dir,comment:k.fileCommentStr.length?k.fileCommentStr:null,unixPermissions:k.unixPermissions,dosPermissions:k.dosPermissions,createFolders:u.createFolders}),k.dir||(p.file(T).unsafeOriginalName=z)}return l.zipComment.length&&(p.comment=l.zipComment),p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,n,c){var i=t("../utils"),a=t("../stream/GenericWorker");function e(d,v){a.call(this,"Nodejs stream input adapter for "+d),this._upstreamEnded=!1,this._bindStream(v)}i.inherits(e,a),e.prototype._bindStream=function(d){var v=this;(this._stream=d).pause(),d.on("data",function(b){v.push({data:b,meta:{percent:0}})}).on("error",function(b){v.isPaused?this.generatedError=b:v.error(b)}).on("end",function(){v.isPaused?v._upstreamEnded=!0:v.end()})},e.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},e.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=e},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,n,c){var i=t("readable-stream").Readable;function a(e,d,v){i.call(this,d),this._helper=e;var b=this;e.on("data",function(y,w){b.push(y)||b._helper.pause(),v&&v(w)}).on("error",function(y){b.emit("error",y)}).on("end",function(){b.push(null)})}t("../utils").inherits(a,i),a.prototype._read=function(){this._helper.resume()},n.exports=a},{"../utils":32,"readable-stream":16}],14:[function(t,n,c){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,a);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,a)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var a=new Buffer(i);return a.fill(0),a},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(t,n,c){function i(T,U,x){var M,B=e.getTypeOf(U),L=e.extend(x||{},b);L.date=L.date||new Date,L.compression!==null&&(L.compression=L.compression.toUpperCase()),typeof L.unixPermissions=="string"&&(L.unixPermissions=parseInt(L.unixPermissions,8)),L.unixPermissions&&16384&L.unixPermissions&&(L.dir=!0),L.dosPermissions&&16&L.dosPermissions&&(L.dir=!0),L.dir&&(T=f(T)),L.createFolders&&(M=l(T))&&g.call(this,M,!0);var et=B==="string"&&L.binary===!1&&L.base64===!1;x&&x.binary!==void 0||(L.binary=!et),(U instanceof y&&U.uncompressedSize===0||L.dir||!U||U.length===0)&&(L.base64=!1,L.binary=!0,U="",L.compression="STORE",B="string");var E=null;E=U instanceof y||U instanceof d?U:p.isNode&&p.isStream(U)?new o(T,U):e.prepareContent(T,U,L.binary,L.optimizedBinaryString,L.base64);var P=new w(T,E,L);this.files[T]=P}var a=t("./utf8"),e=t("./utils"),d=t("./stream/GenericWorker"),v=t("./stream/StreamHelper"),b=t("./defaults"),y=t("./compressedObject"),w=t("./zipObject"),u=t("./generate"),p=t("./nodejsUtils"),o=t("./nodejs/NodejsStreamInputAdapter"),l=function(T){T.slice(-1)==="/"&&(T=T.substring(0,T.length-1));var U=T.lastIndexOf("/");return 0<U?T.substring(0,U):""},f=function(T){return T.slice(-1)!=="/"&&(T+="/"),T},g=function(T,U){return U=U!==void 0?U:b.createFolders,T=f(T),this.files[T]||i.call(this,T,null,{dir:!0,createFolders:U}),this.files[T]};function k(T){return Object.prototype.toString.call(T)==="[object RegExp]"}var z={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(T){var U,x,M;for(U in this.files)M=this.files[U],(x=U.slice(this.root.length,U.length))&&U.slice(0,this.root.length)===this.root&&T(x,M)},filter:function(T){var U=[];return this.forEach(function(x,M){T(x,M)&&U.push(M)}),U},file:function(T,U,x){if(arguments.length!==1)return T=this.root+T,i.call(this,T,U,x),this;if(k(T)){var M=T;return this.filter(function(L,et){return!et.dir&&M.test(L)})}var B=this.files[this.root+T];return B&&!B.dir?B:null},folder:function(T){if(!T)return this;if(k(T))return this.filter(function(B,L){return L.dir&&T.test(B)});var U=this.root+T,x=g.call(this,U),M=this.clone();return M.root=x.name,M},remove:function(T){T=this.root+T;var U=this.files[T];if(U||(T.slice(-1)!=="/"&&(T+="/"),U=this.files[T]),U&&!U.dir)delete this.files[T];else for(var x=this.filter(function(B,L){return L.name.slice(0,T.length)===T}),M=0;M<x.length;M++)delete this.files[x[M].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(T){var U,x={};try{if((x=e.extend(T||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=x.type.toLowerCase(),x.compression=x.compression.toUpperCase(),x.type==="binarystring"&&(x.type="string"),!x.type)throw new Error("No output type specified.");e.checkSupport(x.type),x.platform!=="darwin"&&x.platform!=="freebsd"&&x.platform!=="linux"&&x.platform!=="sunos"||(x.platform="UNIX"),x.platform==="win32"&&(x.platform="DOS");var M=x.comment||this.comment||"";U=u.generateWorker(this,x,M)}catch(B){(U=new d("error")).error(B)}return new v(U,x.type||"string",x.mimeType)},generateAsync:function(T,U){return this.generateInternalStream(T).accumulate(U)},generateNodeStream:function(T,U){return(T=T||{}).type||(T.type="nodebuffer"),this.generateInternalStream(T).toNodejsStream(U)}};n.exports=z},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,n,c){n.exports=t("stream")},{stream:void 0}],17:[function(t,n,c){var i=t("./DataReader");function a(e){i.call(this,e);for(var d=0;d<this.data.length;d++)e[d]=255&e[d]}t("../utils").inherits(a,i),a.prototype.byteAt=function(e){return this.data[this.zero+e]},a.prototype.lastIndexOfSignature=function(e){for(var d=e.charCodeAt(0),v=e.charCodeAt(1),b=e.charCodeAt(2),y=e.charCodeAt(3),w=this.length-4;0<=w;--w)if(this.data[w]===d&&this.data[w+1]===v&&this.data[w+2]===b&&this.data[w+3]===y)return w-this.zero;return-1},a.prototype.readAndCheckSignature=function(e){var d=e.charCodeAt(0),v=e.charCodeAt(1),b=e.charCodeAt(2),y=e.charCodeAt(3),w=this.readData(4);return d===w[0]&&v===w[1]&&b===w[2]&&y===w[3]},a.prototype.readData=function(e){if(this.checkOffset(e),e===0)return[];var d=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,d},n.exports=a},{"../utils":32,"./DataReader":18}],18:[function(t,n,c){var i=t("../utils");function a(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var d,v=0;for(this.checkOffset(e),d=this.index+e-1;d>=this.index;d--)v=(v<<8)+this.byteAt(d);return this.index+=e,v},readString:function(e){return i.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},n.exports=a},{"../utils":32}],19:[function(t,n,c){var i=t("./Uint8ArrayReader");function a(e){i.call(this,e)}t("../utils").inherits(a,i),a.prototype.readData=function(e){this.checkOffset(e);var d=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,d},n.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,n,c){var i=t("./DataReader");function a(e){i.call(this,e)}t("../utils").inherits(a,i),a.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},a.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},a.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},a.prototype.readData=function(e){this.checkOffset(e);var d=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,d},n.exports=a},{"../utils":32,"./DataReader":18}],21:[function(t,n,c){var i=t("./ArrayReader");function a(e){i.call(this,e)}t("../utils").inherits(a,i),a.prototype.readData=function(e){if(this.checkOffset(e),e===0)return new Uint8Array(0);var d=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,d},n.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(t,n,c){var i=t("../utils"),a=t("../support"),e=t("./ArrayReader"),d=t("./StringReader"),v=t("./NodeBufferReader"),b=t("./Uint8ArrayReader");n.exports=function(y){var w=i.getTypeOf(y);return i.checkSupport(w),w!=="string"||a.uint8array?w==="nodebuffer"?new v(y):a.uint8array?new b(i.transformTo("uint8array",y)):new e(i.transformTo("array",y)):new d(y)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,n,c){c.LOCAL_FILE_HEADER="PK",c.CENTRAL_FILE_HEADER="PK",c.CENTRAL_DIRECTORY_END="PK",c.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",c.ZIP64_CENTRAL_DIRECTORY_END="PK",c.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,n,c){var i=t("./GenericWorker"),a=t("../utils");function e(d){i.call(this,"ConvertWorker to "+d),this.destType=d}a.inherits(e,i),e.prototype.processChunk=function(d){this.push({data:a.transformTo(this.destType,d.data),meta:d.meta})},n.exports=e},{"../utils":32,"./GenericWorker":28}],25:[function(t,n,c){var i=t("./GenericWorker"),a=t("../crc32");function e(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(e,i),e.prototype.processChunk=function(d){this.streamInfo.crc32=a(d.data,this.streamInfo.crc32||0),this.push(d)},n.exports=e},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,n,c){var i=t("../utils"),a=t("./GenericWorker");function e(d){a.call(this,"DataLengthProbe for "+d),this.propName=d,this.withStreamInfo(d,0)}i.inherits(e,a),e.prototype.processChunk=function(d){if(d){var v=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=v+d.data.length}a.prototype.processChunk.call(this,d)},n.exports=e},{"../utils":32,"./GenericWorker":28}],27:[function(t,n,c){var i=t("../utils"),a=t("./GenericWorker");function e(d){a.call(this,"DataWorker");var v=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,d.then(function(b){v.dataIsReady=!0,v.data=b,v.max=b&&b.length||0,v.type=i.getTypeOf(b),v.isPaused||v._tickAndRepeat()},function(b){v.error(b)})}i.inherits(e,a),e.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},e.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},e.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},e.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var d=null,v=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":d=this.data.substring(this.index,v);break;case"uint8array":d=this.data.subarray(this.index,v);break;case"array":case"nodebuffer":d=this.data.slice(this.index,v)}return this.index=v,this.push({data:d,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=e},{"../utils":32,"./GenericWorker":28}],28:[function(t,n,c){function i(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,e){return this._listeners[a].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,e){if(this._listeners[a])for(var d=0;d<this._listeners[a].length;d++)this._listeners[a][d].call(this,e)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var e=this;return a.on("data",function(d){e.processChunk(d)}),a.on("end",function(){e.end()}),a.on("error",function(d){e.error(d)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,e){return this.extraStreamInfo[a]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},n.exports=i},{}],29:[function(t,n,c){var i=t("../utils"),a=t("./ConvertWorker"),e=t("./GenericWorker"),d=t("../base64"),v=t("../support"),b=t("../external"),y=null;if(v.nodestream)try{y=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function w(p,o){return new b.Promise(function(l,f){var g=[],k=p._internalType,z=p._outputType,T=p._mimeType;p.on("data",function(U,x){g.push(U),o&&o(x)}).on("error",function(U){g=[],f(U)}).on("end",function(){try{var U=function(x,M,B){switch(x){case"blob":return i.newBlob(i.transformTo("arraybuffer",M),B);case"base64":return d.encode(M);default:return i.transformTo(x,M)}}(z,function(x,M){var B,L=0,et=null,E=0;for(B=0;B<M.length;B++)E+=M[B].length;switch(x){case"string":return M.join("");case"array":return Array.prototype.concat.apply([],M);case"uint8array":for(et=new Uint8Array(E),B=0;B<M.length;B++)et.set(M[B],L),L+=M[B].length;return et;case"nodebuffer":return Buffer.concat(M);default:throw new Error("concat : unsupported type '"+x+"'")}}(k,g),T);l(U)}catch(x){f(x)}g=[]}).resume()})}function u(p,o,l){var f=o;switch(o){case"blob":case"arraybuffer":f="uint8array";break;case"base64":f="string"}try{this._internalType=f,this._outputType=o,this._mimeType=l,i.checkSupport(f),this._worker=p.pipe(new a(f)),p.lock()}catch(g){this._worker=new e("error"),this._worker.error(g)}}u.prototype={accumulate:function(p){return w(this,p)},on:function(p,o){var l=this;return p==="data"?this._worker.on(p,function(f){o.call(l,f.data,f.meta)}):this._worker.on(p,function(){i.delay(o,arguments,l)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new y(this,{objectMode:this._outputType!=="nodebuffer"},p)}},n.exports=u},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,n,c){if(c.base64=!0,c.array=!0,c.string=!0,c.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",c.nodebuffer=typeof Buffer<"u",c.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")c.blob=!1;else{var i=new ArrayBuffer(0);try{c.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(i),c.blob=a.getBlob("application/zip").size===0}catch{c.blob=!1}}}try{c.nodestream=!!t("readable-stream").Readable}catch{c.nodestream=!1}},{"readable-stream":16}],31:[function(t,n,c){for(var i=t("./utils"),a=t("./support"),e=t("./nodejsUtils"),d=t("./stream/GenericWorker"),v=new Array(256),b=0;b<256;b++)v[b]=252<=b?6:248<=b?5:240<=b?4:224<=b?3:192<=b?2:1;v[254]=v[254]=1;function y(){d.call(this,"utf-8 decode"),this.leftOver=null}function w(){d.call(this,"utf-8 encode")}c.utf8encode=function(u){return a.nodebuffer?e.newBufferFrom(u,"utf-8"):function(p){var o,l,f,g,k,z=p.length,T=0;for(g=0;g<z;g++)(64512&(l=p.charCodeAt(g)))==55296&&g+1<z&&(64512&(f=p.charCodeAt(g+1)))==56320&&(l=65536+(l-55296<<10)+(f-56320),g++),T+=l<128?1:l<2048?2:l<65536?3:4;for(o=a.uint8array?new Uint8Array(T):new Array(T),g=k=0;k<T;g++)(64512&(l=p.charCodeAt(g)))==55296&&g+1<z&&(64512&(f=p.charCodeAt(g+1)))==56320&&(l=65536+(l-55296<<10)+(f-56320),g++),l<128?o[k++]=l:(l<2048?o[k++]=192|l>>>6:(l<65536?o[k++]=224|l>>>12:(o[k++]=240|l>>>18,o[k++]=128|l>>>12&63),o[k++]=128|l>>>6&63),o[k++]=128|63&l);return o}(u)},c.utf8decode=function(u){return a.nodebuffer?i.transformTo("nodebuffer",u).toString("utf-8"):function(p){var o,l,f,g,k=p.length,z=new Array(2*k);for(o=l=0;o<k;)if((f=p[o++])<128)z[l++]=f;else if(4<(g=v[f]))z[l++]=65533,o+=g-1;else{for(f&=g===2?31:g===3?15:7;1<g&&o<k;)f=f<<6|63&p[o++],g--;1<g?z[l++]=65533:f<65536?z[l++]=f:(f-=65536,z[l++]=55296|f>>10&1023,z[l++]=56320|1023&f)}return z.length!==l&&(z.subarray?z=z.subarray(0,l):z.length=l),i.applyFromCharCode(z)}(u=i.transformTo(a.uint8array?"uint8array":"array",u))},i.inherits(y,d),y.prototype.processChunk=function(u){var p=i.transformTo(a.uint8array?"uint8array":"array",u.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var o=p;(p=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),p.set(o,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var l=function(g,k){var z;for((k=k||g.length)>g.length&&(k=g.length),z=k-1;0<=z&&(192&g[z])==128;)z--;return z<0||z===0?k:z+v[g[z]]>k?z:k}(p),f=p;l!==p.length&&(a.uint8array?(f=p.subarray(0,l),this.leftOver=p.subarray(l,p.length)):(f=p.slice(0,l),this.leftOver=p.slice(l,p.length))),this.push({data:c.utf8decode(f),meta:u.meta})},y.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:c.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},c.Utf8DecodeWorker=y,i.inherits(w,d),w.prototype.processChunk=function(u){this.push({data:c.utf8encode(u.data),meta:u.meta})},c.Utf8EncodeWorker=w},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,n,c){var i=t("./support"),a=t("./base64"),e=t("./nodejsUtils"),d=t("./external");function v(o){return o}function b(o,l){for(var f=0;f<o.length;++f)l[f]=255&o.charCodeAt(f);return l}t("setimmediate"),c.newBlob=function(o,l){c.checkSupport("blob");try{return new Blob([o],{type:l})}catch{try{var f=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return f.append(o),f.getBlob(l)}catch{throw new Error("Bug : can't construct the Blob.")}}};var y={stringifyByChunk:function(o,l,f){var g=[],k=0,z=o.length;if(z<=f)return String.fromCharCode.apply(null,o);for(;k<z;)l==="array"||l==="nodebuffer"?g.push(String.fromCharCode.apply(null,o.slice(k,Math.min(k+f,z)))):g.push(String.fromCharCode.apply(null,o.subarray(k,Math.min(k+f,z)))),k+=f;return g.join("")},stringifyByChar:function(o){for(var l="",f=0;f<o.length;f++)l+=String.fromCharCode(o[f]);return l},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,e.allocBuffer(1)).length===1}catch{return!1}}()}};function w(o){var l=65536,f=c.getTypeOf(o),g=!0;if(f==="uint8array"?g=y.applyCanBeUsed.uint8array:f==="nodebuffer"&&(g=y.applyCanBeUsed.nodebuffer),g)for(;1<l;)try{return y.stringifyByChunk(o,f,l)}catch{l=Math.floor(l/2)}return y.stringifyByChar(o)}function u(o,l){for(var f=0;f<o.length;f++)l[f]=o[f];return l}c.applyFromCharCode=w;var p={};p.string={string:v,array:function(o){return b(o,new Array(o.length))},arraybuffer:function(o){return p.string.uint8array(o).buffer},uint8array:function(o){return b(o,new Uint8Array(o.length))},nodebuffer:function(o){return b(o,e.allocBuffer(o.length))}},p.array={string:w,array:v,arraybuffer:function(o){return new Uint8Array(o).buffer},uint8array:function(o){return new Uint8Array(o)},nodebuffer:function(o){return e.newBufferFrom(o)}},p.arraybuffer={string:function(o){return w(new Uint8Array(o))},array:function(o){return u(new Uint8Array(o),new Array(o.byteLength))},arraybuffer:v,uint8array:function(o){return new Uint8Array(o)},nodebuffer:function(o){return e.newBufferFrom(new Uint8Array(o))}},p.uint8array={string:w,array:function(o){return u(o,new Array(o.length))},arraybuffer:function(o){return o.buffer},uint8array:v,nodebuffer:function(o){return e.newBufferFrom(o)}},p.nodebuffer={string:w,array:function(o){return u(o,new Array(o.length))},arraybuffer:function(o){return p.nodebuffer.uint8array(o).buffer},uint8array:function(o){return u(o,new Uint8Array(o.length))},nodebuffer:v},c.transformTo=function(o,l){if(l=l||"",!o)return l;c.checkSupport(o);var f=c.getTypeOf(l);return p[f][o](l)},c.resolve=function(o){for(var l=o.split("/"),f=[],g=0;g<l.length;g++){var k=l[g];k==="."||k===""&&g!==0&&g!==l.length-1||(k===".."?f.pop():f.push(k))}return f.join("/")},c.getTypeOf=function(o){return typeof o=="string"?"string":Object.prototype.toString.call(o)==="[object Array]"?"array":i.nodebuffer&&e.isBuffer(o)?"nodebuffer":i.uint8array&&o instanceof Uint8Array?"uint8array":i.arraybuffer&&o instanceof ArrayBuffer?"arraybuffer":void 0},c.checkSupport=function(o){if(!i[o.toLowerCase()])throw new Error(o+" is not supported by this platform")},c.MAX_VALUE_16BITS=65535,c.MAX_VALUE_32BITS=-1,c.pretty=function(o){var l,f,g="";for(f=0;f<(o||"").length;f++)g+="\\x"+((l=o.charCodeAt(f))<16?"0":"")+l.toString(16).toUpperCase();return g},c.delay=function(o,l,f){setImmediate(function(){o.apply(f||null,l||[])})},c.inherits=function(o,l){function f(){}f.prototype=l.prototype,o.prototype=new f},c.extend=function(){var o,l,f={};for(o=0;o<arguments.length;o++)for(l in arguments[o])Object.prototype.hasOwnProperty.call(arguments[o],l)&&f[l]===void 0&&(f[l]=arguments[o][l]);return f},c.prepareContent=function(o,l,f,g,k){return d.Promise.resolve(l).then(function(z){return i.blob&&(z instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(z))!==-1)&&typeof FileReader<"u"?new d.Promise(function(T,U){var x=new FileReader;x.onload=function(M){T(M.target.result)},x.onerror=function(M){U(M.target.error)},x.readAsArrayBuffer(z)}):z}).then(function(z){var T=c.getTypeOf(z);return T?(T==="arraybuffer"?z=c.transformTo("uint8array",z):T==="string"&&(k?z=a.decode(z):f&&g!==!0&&(z=function(U){return b(U,i.uint8array?new Uint8Array(U.length):new Array(U.length))}(z))),z):d.Promise.reject(new Error("Can't read the data of '"+o+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,n,c){var i=t("./reader/readerFor"),a=t("./utils"),e=t("./signature"),d=t("./zipEntry"),v=t("./support");function b(y){this.files=[],this.loadOptions=y}b.prototype={checkSignature:function(y){if(!this.reader.readAndCheckSignature(y)){this.reader.index-=4;var w=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(w)+", expected "+a.pretty(y)+")")}},isSignature:function(y,w){var u=this.reader.index;this.reader.setIndex(y);var p=this.reader.readString(4)===w;return this.reader.setIndex(u),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var y=this.reader.readData(this.zipCommentLength),w=v.uint8array?"uint8array":"array",u=a.transformTo(w,y);this.zipComment=this.loadOptions.decodeFileName(u)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var y,w,u,p=this.zip64EndOfCentralSize-44;0<p;)y=this.reader.readInt(2),w=this.reader.readInt(4),u=this.reader.readData(w),this.zip64ExtensibleData[y]={id:y,length:w,value:u}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var y,w;for(y=0;y<this.files.length;y++)w=this.files[y],this.reader.setIndex(w.localHeaderOffset),this.checkSignature(e.LOCAL_FILE_HEADER),w.readLocalPart(this.reader),w.handleUTF8(),w.processAttributes()},readCentralDir:function(){var y;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(e.CENTRAL_FILE_HEADER);)(y=new d({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(y);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var y=this.reader.lastIndexOfSignature(e.CENTRAL_DIRECTORY_END);if(y<0)throw this.isSignature(0,e.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(y);var w=y;if(this.checkSignature(e.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(y=this.reader.lastIndexOfSignature(e.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(y),this.checkSignature(e.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,e.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(e.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(e.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var u=this.centralDirOffset+this.centralDirSize;this.zip64&&(u+=20,u+=12+this.zip64EndOfCentralSize);var p=w-u;if(0<p)this.isSignature(w,e.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p<0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(y){this.reader=i(y)},load:function(y){this.prepareReader(y),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=b},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,n,c){var i=t("./reader/readerFor"),a=t("./utils"),e=t("./compressedObject"),d=t("./crc32"),v=t("./utf8"),b=t("./compressions"),y=t("./support");function w(u,p){this.options=u,this.loadOptions=p}w.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(u){var p,o;if(u.skip(22),this.fileNameLength=u.readInt(2),o=u.readInt(2),this.fileName=u.readData(this.fileNameLength),u.skip(o),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((p=function(l){for(var f in b)if(Object.prototype.hasOwnProperty.call(b,f)&&b[f].magic===l)return b[f];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new e(this.compressedSize,this.uncompressedSize,this.crc32,p,u.readData(this.compressedSize))},readCentralPart:function(u){this.versionMadeBy=u.readInt(2),u.skip(2),this.bitFlag=u.readInt(2),this.compressionMethod=u.readString(2),this.date=u.readDate(),this.crc32=u.readInt(4),this.compressedSize=u.readInt(4),this.uncompressedSize=u.readInt(4);var p=u.readInt(2);if(this.extraFieldsLength=u.readInt(2),this.fileCommentLength=u.readInt(2),this.diskNumberStart=u.readInt(2),this.internalFileAttributes=u.readInt(2),this.externalFileAttributes=u.readInt(4),this.localHeaderOffset=u.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");u.skip(p),this.readExtraFields(u),this.parseZIP64ExtraField(u),this.fileComment=u.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var u=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),u==0&&(this.dosPermissions=63&this.externalFileAttributes),u==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var u=i(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=u.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=u.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=u.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=u.readInt(4))}},readExtraFields:function(u){var p,o,l,f=u.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});u.index+4<f;)p=u.readInt(2),o=u.readInt(2),l=u.readData(o),this.extraFields[p]={id:p,length:o,value:l};u.setIndex(f)},handleUTF8:function(){var u=y.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=v.utf8decode(this.fileName),this.fileCommentStr=v.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var o=a.transformTo(u,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(o)}var l=this.findExtraFieldUnicodeComment();if(l!==null)this.fileCommentStr=l;else{var f=a.transformTo(u,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(f)}}},findExtraFieldUnicodePath:function(){var u=this.extraFields[28789];if(u){var p=i(u.value);return p.readInt(1)!==1||d(this.fileName)!==p.readInt(4)?null:v.utf8decode(p.readData(u.length-5))}return null},findExtraFieldUnicodeComment:function(){var u=this.extraFields[25461];if(u){var p=i(u.value);return p.readInt(1)!==1||d(this.fileComment)!==p.readInt(4)?null:v.utf8decode(p.readData(u.length-5))}return null}},n.exports=w},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,n,c){function i(p,o,l){this.name=p,this.dir=l.dir,this.date=l.date,this.comment=l.comment,this.unixPermissions=l.unixPermissions,this.dosPermissions=l.dosPermissions,this._data=o,this._dataBinary=l.binary,this.options={compression:l.compression,compressionOptions:l.compressionOptions}}var a=t("./stream/StreamHelper"),e=t("./stream/DataWorker"),d=t("./utf8"),v=t("./compressedObject"),b=t("./stream/GenericWorker");i.prototype={internalStream:function(p){var o=null,l="string";try{if(!p)throw new Error("No output type specified.");var f=(l=p.toLowerCase())==="string"||l==="text";l!=="binarystring"&&l!=="text"||(l="string"),o=this._decompressWorker();var g=!this._dataBinary;g&&!f&&(o=o.pipe(new d.Utf8EncodeWorker)),!g&&f&&(o=o.pipe(new d.Utf8DecodeWorker))}catch(k){(o=new b("error")).error(k)}return new a(o,l,"")},async:function(p,o){return this.internalStream(p).accumulate(o)},nodeStream:function(p,o){return this.internalStream(p||"nodebuffer").toNodejsStream(o)},_compressWorker:function(p,o){if(this._data instanceof v&&this._data.compression.magic===p.magic)return this._data.getCompressedWorker();var l=this._decompressWorker();return this._dataBinary||(l=l.pipe(new d.Utf8EncodeWorker)),v.createWorkerFrom(l,p,o)},_decompressWorker:function(){return this._data instanceof v?this._data.getContentWorker():this._data instanceof b?this._data:new e(this._data)}};for(var y=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],w=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},u=0;u<y.length;u++)i.prototype[y[u]]=w;n.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,n,c){(function(i){var a,e,d=i.MutationObserver||i.WebKitMutationObserver;if(d){var v=0,b=new d(p),y=i.document.createTextNode("");b.observe(y,{characterData:!0}),a=function(){y.data=v=++v%2}}else if(i.setImmediate||i.MessageChannel===void 0)a="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var o=i.document.createElement("script");o.onreadystatechange=function(){p(),o.onreadystatechange=null,o.parentNode.removeChild(o),o=null},i.document.documentElement.appendChild(o)}:function(){setTimeout(p,0)};else{var w=new i.MessageChannel;w.port1.onmessage=p,a=function(){w.port2.postMessage(0)}}var u=[];function p(){var o,l;e=!0;for(var f=u.length;f;){for(l=u,u=[],o=-1;++o<f;)l[o]();f=u.length}e=!1}n.exports=function(o){u.push(o)!==1||e||a()}}).call(this,typeof Re<"u"?Re:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,n,c){var i=t("immediate");function a(){}var e={},d=["REJECTED"],v=["FULFILLED"],b=["PENDING"];function y(f){if(typeof f!="function")throw new TypeError("resolver must be a function");this.state=b,this.queue=[],this.outcome=void 0,f!==a&&o(this,f)}function w(f,g,k){this.promise=f,typeof g=="function"&&(this.onFulfilled=g,this.callFulfilled=this.otherCallFulfilled),typeof k=="function"&&(this.onRejected=k,this.callRejected=this.otherCallRejected)}function u(f,g,k){i(function(){var z;try{z=g(k)}catch(T){return e.reject(f,T)}z===f?e.reject(f,new TypeError("Cannot resolve promise with itself")):e.resolve(f,z)})}function p(f){var g=f&&f.then;if(f&&(typeof f=="object"||typeof f=="function")&&typeof g=="function")return function(){g.apply(f,arguments)}}function o(f,g){var k=!1;function z(x){k||(k=!0,e.reject(f,x))}function T(x){k||(k=!0,e.resolve(f,x))}var U=l(function(){g(T,z)});U.status==="error"&&z(U.value)}function l(f,g){var k={};try{k.value=f(g),k.status="success"}catch(z){k.status="error",k.value=z}return k}(n.exports=y).prototype.finally=function(f){if(typeof f!="function")return this;var g=this.constructor;return this.then(function(k){return g.resolve(f()).then(function(){return k})},function(k){return g.resolve(f()).then(function(){throw k})})},y.prototype.catch=function(f){return this.then(null,f)},y.prototype.then=function(f,g){if(typeof f!="function"&&this.state===v||typeof g!="function"&&this.state===d)return this;var k=new this.constructor(a);return this.state!==b?u(k,this.state===v?f:g,this.outcome):this.queue.push(new w(k,f,g)),k},w.prototype.callFulfilled=function(f){e.resolve(this.promise,f)},w.prototype.otherCallFulfilled=function(f){u(this.promise,this.onFulfilled,f)},w.prototype.callRejected=function(f){e.reject(this.promise,f)},w.prototype.otherCallRejected=function(f){u(this.promise,this.onRejected,f)},e.resolve=function(f,g){var k=l(p,g);if(k.status==="error")return e.reject(f,k.value);var z=k.value;if(z)o(f,z);else{f.state=v,f.outcome=g;for(var T=-1,U=f.queue.length;++T<U;)f.queue[T].callFulfilled(g)}return f},e.reject=function(f,g){f.state=d,f.outcome=g;for(var k=-1,z=f.queue.length;++k<z;)f.queue[k].callRejected(g);return f},y.resolve=function(f){return f instanceof this?f:e.resolve(new this(a),f)},y.reject=function(f){var g=new this(a);return e.reject(g,f)},y.all=function(f){var g=this;if(Object.prototype.toString.call(f)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=f.length,z=!1;if(!k)return this.resolve([]);for(var T=new Array(k),U=0,x=-1,M=new this(a);++x<k;)B(f[x],x);return M;function B(L,et){g.resolve(L).then(function(E){T[et]=E,++U!==k||z||(z=!0,e.resolve(M,T))},function(E){z||(z=!0,e.reject(M,E))})}},y.race=function(f){var g=this;if(Object.prototype.toString.call(f)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=f.length,z=!1;if(!k)return this.resolve([]);for(var T=-1,U=new this(a);++T<k;)x=f[T],g.resolve(x).then(function(M){z||(z=!0,e.resolve(U,M))},function(M){z||(z=!0,e.reject(U,M))});var x;return U}},{immediate:36}],38:[function(t,n,c){var i={};(0,t("./lib/utils/common").assign)(i,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),n.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,n,c){var i=t("./zlib/deflate"),a=t("./utils/common"),e=t("./utils/strings"),d=t("./zlib/messages"),v=t("./zlib/zstream"),b=Object.prototype.toString,y=0,w=-1,u=0,p=8;function o(f){if(!(this instanceof o))return new o(f);this.options=a.assign({level:w,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:u,to:""},f||{});var g=this.options;g.raw&&0<g.windowBits?g.windowBits=-g.windowBits:g.gzip&&0<g.windowBits&&g.windowBits<16&&(g.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new v,this.strm.avail_out=0;var k=i.deflateInit2(this.strm,g.level,g.method,g.windowBits,g.memLevel,g.strategy);if(k!==y)throw new Error(d[k]);if(g.header&&i.deflateSetHeader(this.strm,g.header),g.dictionary){var z;if(z=typeof g.dictionary=="string"?e.string2buf(g.dictionary):b.call(g.dictionary)==="[object ArrayBuffer]"?new Uint8Array(g.dictionary):g.dictionary,(k=i.deflateSetDictionary(this.strm,z))!==y)throw new Error(d[k]);this._dict_set=!0}}function l(f,g){var k=new o(g);if(k.push(f,!0),k.err)throw k.msg||d[k.err];return k.result}o.prototype.push=function(f,g){var k,z,T=this.strm,U=this.options.chunkSize;if(this.ended)return!1;z=g===~~g?g:g===!0?4:0,typeof f=="string"?T.input=e.string2buf(f):b.call(f)==="[object ArrayBuffer]"?T.input=new Uint8Array(f):T.input=f,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new a.Buf8(U),T.next_out=0,T.avail_out=U),(k=i.deflate(T,z))!==1&&k!==y)return this.onEnd(k),!(this.ended=!0);T.avail_out!==0&&(T.avail_in!==0||z!==4&&z!==2)||(this.options.to==="string"?this.onData(e.buf2binstring(a.shrinkBuf(T.output,T.next_out))):this.onData(a.shrinkBuf(T.output,T.next_out)))}while((0<T.avail_in||T.avail_out===0)&&k!==1);return z===4?(k=i.deflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===y):z!==2||(this.onEnd(y),!(T.avail_out=0))},o.prototype.onData=function(f){this.chunks.push(f)},o.prototype.onEnd=function(f){f===y&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=f,this.msg=this.strm.msg},c.Deflate=o,c.deflate=l,c.deflateRaw=function(f,g){return(g=g||{}).raw=!0,l(f,g)},c.gzip=function(f,g){return(g=g||{}).gzip=!0,l(f,g)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,n,c){var i=t("./zlib/inflate"),a=t("./utils/common"),e=t("./utils/strings"),d=t("./zlib/constants"),v=t("./zlib/messages"),b=t("./zlib/zstream"),y=t("./zlib/gzheader"),w=Object.prototype.toString;function u(o){if(!(this instanceof u))return new u(o);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},o||{});var l=this.options;l.raw&&0<=l.windowBits&&l.windowBits<16&&(l.windowBits=-l.windowBits,l.windowBits===0&&(l.windowBits=-15)),!(0<=l.windowBits&&l.windowBits<16)||o&&o.windowBits||(l.windowBits+=32),15<l.windowBits&&l.windowBits<48&&!(15&l.windowBits)&&(l.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new b,this.strm.avail_out=0;var f=i.inflateInit2(this.strm,l.windowBits);if(f!==d.Z_OK)throw new Error(v[f]);this.header=new y,i.inflateGetHeader(this.strm,this.header)}function p(o,l){var f=new u(l);if(f.push(o,!0),f.err)throw f.msg||v[f.err];return f.result}u.prototype.push=function(o,l){var f,g,k,z,T,U,x=this.strm,M=this.options.chunkSize,B=this.options.dictionary,L=!1;if(this.ended)return!1;g=l===~~l?l:l===!0?d.Z_FINISH:d.Z_NO_FLUSH,typeof o=="string"?x.input=e.binstring2buf(o):w.call(o)==="[object ArrayBuffer]"?x.input=new Uint8Array(o):x.input=o,x.next_in=0,x.avail_in=x.input.length;do{if(x.avail_out===0&&(x.output=new a.Buf8(M),x.next_out=0,x.avail_out=M),(f=i.inflate(x,d.Z_NO_FLUSH))===d.Z_NEED_DICT&&B&&(U=typeof B=="string"?e.string2buf(B):w.call(B)==="[object ArrayBuffer]"?new Uint8Array(B):B,f=i.inflateSetDictionary(this.strm,U)),f===d.Z_BUF_ERROR&&L===!0&&(f=d.Z_OK,L=!1),f!==d.Z_STREAM_END&&f!==d.Z_OK)return this.onEnd(f),!(this.ended=!0);x.next_out&&(x.avail_out!==0&&f!==d.Z_STREAM_END&&(x.avail_in!==0||g!==d.Z_FINISH&&g!==d.Z_SYNC_FLUSH)||(this.options.to==="string"?(k=e.utf8border(x.output,x.next_out),z=x.next_out-k,T=e.buf2string(x.output,k),x.next_out=z,x.avail_out=M-z,z&&a.arraySet(x.output,x.output,k,z,0),this.onData(T)):this.onData(a.shrinkBuf(x.output,x.next_out)))),x.avail_in===0&&x.avail_out===0&&(L=!0)}while((0<x.avail_in||x.avail_out===0)&&f!==d.Z_STREAM_END);return f===d.Z_STREAM_END&&(g=d.Z_FINISH),g===d.Z_FINISH?(f=i.inflateEnd(this.strm),this.onEnd(f),this.ended=!0,f===d.Z_OK):g!==d.Z_SYNC_FLUSH||(this.onEnd(d.Z_OK),!(x.avail_out=0))},u.prototype.onData=function(o){this.chunks.push(o)},u.prototype.onEnd=function(o){o===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=o,this.msg=this.strm.msg},c.Inflate=u,c.inflate=p,c.inflateRaw=function(o,l){return(l=l||{}).raw=!0,p(o,l)},c.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,n,c){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";c.assign=function(d){for(var v=Array.prototype.slice.call(arguments,1);v.length;){var b=v.shift();if(b){if(typeof b!="object")throw new TypeError(b+"must be non-object");for(var y in b)b.hasOwnProperty(y)&&(d[y]=b[y])}}return d},c.shrinkBuf=function(d,v){return d.length===v?d:d.subarray?d.subarray(0,v):(d.length=v,d)};var a={arraySet:function(d,v,b,y,w){if(v.subarray&&d.subarray)d.set(v.subarray(b,b+y),w);else for(var u=0;u<y;u++)d[w+u]=v[b+u]},flattenChunks:function(d){var v,b,y,w,u,p;for(v=y=0,b=d.length;v<b;v++)y+=d[v].length;for(p=new Uint8Array(y),v=w=0,b=d.length;v<b;v++)u=d[v],p.set(u,w),w+=u.length;return p}},e={arraySet:function(d,v,b,y,w){for(var u=0;u<y;u++)d[w+u]=v[b+u]},flattenChunks:function(d){return[].concat.apply([],d)}};c.setTyped=function(d){d?(c.Buf8=Uint8Array,c.Buf16=Uint16Array,c.Buf32=Int32Array,c.assign(c,a)):(c.Buf8=Array,c.Buf16=Array,c.Buf32=Array,c.assign(c,e))},c.setTyped(i)},{}],42:[function(t,n,c){var i=t("./common"),a=!0,e=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{e=!1}for(var d=new i.Buf8(256),v=0;v<256;v++)d[v]=252<=v?6:248<=v?5:240<=v?4:224<=v?3:192<=v?2:1;function b(y,w){if(w<65537&&(y.subarray&&e||!y.subarray&&a))return String.fromCharCode.apply(null,i.shrinkBuf(y,w));for(var u="",p=0;p<w;p++)u+=String.fromCharCode(y[p]);return u}d[254]=d[254]=1,c.string2buf=function(y){var w,u,p,o,l,f=y.length,g=0;for(o=0;o<f;o++)(64512&(u=y.charCodeAt(o)))==55296&&o+1<f&&(64512&(p=y.charCodeAt(o+1)))==56320&&(u=65536+(u-55296<<10)+(p-56320),o++),g+=u<128?1:u<2048?2:u<65536?3:4;for(w=new i.Buf8(g),o=l=0;l<g;o++)(64512&(u=y.charCodeAt(o)))==55296&&o+1<f&&(64512&(p=y.charCodeAt(o+1)))==56320&&(u=65536+(u-55296<<10)+(p-56320),o++),u<128?w[l++]=u:(u<2048?w[l++]=192|u>>>6:(u<65536?w[l++]=224|u>>>12:(w[l++]=240|u>>>18,w[l++]=128|u>>>12&63),w[l++]=128|u>>>6&63),w[l++]=128|63&u);return w},c.buf2binstring=function(y){return b(y,y.length)},c.binstring2buf=function(y){for(var w=new i.Buf8(y.length),u=0,p=w.length;u<p;u++)w[u]=y.charCodeAt(u);return w},c.buf2string=function(y,w){var u,p,o,l,f=w||y.length,g=new Array(2*f);for(u=p=0;u<f;)if((o=y[u++])<128)g[p++]=o;else if(4<(l=d[o]))g[p++]=65533,u+=l-1;else{for(o&=l===2?31:l===3?15:7;1<l&&u<f;)o=o<<6|63&y[u++],l--;1<l?g[p++]=65533:o<65536?g[p++]=o:(o-=65536,g[p++]=55296|o>>10&1023,g[p++]=56320|1023&o)}return b(g,p)},c.utf8border=function(y,w){var u;for((w=w||y.length)>y.length&&(w=y.length),u=w-1;0<=u&&(192&y[u])==128;)u--;return u<0||u===0?w:u+d[y[u]]>w?u:w}},{"./common":41}],43:[function(t,n,c){n.exports=function(i,a,e,d){for(var v=65535&i|0,b=i>>>16&65535|0,y=0;e!==0;){for(e-=y=2e3<e?2e3:e;b=b+(v=v+a[d++]|0)|0,--y;);v%=65521,b%=65521}return v|b<<16|0}},{}],44:[function(t,n,c){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,n,c){var i=function(){for(var a,e=[],d=0;d<256;d++){a=d;for(var v=0;v<8;v++)a=1&a?3988292384^a>>>1:a>>>1;e[d]=a}return e}();n.exports=function(a,e,d,v){var b=i,y=v+d;a^=-1;for(var w=v;w<y;w++)a=a>>>8^b[255&(a^e[w])];return-1^a}},{}],46:[function(t,n,c){var i,a=t("../utils/common"),e=t("./trees"),d=t("./adler32"),v=t("./crc32"),b=t("./messages"),y=0,w=4,u=0,p=-2,o=-1,l=4,f=2,g=8,k=9,z=286,T=30,U=19,x=2*z+1,M=15,B=3,L=258,et=L+B+1,E=42,P=113,s=1,O=2,J=3,R=4;function st(r,Y){return r.msg=b[Y],Y}function V(r){return(r<<1)-(4<r?9:0)}function q(r){for(var Y=r.length;0<=--Y;)r[Y]=0}function A(r){var Y=r.state,W=Y.pending;W>r.avail_out&&(W=r.avail_out),W!==0&&(a.arraySet(r.output,Y.pending_buf,Y.pending_out,W,r.next_out),r.next_out+=W,Y.pending_out+=W,r.total_out+=W,r.avail_out-=W,Y.pending-=W,Y.pending===0&&(Y.pending_out=0))}function N(r,Y){e._tr_flush_block(r,0<=r.block_start?r.block_start:-1,r.strstart-r.block_start,Y),r.block_start=r.strstart,A(r.strm)}function X(r,Y){r.pending_buf[r.pending++]=Y}function H(r,Y){r.pending_buf[r.pending++]=Y>>>8&255,r.pending_buf[r.pending++]=255&Y}function K(r,Y){var W,_,m=r.max_chain_length,S=r.strstart,Q=r.prev_length,$=r.nice_match,D=r.strstart>r.w_size-et?r.strstart-(r.w_size-et):0,rt=r.window,it=r.w_mask,nt=r.prev,ct=r.strstart+L,kt=rt[S+Q-1],_t=rt[S+Q];r.prev_length>=r.good_match&&(m>>=2),$>r.lookahead&&($=r.lookahead);do if(rt[(W=Y)+Q]===_t&&rt[W+Q-1]===kt&&rt[W]===rt[S]&&rt[++W]===rt[S+1]){S+=2,W++;do;while(rt[++S]===rt[++W]&&rt[++S]===rt[++W]&&rt[++S]===rt[++W]&&rt[++S]===rt[++W]&&rt[++S]===rt[++W]&&rt[++S]===rt[++W]&&rt[++S]===rt[++W]&&rt[++S]===rt[++W]&&S<ct);if(_=L-(ct-S),S=ct-L,Q<_){if(r.match_start=Y,$<=(Q=_))break;kt=rt[S+Q-1],_t=rt[S+Q]}}while((Y=nt[Y&it])>D&&--m!=0);return Q<=r.lookahead?Q:r.lookahead}function ht(r){var Y,W,_,m,S,Q,$,D,rt,it,nt=r.w_size;do{if(m=r.window_size-r.lookahead-r.strstart,r.strstart>=nt+(nt-et)){for(a.arraySet(r.window,r.window,nt,nt,0),r.match_start-=nt,r.strstart-=nt,r.block_start-=nt,Y=W=r.hash_size;_=r.head[--Y],r.head[Y]=nt<=_?_-nt:0,--W;);for(Y=W=nt;_=r.prev[--Y],r.prev[Y]=nt<=_?_-nt:0,--W;);m+=nt}if(r.strm.avail_in===0)break;if(Q=r.strm,$=r.window,D=r.strstart+r.lookahead,rt=m,it=void 0,it=Q.avail_in,rt<it&&(it=rt),W=it===0?0:(Q.avail_in-=it,a.arraySet($,Q.input,Q.next_in,it,D),Q.state.wrap===1?Q.adler=d(Q.adler,$,it,D):Q.state.wrap===2&&(Q.adler=v(Q.adler,$,it,D)),Q.next_in+=it,Q.total_in+=it,it),r.lookahead+=W,r.lookahead+r.insert>=B)for(S=r.strstart-r.insert,r.ins_h=r.window[S],r.ins_h=(r.ins_h<<r.hash_shift^r.window[S+1])&r.hash_mask;r.insert&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[S+B-1])&r.hash_mask,r.prev[S&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=S,S++,r.insert--,!(r.lookahead+r.insert<B)););}while(r.lookahead<et&&r.strm.avail_in!==0)}function St(r,Y){for(var W,_;;){if(r.lookahead<et){if(ht(r),r.lookahead<et&&Y===y)return s;if(r.lookahead===0)break}if(W=0,r.lookahead>=B&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+B-1])&r.hash_mask,W=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),W!==0&&r.strstart-W<=r.w_size-et&&(r.match_length=K(r,W)),r.match_length>=B)if(_=e._tr_tally(r,r.strstart-r.match_start,r.match_length-B),r.lookahead-=r.match_length,r.match_length<=r.max_lazy_match&&r.lookahead>=B){for(r.match_length--;r.strstart++,r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+B-1])&r.hash_mask,W=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart,--r.match_length!=0;);r.strstart++}else r.strstart+=r.match_length,r.match_length=0,r.ins_h=r.window[r.strstart],r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+1])&r.hash_mask;else _=e._tr_tally(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++;if(_&&(N(r,!1),r.strm.avail_out===0))return s}return r.insert=r.strstart<B-1?r.strstart:B-1,Y===w?(N(r,!0),r.strm.avail_out===0?J:R):r.last_lit&&(N(r,!1),r.strm.avail_out===0)?s:O}function ft(r,Y){for(var W,_,m;;){if(r.lookahead<et){if(ht(r),r.lookahead<et&&Y===y)return s;if(r.lookahead===0)break}if(W=0,r.lookahead>=B&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+B-1])&r.hash_mask,W=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),r.prev_length=r.match_length,r.prev_match=r.match_start,r.match_length=B-1,W!==0&&r.prev_length<r.max_lazy_match&&r.strstart-W<=r.w_size-et&&(r.match_length=K(r,W),r.match_length<=5&&(r.strategy===1||r.match_length===B&&4096<r.strstart-r.match_start)&&(r.match_length=B-1)),r.prev_length>=B&&r.match_length<=r.prev_length){for(m=r.strstart+r.lookahead-B,_=e._tr_tally(r,r.strstart-1-r.prev_match,r.prev_length-B),r.lookahead-=r.prev_length-1,r.prev_length-=2;++r.strstart<=m&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+B-1])&r.hash_mask,W=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),--r.prev_length!=0;);if(r.match_available=0,r.match_length=B-1,r.strstart++,_&&(N(r,!1),r.strm.avail_out===0))return s}else if(r.match_available){if((_=e._tr_tally(r,0,r.window[r.strstart-1]))&&N(r,!1),r.strstart++,r.lookahead--,r.strm.avail_out===0)return s}else r.match_available=1,r.strstart++,r.lookahead--}return r.match_available&&(_=e._tr_tally(r,0,r.window[r.strstart-1]),r.match_available=0),r.insert=r.strstart<B-1?r.strstart:B-1,Y===w?(N(r,!0),r.strm.avail_out===0?J:R):r.last_lit&&(N(r,!1),r.strm.avail_out===0)?s:O}function dt(r,Y,W,_,m){this.good_length=r,this.max_lazy=Y,this.nice_length=W,this.max_chain=_,this.func=m}function It(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*x),this.dyn_dtree=new a.Buf16(2*(2*T+1)),this.bl_tree=new a.Buf16(2*(2*U+1)),q(this.dyn_ltree),q(this.dyn_dtree),q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(M+1),this.heap=new a.Buf16(2*z+1),q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*z+1),q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function yt(r){var Y;return r&&r.state?(r.total_in=r.total_out=0,r.data_type=f,(Y=r.state).pending=0,Y.pending_out=0,Y.wrap<0&&(Y.wrap=-Y.wrap),Y.status=Y.wrap?E:P,r.adler=Y.wrap===2?0:1,Y.last_flush=y,e._tr_init(Y),u):st(r,p)}function Ct(r){var Y=yt(r);return Y===u&&function(W){W.window_size=2*W.w_size,q(W.head),W.max_lazy_match=i[W.level].max_lazy,W.good_match=i[W.level].good_length,W.nice_match=i[W.level].nice_length,W.max_chain_length=i[W.level].max_chain,W.strstart=0,W.block_start=0,W.lookahead=0,W.insert=0,W.match_length=W.prev_length=B-1,W.match_available=0,W.ins_h=0}(r.state),Y}function zt(r,Y,W,_,m,S){if(!r)return p;var Q=1;if(Y===o&&(Y=6),_<0?(Q=0,_=-_):15<_&&(Q=2,_-=16),m<1||k<m||W!==g||_<8||15<_||Y<0||9<Y||S<0||l<S)return st(r,p);_===8&&(_=9);var $=new It;return(r.state=$).strm=r,$.wrap=Q,$.gzhead=null,$.w_bits=_,$.w_size=1<<$.w_bits,$.w_mask=$.w_size-1,$.hash_bits=m+7,$.hash_size=1<<$.hash_bits,$.hash_mask=$.hash_size-1,$.hash_shift=~~(($.hash_bits+B-1)/B),$.window=new a.Buf8(2*$.w_size),$.head=new a.Buf16($.hash_size),$.prev=new a.Buf16($.w_size),$.lit_bufsize=1<<m+6,$.pending_buf_size=4*$.lit_bufsize,$.pending_buf=new a.Buf8($.pending_buf_size),$.d_buf=1*$.lit_bufsize,$.l_buf=3*$.lit_bufsize,$.level=Y,$.strategy=S,$.method=W,Ct(r)}i=[new dt(0,0,0,0,function(r,Y){var W=65535;for(W>r.pending_buf_size-5&&(W=r.pending_buf_size-5);;){if(r.lookahead<=1){if(ht(r),r.lookahead===0&&Y===y)return s;if(r.lookahead===0)break}r.strstart+=r.lookahead,r.lookahead=0;var _=r.block_start+W;if((r.strstart===0||r.strstart>=_)&&(r.lookahead=r.strstart-_,r.strstart=_,N(r,!1),r.strm.avail_out===0)||r.strstart-r.block_start>=r.w_size-et&&(N(r,!1),r.strm.avail_out===0))return s}return r.insert=0,Y===w?(N(r,!0),r.strm.avail_out===0?J:R):(r.strstart>r.block_start&&(N(r,!1),r.strm.avail_out),s)}),new dt(4,4,8,4,St),new dt(4,5,16,8,St),new dt(4,6,32,32,St),new dt(4,4,16,16,ft),new dt(8,16,32,32,ft),new dt(8,16,128,128,ft),new dt(8,32,128,256,ft),new dt(32,128,258,1024,ft),new dt(32,258,258,4096,ft)],c.deflateInit=function(r,Y){return zt(r,Y,g,15,8,0)},c.deflateInit2=zt,c.deflateReset=Ct,c.deflateResetKeep=yt,c.deflateSetHeader=function(r,Y){return r&&r.state?r.state.wrap!==2?p:(r.state.gzhead=Y,u):p},c.deflate=function(r,Y){var W,_,m,S;if(!r||!r.state||5<Y||Y<0)return r?st(r,p):p;if(_=r.state,!r.output||!r.input&&r.avail_in!==0||_.status===666&&Y!==w)return st(r,r.avail_out===0?-5:p);if(_.strm=r,W=_.last_flush,_.last_flush=Y,_.status===E)if(_.wrap===2)r.adler=0,X(_,31),X(_,139),X(_,8),_.gzhead?(X(_,(_.gzhead.text?1:0)+(_.gzhead.hcrc?2:0)+(_.gzhead.extra?4:0)+(_.gzhead.name?8:0)+(_.gzhead.comment?16:0)),X(_,255&_.gzhead.time),X(_,_.gzhead.time>>8&255),X(_,_.gzhead.time>>16&255),X(_,_.gzhead.time>>24&255),X(_,_.level===9?2:2<=_.strategy||_.level<2?4:0),X(_,255&_.gzhead.os),_.gzhead.extra&&_.gzhead.extra.length&&(X(_,255&_.gzhead.extra.length),X(_,_.gzhead.extra.length>>8&255)),_.gzhead.hcrc&&(r.adler=v(r.adler,_.pending_buf,_.pending,0)),_.gzindex=0,_.status=69):(X(_,0),X(_,0),X(_,0),X(_,0),X(_,0),X(_,_.level===9?2:2<=_.strategy||_.level<2?4:0),X(_,3),_.status=P);else{var Q=g+(_.w_bits-8<<4)<<8;Q|=(2<=_.strategy||_.level<2?0:_.level<6?1:_.level===6?2:3)<<6,_.strstart!==0&&(Q|=32),Q+=31-Q%31,_.status=P,H(_,Q),_.strstart!==0&&(H(_,r.adler>>>16),H(_,65535&r.adler)),r.adler=1}if(_.status===69)if(_.gzhead.extra){for(m=_.pending;_.gzindex<(65535&_.gzhead.extra.length)&&(_.pending!==_.pending_buf_size||(_.gzhead.hcrc&&_.pending>m&&(r.adler=v(r.adler,_.pending_buf,_.pending-m,m)),A(r),m=_.pending,_.pending!==_.pending_buf_size));)X(_,255&_.gzhead.extra[_.gzindex]),_.gzindex++;_.gzhead.hcrc&&_.pending>m&&(r.adler=v(r.adler,_.pending_buf,_.pending-m,m)),_.gzindex===_.gzhead.extra.length&&(_.gzindex=0,_.status=73)}else _.status=73;if(_.status===73)if(_.gzhead.name){m=_.pending;do{if(_.pending===_.pending_buf_size&&(_.gzhead.hcrc&&_.pending>m&&(r.adler=v(r.adler,_.pending_buf,_.pending-m,m)),A(r),m=_.pending,_.pending===_.pending_buf_size)){S=1;break}S=_.gzindex<_.gzhead.name.length?255&_.gzhead.name.charCodeAt(_.gzindex++):0,X(_,S)}while(S!==0);_.gzhead.hcrc&&_.pending>m&&(r.adler=v(r.adler,_.pending_buf,_.pending-m,m)),S===0&&(_.gzindex=0,_.status=91)}else _.status=91;if(_.status===91)if(_.gzhead.comment){m=_.pending;do{if(_.pending===_.pending_buf_size&&(_.gzhead.hcrc&&_.pending>m&&(r.adler=v(r.adler,_.pending_buf,_.pending-m,m)),A(r),m=_.pending,_.pending===_.pending_buf_size)){S=1;break}S=_.gzindex<_.gzhead.comment.length?255&_.gzhead.comment.charCodeAt(_.gzindex++):0,X(_,S)}while(S!==0);_.gzhead.hcrc&&_.pending>m&&(r.adler=v(r.adler,_.pending_buf,_.pending-m,m)),S===0&&(_.status=103)}else _.status=103;if(_.status===103&&(_.gzhead.hcrc?(_.pending+2>_.pending_buf_size&&A(r),_.pending+2<=_.pending_buf_size&&(X(_,255&r.adler),X(_,r.adler>>8&255),r.adler=0,_.status=P)):_.status=P),_.pending!==0){if(A(r),r.avail_out===0)return _.last_flush=-1,u}else if(r.avail_in===0&&V(Y)<=V(W)&&Y!==w)return st(r,-5);if(_.status===666&&r.avail_in!==0)return st(r,-5);if(r.avail_in!==0||_.lookahead!==0||Y!==y&&_.status!==666){var $=_.strategy===2?function(D,rt){for(var it;;){if(D.lookahead===0&&(ht(D),D.lookahead===0)){if(rt===y)return s;break}if(D.match_length=0,it=e._tr_tally(D,0,D.window[D.strstart]),D.lookahead--,D.strstart++,it&&(N(D,!1),D.strm.avail_out===0))return s}return D.insert=0,rt===w?(N(D,!0),D.strm.avail_out===0?J:R):D.last_lit&&(N(D,!1),D.strm.avail_out===0)?s:O}(_,Y):_.strategy===3?function(D,rt){for(var it,nt,ct,kt,_t=D.window;;){if(D.lookahead<=L){if(ht(D),D.lookahead<=L&&rt===y)return s;if(D.lookahead===0)break}if(D.match_length=0,D.lookahead>=B&&0<D.strstart&&(nt=_t[ct=D.strstart-1])===_t[++ct]&&nt===_t[++ct]&&nt===_t[++ct]){kt=D.strstart+L;do;while(nt===_t[++ct]&&nt===_t[++ct]&&nt===_t[++ct]&&nt===_t[++ct]&&nt===_t[++ct]&&nt===_t[++ct]&&nt===_t[++ct]&&nt===_t[++ct]&&ct<kt);D.match_length=L-(kt-ct),D.match_length>D.lookahead&&(D.match_length=D.lookahead)}if(D.match_length>=B?(it=e._tr_tally(D,1,D.match_length-B),D.lookahead-=D.match_length,D.strstart+=D.match_length,D.match_length=0):(it=e._tr_tally(D,0,D.window[D.strstart]),D.lookahead--,D.strstart++),it&&(N(D,!1),D.strm.avail_out===0))return s}return D.insert=0,rt===w?(N(D,!0),D.strm.avail_out===0?J:R):D.last_lit&&(N(D,!1),D.strm.avail_out===0)?s:O}(_,Y):i[_.level].func(_,Y);if($!==J&&$!==R||(_.status=666),$===s||$===J)return r.avail_out===0&&(_.last_flush=-1),u;if($===O&&(Y===1?e._tr_align(_):Y!==5&&(e._tr_stored_block(_,0,0,!1),Y===3&&(q(_.head),_.lookahead===0&&(_.strstart=0,_.block_start=0,_.insert=0))),A(r),r.avail_out===0))return _.last_flush=-1,u}return Y!==w?u:_.wrap<=0?1:(_.wrap===2?(X(_,255&r.adler),X(_,r.adler>>8&255),X(_,r.adler>>16&255),X(_,r.adler>>24&255),X(_,255&r.total_in),X(_,r.total_in>>8&255),X(_,r.total_in>>16&255),X(_,r.total_in>>24&255)):(H(_,r.adler>>>16),H(_,65535&r.adler)),A(r),0<_.wrap&&(_.wrap=-_.wrap),_.pending!==0?u:1)},c.deflateEnd=function(r){var Y;return r&&r.state?(Y=r.state.status)!==E&&Y!==69&&Y!==73&&Y!==91&&Y!==103&&Y!==P&&Y!==666?st(r,p):(r.state=null,Y===P?st(r,-3):u):p},c.deflateSetDictionary=function(r,Y){var W,_,m,S,Q,$,D,rt,it=Y.length;if(!r||!r.state||(S=(W=r.state).wrap)===2||S===1&&W.status!==E||W.lookahead)return p;for(S===1&&(r.adler=d(r.adler,Y,it,0)),W.wrap=0,it>=W.w_size&&(S===0&&(q(W.head),W.strstart=0,W.block_start=0,W.insert=0),rt=new a.Buf8(W.w_size),a.arraySet(rt,Y,it-W.w_size,W.w_size,0),Y=rt,it=W.w_size),Q=r.avail_in,$=r.next_in,D=r.input,r.avail_in=it,r.next_in=0,r.input=Y,ht(W);W.lookahead>=B;){for(_=W.strstart,m=W.lookahead-(B-1);W.ins_h=(W.ins_h<<W.hash_shift^W.window[_+B-1])&W.hash_mask,W.prev[_&W.w_mask]=W.head[W.ins_h],W.head[W.ins_h]=_,_++,--m;);W.strstart=_,W.lookahead=B-1,ht(W)}return W.strstart+=W.lookahead,W.block_start=W.strstart,W.insert=W.lookahead,W.lookahead=0,W.match_length=W.prev_length=B-1,W.match_available=0,r.next_in=$,r.input=D,r.avail_in=Q,W.wrap=S,u},c.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,n,c){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,n,c){n.exports=function(i,a){var e,d,v,b,y,w,u,p,o,l,f,g,k,z,T,U,x,M,B,L,et,E,P,s,O;e=i.state,d=i.next_in,s=i.input,v=d+(i.avail_in-5),b=i.next_out,O=i.output,y=b-(a-i.avail_out),w=b+(i.avail_out-257),u=e.dmax,p=e.wsize,o=e.whave,l=e.wnext,f=e.window,g=e.hold,k=e.bits,z=e.lencode,T=e.distcode,U=(1<<e.lenbits)-1,x=(1<<e.distbits)-1;t:do{k<15&&(g+=s[d++]<<k,k+=8,g+=s[d++]<<k,k+=8),M=z[g&U];e:for(;;){if(g>>>=B=M>>>24,k-=B,(B=M>>>16&255)===0)O[b++]=65535&M;else{if(!(16&B)){if(!(64&B)){M=z[(65535&M)+(g&(1<<B)-1)];continue e}if(32&B){e.mode=12;break t}i.msg="invalid literal/length code",e.mode=30;break t}L=65535&M,(B&=15)&&(k<B&&(g+=s[d++]<<k,k+=8),L+=g&(1<<B)-1,g>>>=B,k-=B),k<15&&(g+=s[d++]<<k,k+=8,g+=s[d++]<<k,k+=8),M=T[g&x];n:for(;;){if(g>>>=B=M>>>24,k-=B,!(16&(B=M>>>16&255))){if(!(64&B)){M=T[(65535&M)+(g&(1<<B)-1)];continue n}i.msg="invalid distance code",e.mode=30;break t}if(et=65535&M,k<(B&=15)&&(g+=s[d++]<<k,(k+=8)<B&&(g+=s[d++]<<k,k+=8)),u<(et+=g&(1<<B)-1)){i.msg="invalid distance too far back",e.mode=30;break t}if(g>>>=B,k-=B,(B=b-y)<et){if(o<(B=et-B)&&e.sane){i.msg="invalid distance too far back",e.mode=30;break t}if(P=f,(E=0)===l){if(E+=p-B,B<L){for(L-=B;O[b++]=f[E++],--B;);E=b-et,P=O}}else if(l<B){if(E+=p+l-B,(B-=l)<L){for(L-=B;O[b++]=f[E++],--B;);if(E=0,l<L){for(L-=B=l;O[b++]=f[E++],--B;);E=b-et,P=O}}}else if(E+=l-B,B<L){for(L-=B;O[b++]=f[E++],--B;);E=b-et,P=O}for(;2<L;)O[b++]=P[E++],O[b++]=P[E++],O[b++]=P[E++],L-=3;L&&(O[b++]=P[E++],1<L&&(O[b++]=P[E++]))}else{for(E=b-et;O[b++]=O[E++],O[b++]=O[E++],O[b++]=O[E++],2<(L-=3););L&&(O[b++]=O[E++],1<L&&(O[b++]=O[E++]))}break}}break}}while(d<v&&b<w);d-=L=k>>3,g&=(1<<(k-=L<<3))-1,i.next_in=d,i.next_out=b,i.avail_in=d<v?v-d+5:5-(d-v),i.avail_out=b<w?w-b+257:257-(b-w),e.hold=g,e.bits=k}},{}],49:[function(t,n,c){var i=t("../utils/common"),a=t("./adler32"),e=t("./crc32"),d=t("./inffast"),v=t("./inftrees"),b=1,y=2,w=0,u=-2,p=1,o=852,l=592;function f(E){return(E>>>24&255)+(E>>>8&65280)+((65280&E)<<8)+((255&E)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function k(E){var P;return E&&E.state?(P=E.state,E.total_in=E.total_out=P.total=0,E.msg="",P.wrap&&(E.adler=1&P.wrap),P.mode=p,P.last=0,P.havedict=0,P.dmax=32768,P.head=null,P.hold=0,P.bits=0,P.lencode=P.lendyn=new i.Buf32(o),P.distcode=P.distdyn=new i.Buf32(l),P.sane=1,P.back=-1,w):u}function z(E){var P;return E&&E.state?((P=E.state).wsize=0,P.whave=0,P.wnext=0,k(E)):u}function T(E,P){var s,O;return E&&E.state?(O=E.state,P<0?(s=0,P=-P):(s=1+(P>>4),P<48&&(P&=15)),P&&(P<8||15<P)?u:(O.window!==null&&O.wbits!==P&&(O.window=null),O.wrap=s,O.wbits=P,z(E))):u}function U(E,P){var s,O;return E?(O=new g,(E.state=O).window=null,(s=T(E,P))!==w&&(E.state=null),s):u}var x,M,B=!0;function L(E){if(B){var P;for(x=new i.Buf32(512),M=new i.Buf32(32),P=0;P<144;)E.lens[P++]=8;for(;P<256;)E.lens[P++]=9;for(;P<280;)E.lens[P++]=7;for(;P<288;)E.lens[P++]=8;for(v(b,E.lens,0,288,x,0,E.work,{bits:9}),P=0;P<32;)E.lens[P++]=5;v(y,E.lens,0,32,M,0,E.work,{bits:5}),B=!1}E.lencode=x,E.lenbits=9,E.distcode=M,E.distbits=5}function et(E,P,s,O){var J,R=E.state;return R.window===null&&(R.wsize=1<<R.wbits,R.wnext=0,R.whave=0,R.window=new i.Buf8(R.wsize)),O>=R.wsize?(i.arraySet(R.window,P,s-R.wsize,R.wsize,0),R.wnext=0,R.whave=R.wsize):(O<(J=R.wsize-R.wnext)&&(J=O),i.arraySet(R.window,P,s-O,J,R.wnext),(O-=J)?(i.arraySet(R.window,P,s-O,O,0),R.wnext=O,R.whave=R.wsize):(R.wnext+=J,R.wnext===R.wsize&&(R.wnext=0),R.whave<R.wsize&&(R.whave+=J))),0}c.inflateReset=z,c.inflateReset2=T,c.inflateResetKeep=k,c.inflateInit=function(E){return U(E,15)},c.inflateInit2=U,c.inflate=function(E,P){var s,O,J,R,st,V,q,A,N,X,H,K,ht,St,ft,dt,It,yt,Ct,zt,r,Y,W,_,m=0,S=new i.Buf8(4),Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!E||!E.state||!E.output||!E.input&&E.avail_in!==0)return u;(s=E.state).mode===12&&(s.mode=13),st=E.next_out,J=E.output,q=E.avail_out,R=E.next_in,O=E.input,V=E.avail_in,A=s.hold,N=s.bits,X=V,H=q,Y=w;t:for(;;)switch(s.mode){case p:if(s.wrap===0){s.mode=13;break}for(;N<16;){if(V===0)break t;V--,A+=O[R++]<<N,N+=8}if(2&s.wrap&&A===35615){S[s.check=0]=255&A,S[1]=A>>>8&255,s.check=e(s.check,S,2,0),N=A=0,s.mode=2;break}if(s.flags=0,s.head&&(s.head.done=!1),!(1&s.wrap)||(((255&A)<<8)+(A>>8))%31){E.msg="incorrect header check",s.mode=30;break}if((15&A)!=8){E.msg="unknown compression method",s.mode=30;break}if(N-=4,r=8+(15&(A>>>=4)),s.wbits===0)s.wbits=r;else if(r>s.wbits){E.msg="invalid window size",s.mode=30;break}s.dmax=1<<r,E.adler=s.check=1,s.mode=512&A?10:12,N=A=0;break;case 2:for(;N<16;){if(V===0)break t;V--,A+=O[R++]<<N,N+=8}if(s.flags=A,(255&s.flags)!=8){E.msg="unknown compression method",s.mode=30;break}if(57344&s.flags){E.msg="unknown header flags set",s.mode=30;break}s.head&&(s.head.text=A>>8&1),512&s.flags&&(S[0]=255&A,S[1]=A>>>8&255,s.check=e(s.check,S,2,0)),N=A=0,s.mode=3;case 3:for(;N<32;){if(V===0)break t;V--,A+=O[R++]<<N,N+=8}s.head&&(s.head.time=A),512&s.flags&&(S[0]=255&A,S[1]=A>>>8&255,S[2]=A>>>16&255,S[3]=A>>>24&255,s.check=e(s.check,S,4,0)),N=A=0,s.mode=4;case 4:for(;N<16;){if(V===0)break t;V--,A+=O[R++]<<N,N+=8}s.head&&(s.head.xflags=255&A,s.head.os=A>>8),512&s.flags&&(S[0]=255&A,S[1]=A>>>8&255,s.check=e(s.check,S,2,0)),N=A=0,s.mode=5;case 5:if(1024&s.flags){for(;N<16;){if(V===0)break t;V--,A+=O[R++]<<N,N+=8}s.length=A,s.head&&(s.head.extra_len=A),512&s.flags&&(S[0]=255&A,S[1]=A>>>8&255,s.check=e(s.check,S,2,0)),N=A=0}else s.head&&(s.head.extra=null);s.mode=6;case 6:if(1024&s.flags&&(V<(K=s.length)&&(K=V),K&&(s.head&&(r=s.head.extra_len-s.length,s.head.extra||(s.head.extra=new Array(s.head.extra_len)),i.arraySet(s.head.extra,O,R,K,r)),512&s.flags&&(s.check=e(s.check,O,K,R)),V-=K,R+=K,s.length-=K),s.length))break t;s.length=0,s.mode=7;case 7:if(2048&s.flags){if(V===0)break t;for(K=0;r=O[R+K++],s.head&&r&&s.length<65536&&(s.head.name+=String.fromCharCode(r)),r&&K<V;);if(512&s.flags&&(s.check=e(s.check,O,K,R)),V-=K,R+=K,r)break t}else s.head&&(s.head.name=null);s.length=0,s.mode=8;case 8:if(4096&s.flags){if(V===0)break t;for(K=0;r=O[R+K++],s.head&&r&&s.length<65536&&(s.head.comment+=String.fromCharCode(r)),r&&K<V;);if(512&s.flags&&(s.check=e(s.check,O,K,R)),V-=K,R+=K,r)break t}else s.head&&(s.head.comment=null);s.mode=9;case 9:if(512&s.flags){for(;N<16;){if(V===0)break t;V--,A+=O[R++]<<N,N+=8}if(A!==(65535&s.check)){E.msg="header crc mismatch",s.mode=30;break}N=A=0}s.head&&(s.head.hcrc=s.flags>>9&1,s.head.done=!0),E.adler=s.check=0,s.mode=12;break;case 10:for(;N<32;){if(V===0)break t;V--,A+=O[R++]<<N,N+=8}E.adler=s.check=f(A),N=A=0,s.mode=11;case 11:if(s.havedict===0)return E.next_out=st,E.avail_out=q,E.next_in=R,E.avail_in=V,s.hold=A,s.bits=N,2;E.adler=s.check=1,s.mode=12;case 12:if(P===5||P===6)break t;case 13:if(s.last){A>>>=7&N,N-=7&N,s.mode=27;break}for(;N<3;){if(V===0)break t;V--,A+=O[R++]<<N,N+=8}switch(s.last=1&A,N-=1,3&(A>>>=1)){case 0:s.mode=14;break;case 1:if(L(s),s.mode=20,P!==6)break;A>>>=2,N-=2;break t;case 2:s.mode=17;break;case 3:E.msg="invalid block type",s.mode=30}A>>>=2,N-=2;break;case 14:for(A>>>=7&N,N-=7&N;N<32;){if(V===0)break t;V--,A+=O[R++]<<N,N+=8}if((65535&A)!=(A>>>16^65535)){E.msg="invalid stored block lengths",s.mode=30;break}if(s.length=65535&A,N=A=0,s.mode=15,P===6)break t;case 15:s.mode=16;case 16:if(K=s.length){if(V<K&&(K=V),q<K&&(K=q),K===0)break t;i.arraySet(J,O,R,K,st),V-=K,R+=K,q-=K,st+=K,s.length-=K;break}s.mode=12;break;case 17:for(;N<14;){if(V===0)break t;V--,A+=O[R++]<<N,N+=8}if(s.nlen=257+(31&A),A>>>=5,N-=5,s.ndist=1+(31&A),A>>>=5,N-=5,s.ncode=4+(15&A),A>>>=4,N-=4,286<s.nlen||30<s.ndist){E.msg="too many length or distance symbols",s.mode=30;break}s.have=0,s.mode=18;case 18:for(;s.have<s.ncode;){for(;N<3;){if(V===0)break t;V--,A+=O[R++]<<N,N+=8}s.lens[Q[s.have++]]=7&A,A>>>=3,N-=3}for(;s.have<19;)s.lens[Q[s.have++]]=0;if(s.lencode=s.lendyn,s.lenbits=7,W={bits:s.lenbits},Y=v(0,s.lens,0,19,s.lencode,0,s.work,W),s.lenbits=W.bits,Y){E.msg="invalid code lengths set",s.mode=30;break}s.have=0,s.mode=19;case 19:for(;s.have<s.nlen+s.ndist;){for(;dt=(m=s.lencode[A&(1<<s.lenbits)-1])>>>16&255,It=65535&m,!((ft=m>>>24)<=N);){if(V===0)break t;V--,A+=O[R++]<<N,N+=8}if(It<16)A>>>=ft,N-=ft,s.lens[s.have++]=It;else{if(It===16){for(_=ft+2;N<_;){if(V===0)break t;V--,A+=O[R++]<<N,N+=8}if(A>>>=ft,N-=ft,s.have===0){E.msg="invalid bit length repeat",s.mode=30;break}r=s.lens[s.have-1],K=3+(3&A),A>>>=2,N-=2}else if(It===17){for(_=ft+3;N<_;){if(V===0)break t;V--,A+=O[R++]<<N,N+=8}N-=ft,r=0,K=3+(7&(A>>>=ft)),A>>>=3,N-=3}else{for(_=ft+7;N<_;){if(V===0)break t;V--,A+=O[R++]<<N,N+=8}N-=ft,r=0,K=11+(127&(A>>>=ft)),A>>>=7,N-=7}if(s.have+K>s.nlen+s.ndist){E.msg="invalid bit length repeat",s.mode=30;break}for(;K--;)s.lens[s.have++]=r}}if(s.mode===30)break;if(s.lens[256]===0){E.msg="invalid code -- missing end-of-block",s.mode=30;break}if(s.lenbits=9,W={bits:s.lenbits},Y=v(b,s.lens,0,s.nlen,s.lencode,0,s.work,W),s.lenbits=W.bits,Y){E.msg="invalid literal/lengths set",s.mode=30;break}if(s.distbits=6,s.distcode=s.distdyn,W={bits:s.distbits},Y=v(y,s.lens,s.nlen,s.ndist,s.distcode,0,s.work,W),s.distbits=W.bits,Y){E.msg="invalid distances set",s.mode=30;break}if(s.mode=20,P===6)break t;case 20:s.mode=21;case 21:if(6<=V&&258<=q){E.next_out=st,E.avail_out=q,E.next_in=R,E.avail_in=V,s.hold=A,s.bits=N,d(E,H),st=E.next_out,J=E.output,q=E.avail_out,R=E.next_in,O=E.input,V=E.avail_in,A=s.hold,N=s.bits,s.mode===12&&(s.back=-1);break}for(s.back=0;dt=(m=s.lencode[A&(1<<s.lenbits)-1])>>>16&255,It=65535&m,!((ft=m>>>24)<=N);){if(V===0)break t;V--,A+=O[R++]<<N,N+=8}if(dt&&!(240&dt)){for(yt=ft,Ct=dt,zt=It;dt=(m=s.lencode[zt+((A&(1<<yt+Ct)-1)>>yt)])>>>16&255,It=65535&m,!(yt+(ft=m>>>24)<=N);){if(V===0)break t;V--,A+=O[R++]<<N,N+=8}A>>>=yt,N-=yt,s.back+=yt}if(A>>>=ft,N-=ft,s.back+=ft,s.length=It,dt===0){s.mode=26;break}if(32&dt){s.back=-1,s.mode=12;break}if(64&dt){E.msg="invalid literal/length code",s.mode=30;break}s.extra=15&dt,s.mode=22;case 22:if(s.extra){for(_=s.extra;N<_;){if(V===0)break t;V--,A+=O[R++]<<N,N+=8}s.length+=A&(1<<s.extra)-1,A>>>=s.extra,N-=s.extra,s.back+=s.extra}s.was=s.length,s.mode=23;case 23:for(;dt=(m=s.distcode[A&(1<<s.distbits)-1])>>>16&255,It=65535&m,!((ft=m>>>24)<=N);){if(V===0)break t;V--,A+=O[R++]<<N,N+=8}if(!(240&dt)){for(yt=ft,Ct=dt,zt=It;dt=(m=s.distcode[zt+((A&(1<<yt+Ct)-1)>>yt)])>>>16&255,It=65535&m,!(yt+(ft=m>>>24)<=N);){if(V===0)break t;V--,A+=O[R++]<<N,N+=8}A>>>=yt,N-=yt,s.back+=yt}if(A>>>=ft,N-=ft,s.back+=ft,64&dt){E.msg="invalid distance code",s.mode=30;break}s.offset=It,s.extra=15&dt,s.mode=24;case 24:if(s.extra){for(_=s.extra;N<_;){if(V===0)break t;V--,A+=O[R++]<<N,N+=8}s.offset+=A&(1<<s.extra)-1,A>>>=s.extra,N-=s.extra,s.back+=s.extra}if(s.offset>s.dmax){E.msg="invalid distance too far back",s.mode=30;break}s.mode=25;case 25:if(q===0)break t;if(K=H-q,s.offset>K){if((K=s.offset-K)>s.whave&&s.sane){E.msg="invalid distance too far back",s.mode=30;break}ht=K>s.wnext?(K-=s.wnext,s.wsize-K):s.wnext-K,K>s.length&&(K=s.length),St=s.window}else St=J,ht=st-s.offset,K=s.length;for(q<K&&(K=q),q-=K,s.length-=K;J[st++]=St[ht++],--K;);s.length===0&&(s.mode=21);break;case 26:if(q===0)break t;J[st++]=s.length,q--,s.mode=21;break;case 27:if(s.wrap){for(;N<32;){if(V===0)break t;V--,A|=O[R++]<<N,N+=8}if(H-=q,E.total_out+=H,s.total+=H,H&&(E.adler=s.check=s.flags?e(s.check,J,H,st-H):a(s.check,J,H,st-H)),H=q,(s.flags?A:f(A))!==s.check){E.msg="incorrect data check",s.mode=30;break}N=A=0}s.mode=28;case 28:if(s.wrap&&s.flags){for(;N<32;){if(V===0)break t;V--,A+=O[R++]<<N,N+=8}if(A!==(4294967295&s.total)){E.msg="incorrect length check",s.mode=30;break}N=A=0}s.mode=29;case 29:Y=1;break t;case 30:Y=-3;break t;case 31:return-4;case 32:default:return u}return E.next_out=st,E.avail_out=q,E.next_in=R,E.avail_in=V,s.hold=A,s.bits=N,(s.wsize||H!==E.avail_out&&s.mode<30&&(s.mode<27||P!==4))&&et(E,E.output,E.next_out,H-E.avail_out)?(s.mode=31,-4):(X-=E.avail_in,H-=E.avail_out,E.total_in+=X,E.total_out+=H,s.total+=H,s.wrap&&H&&(E.adler=s.check=s.flags?e(s.check,J,H,E.next_out-H):a(s.check,J,H,E.next_out-H)),E.data_type=s.bits+(s.last?64:0)+(s.mode===12?128:0)+(s.mode===20||s.mode===15?256:0),(X==0&&H===0||P===4)&&Y===w&&(Y=-5),Y)},c.inflateEnd=function(E){if(!E||!E.state)return u;var P=E.state;return P.window&&(P.window=null),E.state=null,w},c.inflateGetHeader=function(E,P){var s;return E&&E.state&&2&(s=E.state).wrap?((s.head=P).done=!1,w):u},c.inflateSetDictionary=function(E,P){var s,O=P.length;return E&&E.state?(s=E.state).wrap!==0&&s.mode!==11?u:s.mode===11&&a(1,P,O,0)!==s.check?-3:et(E,P,O,O)?(s.mode=31,-4):(s.havedict=1,w):u},c.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,n,c){var i=t("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],e=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],v=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(b,y,w,u,p,o,l,f){var g,k,z,T,U,x,M,B,L,et=f.bits,E=0,P=0,s=0,O=0,J=0,R=0,st=0,V=0,q=0,A=0,N=null,X=0,H=new i.Buf16(16),K=new i.Buf16(16),ht=null,St=0;for(E=0;E<=15;E++)H[E]=0;for(P=0;P<u;P++)H[y[w+P]]++;for(J=et,O=15;1<=O&&H[O]===0;O--);if(O<J&&(J=O),O===0)return p[o++]=20971520,p[o++]=20971520,f.bits=1,0;for(s=1;s<O&&H[s]===0;s++);for(J<s&&(J=s),E=V=1;E<=15;E++)if(V<<=1,(V-=H[E])<0)return-1;if(0<V&&(b===0||O!==1))return-1;for(K[1]=0,E=1;E<15;E++)K[E+1]=K[E]+H[E];for(P=0;P<u;P++)y[w+P]!==0&&(l[K[y[w+P]]++]=P);if(x=b===0?(N=ht=l,19):b===1?(N=a,X-=257,ht=e,St-=257,256):(N=d,ht=v,-1),E=s,U=o,st=P=A=0,z=-1,T=(q=1<<(R=J))-1,b===1&&852<q||b===2&&592<q)return 1;for(;;){for(M=E-st,L=l[P]<x?(B=0,l[P]):l[P]>x?(B=ht[St+l[P]],N[X+l[P]]):(B=96,0),g=1<<E-st,s=k=1<<R;p[U+(A>>st)+(k-=g)]=M<<24|B<<16|L|0,k!==0;);for(g=1<<E-1;A&g;)g>>=1;if(g!==0?(A&=g-1,A+=g):A=0,P++,--H[E]==0){if(E===O)break;E=y[w+l[P]]}if(J<E&&(A&T)!==z){for(st===0&&(st=J),U+=s,V=1<<(R=E-st);R+st<O&&!((V-=H[R+st])<=0);)R++,V<<=1;if(q+=1<<R,b===1&&852<q||b===2&&592<q)return 1;p[z=A&T]=J<<24|R<<16|U-o|0}}return A!==0&&(p[U+A]=E-st<<24|64<<16|0),f.bits=J,0}},{"../utils/common":41}],51:[function(t,n,c){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,n,c){var i=t("../utils/common"),a=0,e=1;function d(m){for(var S=m.length;0<=--S;)m[S]=0}var v=0,b=29,y=256,w=y+1+b,u=30,p=19,o=2*w+1,l=15,f=16,g=7,k=256,z=16,T=17,U=18,x=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],M=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],L=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],et=new Array(2*(w+2));d(et);var E=new Array(2*u);d(E);var P=new Array(512);d(P);var s=new Array(256);d(s);var O=new Array(b);d(O);var J,R,st,V=new Array(u);function q(m,S,Q,$,D){this.static_tree=m,this.extra_bits=S,this.extra_base=Q,this.elems=$,this.max_length=D,this.has_stree=m&&m.length}function A(m,S){this.dyn_tree=m,this.max_code=0,this.stat_desc=S}function N(m){return m<256?P[m]:P[256+(m>>>7)]}function X(m,S){m.pending_buf[m.pending++]=255&S,m.pending_buf[m.pending++]=S>>>8&255}function H(m,S,Q){m.bi_valid>f-Q?(m.bi_buf|=S<<m.bi_valid&65535,X(m,m.bi_buf),m.bi_buf=S>>f-m.bi_valid,m.bi_valid+=Q-f):(m.bi_buf|=S<<m.bi_valid&65535,m.bi_valid+=Q)}function K(m,S,Q){H(m,Q[2*S],Q[2*S+1])}function ht(m,S){for(var Q=0;Q|=1&m,m>>>=1,Q<<=1,0<--S;);return Q>>>1}function St(m,S,Q){var $,D,rt=new Array(l+1),it=0;for($=1;$<=l;$++)rt[$]=it=it+Q[$-1]<<1;for(D=0;D<=S;D++){var nt=m[2*D+1];nt!==0&&(m[2*D]=ht(rt[nt]++,nt))}}function ft(m){var S;for(S=0;S<w;S++)m.dyn_ltree[2*S]=0;for(S=0;S<u;S++)m.dyn_dtree[2*S]=0;for(S=0;S<p;S++)m.bl_tree[2*S]=0;m.dyn_ltree[2*k]=1,m.opt_len=m.static_len=0,m.last_lit=m.matches=0}function dt(m){8<m.bi_valid?X(m,m.bi_buf):0<m.bi_valid&&(m.pending_buf[m.pending++]=m.bi_buf),m.bi_buf=0,m.bi_valid=0}function It(m,S,Q,$){var D=2*S,rt=2*Q;return m[D]<m[rt]||m[D]===m[rt]&&$[S]<=$[Q]}function yt(m,S,Q){for(var $=m.heap[Q],D=Q<<1;D<=m.heap_len&&(D<m.heap_len&&It(S,m.heap[D+1],m.heap[D],m.depth)&&D++,!It(S,$,m.heap[D],m.depth));)m.heap[Q]=m.heap[D],Q=D,D<<=1;m.heap[Q]=$}function Ct(m,S,Q){var $,D,rt,it,nt=0;if(m.last_lit!==0)for(;$=m.pending_buf[m.d_buf+2*nt]<<8|m.pending_buf[m.d_buf+2*nt+1],D=m.pending_buf[m.l_buf+nt],nt++,$===0?K(m,D,S):(K(m,(rt=s[D])+y+1,S),(it=x[rt])!==0&&H(m,D-=O[rt],it),K(m,rt=N(--$),Q),(it=M[rt])!==0&&H(m,$-=V[rt],it)),nt<m.last_lit;);K(m,k,S)}function zt(m,S){var Q,$,D,rt=S.dyn_tree,it=S.stat_desc.static_tree,nt=S.stat_desc.has_stree,ct=S.stat_desc.elems,kt=-1;for(m.heap_len=0,m.heap_max=o,Q=0;Q<ct;Q++)rt[2*Q]!==0?(m.heap[++m.heap_len]=kt=Q,m.depth[Q]=0):rt[2*Q+1]=0;for(;m.heap_len<2;)rt[2*(D=m.heap[++m.heap_len]=kt<2?++kt:0)]=1,m.depth[D]=0,m.opt_len--,nt&&(m.static_len-=it[2*D+1]);for(S.max_code=kt,Q=m.heap_len>>1;1<=Q;Q--)yt(m,rt,Q);for(D=ct;Q=m.heap[1],m.heap[1]=m.heap[m.heap_len--],yt(m,rt,1),$=m.heap[1],m.heap[--m.heap_max]=Q,m.heap[--m.heap_max]=$,rt[2*D]=rt[2*Q]+rt[2*$],m.depth[D]=(m.depth[Q]>=m.depth[$]?m.depth[Q]:m.depth[$])+1,rt[2*Q+1]=rt[2*$+1]=D,m.heap[1]=D++,yt(m,rt,1),2<=m.heap_len;);m.heap[--m.heap_max]=m.heap[1],function(_t,At){var Mt,Ot,Lt,ut,re,se,Nt=At.dyn_tree,Ut=At.max_code,ke=At.stat_desc.static_tree,_e=At.stat_desc.has_stree,Ht=At.stat_desc.extra_bits,Pt=At.stat_desc.extra_base,Ft=At.stat_desc.max_length,ie=0;for(ut=0;ut<=l;ut++)_t.bl_count[ut]=0;for(Nt[2*_t.heap[_t.heap_max]+1]=0,Mt=_t.heap_max+1;Mt<o;Mt++)Ft<(ut=Nt[2*Nt[2*(Ot=_t.heap[Mt])+1]+1]+1)&&(ut=Ft,ie++),Nt[2*Ot+1]=ut,Ut<Ot||(_t.bl_count[ut]++,re=0,Pt<=Ot&&(re=Ht[Ot-Pt]),se=Nt[2*Ot],_t.opt_len+=se*(ut+re),_e&&(_t.static_len+=se*(ke[2*Ot+1]+re)));if(ie!==0){do{for(ut=Ft-1;_t.bl_count[ut]===0;)ut--;_t.bl_count[ut]--,_t.bl_count[ut+1]+=2,_t.bl_count[Ft]--,ie-=2}while(0<ie);for(ut=Ft;ut!==0;ut--)for(Ot=_t.bl_count[ut];Ot!==0;)Ut<(Lt=_t.heap[--Mt])||(Nt[2*Lt+1]!==ut&&(_t.opt_len+=(ut-Nt[2*Lt+1])*Nt[2*Lt],Nt[2*Lt+1]=ut),Ot--)}}(m,S),St(rt,kt,m.bl_count)}function r(m,S,Q){var $,D,rt=-1,it=S[1],nt=0,ct=7,kt=4;for(it===0&&(ct=138,kt=3),S[2*(Q+1)+1]=65535,$=0;$<=Q;$++)D=it,it=S[2*($+1)+1],++nt<ct&&D===it||(nt<kt?m.bl_tree[2*D]+=nt:D!==0?(D!==rt&&m.bl_tree[2*D]++,m.bl_tree[2*z]++):nt<=10?m.bl_tree[2*T]++:m.bl_tree[2*U]++,rt=D,kt=(nt=0)===it?(ct=138,3):D===it?(ct=6,3):(ct=7,4))}function Y(m,S,Q){var $,D,rt=-1,it=S[1],nt=0,ct=7,kt=4;for(it===0&&(ct=138,kt=3),$=0;$<=Q;$++)if(D=it,it=S[2*($+1)+1],!(++nt<ct&&D===it)){if(nt<kt)for(;K(m,D,m.bl_tree),--nt!=0;);else D!==0?(D!==rt&&(K(m,D,m.bl_tree),nt--),K(m,z,m.bl_tree),H(m,nt-3,2)):nt<=10?(K(m,T,m.bl_tree),H(m,nt-3,3)):(K(m,U,m.bl_tree),H(m,nt-11,7));rt=D,kt=(nt=0)===it?(ct=138,3):D===it?(ct=6,3):(ct=7,4)}}d(V);var W=!1;function _(m,S,Q,$){H(m,(v<<1)+($?1:0),3),function(D,rt,it,nt){dt(D),nt&&(X(D,it),X(D,~it)),i.arraySet(D.pending_buf,D.window,rt,it,D.pending),D.pending+=it}(m,S,Q,!0)}c._tr_init=function(m){W||(function(){var S,Q,$,D,rt,it=new Array(l+1);for(D=$=0;D<b-1;D++)for(O[D]=$,S=0;S<1<<x[D];S++)s[$++]=D;for(s[$-1]=D,D=rt=0;D<16;D++)for(V[D]=rt,S=0;S<1<<M[D];S++)P[rt++]=D;for(rt>>=7;D<u;D++)for(V[D]=rt<<7,S=0;S<1<<M[D]-7;S++)P[256+rt++]=D;for(Q=0;Q<=l;Q++)it[Q]=0;for(S=0;S<=143;)et[2*S+1]=8,S++,it[8]++;for(;S<=255;)et[2*S+1]=9,S++,it[9]++;for(;S<=279;)et[2*S+1]=7,S++,it[7]++;for(;S<=287;)et[2*S+1]=8,S++,it[8]++;for(St(et,w+1,it),S=0;S<u;S++)E[2*S+1]=5,E[2*S]=ht(S,5);J=new q(et,x,y+1,w,l),R=new q(E,M,0,u,l),st=new q(new Array(0),B,0,p,g)}(),W=!0),m.l_desc=new A(m.dyn_ltree,J),m.d_desc=new A(m.dyn_dtree,R),m.bl_desc=new A(m.bl_tree,st),m.bi_buf=0,m.bi_valid=0,ft(m)},c._tr_stored_block=_,c._tr_flush_block=function(m,S,Q,$){var D,rt,it=0;0<m.level?(m.strm.data_type===2&&(m.strm.data_type=function(nt){var ct,kt=4093624447;for(ct=0;ct<=31;ct++,kt>>>=1)if(1&kt&&nt.dyn_ltree[2*ct]!==0)return a;if(nt.dyn_ltree[18]!==0||nt.dyn_ltree[20]!==0||nt.dyn_ltree[26]!==0)return e;for(ct=32;ct<y;ct++)if(nt.dyn_ltree[2*ct]!==0)return e;return a}(m)),zt(m,m.l_desc),zt(m,m.d_desc),it=function(nt){var ct;for(r(nt,nt.dyn_ltree,nt.l_desc.max_code),r(nt,nt.dyn_dtree,nt.d_desc.max_code),zt(nt,nt.bl_desc),ct=p-1;3<=ct&&nt.bl_tree[2*L[ct]+1]===0;ct--);return nt.opt_len+=3*(ct+1)+5+5+4,ct}(m),D=m.opt_len+3+7>>>3,(rt=m.static_len+3+7>>>3)<=D&&(D=rt)):D=rt=Q+5,Q+4<=D&&S!==-1?_(m,S,Q,$):m.strategy===4||rt===D?(H(m,2+($?1:0),3),Ct(m,et,E)):(H(m,4+($?1:0),3),function(nt,ct,kt,_t){var At;for(H(nt,ct-257,5),H(nt,kt-1,5),H(nt,_t-4,4),At=0;At<_t;At++)H(nt,nt.bl_tree[2*L[At]+1],3);Y(nt,nt.dyn_ltree,ct-1),Y(nt,nt.dyn_dtree,kt-1)}(m,m.l_desc.max_code+1,m.d_desc.max_code+1,it+1),Ct(m,m.dyn_ltree,m.dyn_dtree)),ft(m),$&&dt(m)},c._tr_tally=function(m,S,Q){return m.pending_buf[m.d_buf+2*m.last_lit]=S>>>8&255,m.pending_buf[m.d_buf+2*m.last_lit+1]=255&S,m.pending_buf[m.l_buf+m.last_lit]=255&Q,m.last_lit++,S===0?m.dyn_ltree[2*Q]++:(m.matches++,S--,m.dyn_ltree[2*(s[Q]+y+1)]++,m.dyn_dtree[2*N(S)]++),m.last_lit===m.lit_bufsize-1},c._tr_align=function(m){H(m,2,3),K(m,k,et),function(S){S.bi_valid===16?(X(S,S.bi_buf),S.bi_buf=0,S.bi_valid=0):8<=S.bi_valid&&(S.pending_buf[S.pending++]=255&S.bi_buf,S.bi_buf>>=8,S.bi_valid-=8)}(m)}},{"../utils/common":41}],53:[function(t,n,c){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,n,c){(function(i){(function(a,e){if(!a.setImmediate){var d,v,b,y,w=1,u={},p=!1,o=a.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(a);l=l&&l.setTimeout?l:a,d={}.toString.call(a.process)==="[object process]"?function(z){process.nextTick(function(){g(z)})}:function(){if(a.postMessage&&!a.importScripts){var z=!0,T=a.onmessage;return a.onmessage=function(){z=!1},a.postMessage("","*"),a.onmessage=T,z}}()?(y="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",k,!1):a.attachEvent("onmessage",k),function(z){a.postMessage(y+z,"*")}):a.MessageChannel?((b=new MessageChannel).port1.onmessage=function(z){g(z.data)},function(z){b.port2.postMessage(z)}):o&&"onreadystatechange"in o.createElement("script")?(v=o.documentElement,function(z){var T=o.createElement("script");T.onreadystatechange=function(){g(z),T.onreadystatechange=null,v.removeChild(T),T=null},v.appendChild(T)}):function(z){setTimeout(g,0,z)},l.setImmediate=function(z){typeof z!="function"&&(z=new Function(""+z));for(var T=new Array(arguments.length-1),U=0;U<T.length;U++)T[U]=arguments[U+1];var x={callback:z,args:T};return u[w]=x,d(w),w++},l.clearImmediate=f}function f(z){delete u[z]}function g(z){if(p)setTimeout(g,0,z);else{var T=u[z];if(T){p=!0;try{(function(U){var x=U.callback,M=U.args;switch(M.length){case 0:x();break;case 1:x(M[0]);break;case 2:x(M[0],M[1]);break;case 3:x(M[0],M[1],M[2]);break;default:x.apply(e,M)}})(T)}finally{f(z),p=!1}}}}function k(z){z.source===a&&typeof z.data=="string"&&z.data.indexOf(y)===0&&g(+z.data.slice(y.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof Re<"u"?Re:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(or);var mr=or.exports;const lr=pr(mr);function*Xt(C,h){for(const t of C)yield h(t)}function*De(C,h){for(const t of C)h(t)&&(yield t)}const gr=/[^a-z0-9.]/g,vr=["application/zip","application/x-zip-compressed"];async function br(C,h=C.name+".zip"){const t=new Map;C.items.forEach(y=>{if(y.image){const w=y.image.name.lastIndexOf("."),u=w>=0?y.image.name.substring(w):"";t.set(y.image,Cn(y.name+u))}});const n=[...Xt(C.effects.values(),y=>y.name)],c=[...Xt(C.item_tags.values(),y=>y.name)],i=[...Xt(C.conversion_tags.values(),y=>y.name)],a=[...C.items].map(y=>({name:y.name,image:y.image?t.get(y.image):void 0,tags:[...Xt(y.tags.values(),u=>u.name)],conversions:[...Xt(y.conversions.values(),u=>({tags:[...Xt(u.tags.values(),p=>p.name)],inputs:[...Xt(u.inputs.values(),p=>p.name)],outputs:[...Xt(u.outputs.values(),p=>p.name)]}))]})),e=JSON.stringify({name:C.name,effects:n,item_tags:c,conversion_tags:i,items:a}),d=new lr;d.file("database.json",e);const v=d.folder("images");t.forEach((y,w)=>{v.file(y,w)});const b=await d.generateAsync({type:"blob"});return new File([b],Cn(h),{type:b.type})}async function yr(C){if(!vr.includes(C.type))throw new Error("Invalid item database file type.");const h=await lr.loadAsync(C),t=new Map,n=h.folder("images");if(n){const p=[],o=async(l,f)=>{const g=await f.async("blob");t.set(l,new File([g],l,{type:g.type}))};n.forEach((l,f)=>{p.push(o(l,f))}),await Promise.all(p)}const c=h.file("database.json");if(!c)throw new Error("Cannot find item database file.");const i=await c.async("text"),a=JSON.parse(i),e=new Ye(a.name),d=a.effects.map(p=>e.effects_create(p)),v=Object.fromEntries(d.map(p=>[p.name,p])),b=a.item_tags?.map(p=>e.item_tags_create(p))??[],y=Object.fromEntries(b.map(p=>[p.name,p])),w=a.conversion_tags?.map(p=>e.conversion_tags_create(p))??[],u=Object.fromEntries(w.map(p=>[p.name,p]));return a.items.forEach(p=>{const o=e.items_create(p.name,t.get(p.image));p.tags.forEach(l=>o.tags_add(y[l])),p.conversions.forEach(l=>{const f=e.conversions_create();l.tags.forEach(g=>f.tags_add(u[g])),l.inputs.forEach(g=>f.inputs_add(v[g])),l.outputs.forEach(g=>f.outputs_add(v[g])),o.conversions_add(f)})}),e}function Cn(C){return C.toLowerCase().replaceAll(gr,"_")}function wr(C){const h=URL.createObjectURL(C),t=document.createElement("a");t.href=h,t.download=C.name,t.hidden=!0,t.click(),URL.revokeObjectURL(h)}async function cr(C){return new Promise(h=>{const t=document.createElement("input");t.type="file",t.accept=C,t.addEventListener("change",()=>h(t.files?.[0])),t.addEventListener("cancel",()=>h(void 0)),t.click()})}function Sn(C,h,t){const n=C.slice();return n[20]=h[t],n}function In(C,h,t){const n=C.slice();return n[20]=h[t],n}function Tn(C,h,t){const n=C.slice();return n[20]=h[t],n}function zn(C,h,t){const n=C.slice();return n[20]=h[t],n}function xn(C,h,t){const n=C.slice();return n[29]=h[t],n}function An(C,h,t){const n=C.slice();return n[29]=h[t],n}function On(C,h){let t,n,c=h[29].name+"",i,a,e;function d(){return h[11](h[29])}return{key:C,first:null,c(){t=F("li"),n=F("button"),i=pt(c),this.h()},l(v){t=j(v,"LI",{});var b=tt(t);n=j(b,"BUTTON",{title:!0});var y=tt(n);i=mt(y,c),y.forEach(G),b.forEach(G),this.h()},h(){Z(n,"title","Delete Tag"),this.first=t},m(v,b){Tt(v,t,b),I(t,n),I(n,i),a||(e=bt(n,"click",d),a=!0)},p(v,b){h=v,b[0]&1&&c!==(c=h[29].name+"")&&xt(i,c)},d(v){v&&G(t),a=!1,e()}}}function Bn(C,h){let t,n=h[29].name+"",c,i;return{key:C,first:null,c(){t=F("option"),c=pt(n),this.h()},l(a){t=j(a,"OPTION",{});var e=tt(t);c=mt(e,n),e.forEach(G),this.h()},h(){t.__value=i=h[29],Bt(t,t.__value),this.first=t},m(a,e){Tt(a,t,e),I(t,c)},p(a,e){h=a,e[0]&16&&n!==(n=h[29].name+"")&&xt(c,n),e[0]&16&&i!==(i=h[29])&&(t.__value=i,Bt(t,t.__value))},d(a){a&&G(t)}}}function Nn(C,h){let t,n,c=h[20].name+"",i,a,e;function d(){return h[13](h[20])}return{key:C,first:null,c(){t=F("li"),n=F("button"),i=pt(c),this.h()},l(v){t=j(v,"LI",{});var b=tt(t);n=j(b,"BUTTON",{title:!0});var y=tt(n);i=mt(y,c),y.forEach(G),b.forEach(G),this.h()},h(){Z(n,"title","Delete Input"),this.first=t},m(v,b){Tt(v,t,b),I(t,n),I(n,i),a||(e=bt(n,"click",d),a=!0)},p(v,b){h=v,b[0]&1&&c!==(c=h[20].name+"")&&xt(i,c)},d(v){v&&G(t),a=!1,e()}}}function Rn(C,h){let t,n=h[20].name+"",c,i;return{key:C,first:null,c(){t=F("option"),c=pt(n),this.h()},l(a){t=j(a,"OPTION",{});var e=tt(t);c=mt(e,n),e.forEach(G),this.h()},h(){t.__value=i=h[20],Bt(t,t.__value),this.first=t},m(a,e){Tt(a,t,e),I(t,c)},p(a,e){h=a,e[0]&64&&n!==(n=h[20].name+"")&&xt(c,n),e[0]&64&&i!==(i=h[20])&&(t.__value=i,Bt(t,t.__value))},d(a){a&&G(t)}}}function Un(C,h){let t,n,c=h[20].name+"",i,a,e;function d(){return h[15](h[20])}return{key:C,first:null,c(){t=F("li"),n=F("button"),i=pt(c),this.h()},l(v){t=j(v,"LI",{});var b=tt(t);n=j(b,"BUTTON",{title:!0});var y=tt(n);i=mt(y,c),y.forEach(G),b.forEach(G),this.h()},h(){Z(n,"title","Delete Output"),this.first=t},m(v,b){Tt(v,t,b),I(t,n),I(n,i),a||(e=bt(n,"click",d),a=!0)},p(v,b){h=v,b[0]&1&&c!==(c=h[20].name+"")&&xt(i,c)},d(v){v&&G(t),a=!1,e()}}}function Dn(C,h){let t,n=h[20].name+"",c,i;return{key:C,first:null,c(){t=F("option"),c=pt(n),this.h()},l(a){t=j(a,"OPTION",{});var e=tt(t);c=mt(e,n),e.forEach(G),this.h()},h(){t.__value=i=h[20],Bt(t,t.__value),this.first=t},m(a,e){Tt(a,t,e),I(t,c)},p(a,e){h=a,e[0]&32&&n!==(n=h[20].name+"")&&xt(c,n),e[0]&32&&i!==(i=h[20])&&(t.__value=i,Bt(t,t.__value))},d(a){a&&G(t)}}}function kr(C){let h,t,n=[],c=new Map,i,a,e,d,v,b=[],y=new Map,w,u,p,o=[],l=new Map,f,g,k,z,T,U=[],x=new Map,M,B,L="",et,E,P,s=[],O=new Map,J,R,st,V,q,A=[],N=new Map,X,H,K=Et(C[0].tags);const ht=_=>_[29];for(let _=0;_<K.length;_+=1){let m=An(C,K,_),S=ht(m);c.set(S,n[_]=On(S,m))}let St=Et(C[4]);const ft=_=>_[29];for(let _=0;_<St.length;_+=1){let m=xn(C,St,_),S=ft(m);y.set(S,b[_]=Bn(S,m))}let dt=Et(C[0].inputs);const It=_=>_[20];for(let _=0;_<dt.length;_+=1){let m=zn(C,dt,_),S=It(m);l.set(S,o[_]=Nn(S,m))}let yt=Et(C[6]);const Ct=_=>_[20];for(let _=0;_<yt.length;_+=1){let m=Tn(C,yt,_),S=Ct(m);x.set(S,U[_]=Rn(S,m))}let zt=Et(C[0].outputs);const r=_=>_[20];for(let _=0;_<zt.length;_+=1){let m=In(C,zt,_),S=r(m);O.set(S,s[_]=Un(S,m))}let Y=Et(C[5]);const W=_=>_[20];for(let _=0;_<Y.length;_+=1){let m=Sn(C,Y,_),S=W(m);N.set(S,A[_]=Dn(S,m))}return{c(){h=F("div"),t=F("ul");for(let _=0;_<n.length;_+=1)n[_].c();i=at(),a=F("li"),e=F("select"),d=F("option"),v=pt("+");for(let _=0;_<b.length;_+=1)b[_].c();w=at(),u=F("div"),p=F("ul");for(let _=0;_<o.length;_+=1)o[_].c();f=at(),g=F("li"),k=F("select"),z=F("option"),T=pt("+");for(let _=0;_<U.length;_+=1)U[_].c();M=at(),B=F("span"),B.textContent=L,et=at(),E=F("div"),P=F("ul");for(let _=0;_<s.length;_+=1)s[_].c();J=at(),R=F("li"),st=F("select"),V=F("option"),q=pt("+");for(let _=0;_<A.length;_+=1)A[_].c();this.h()},l(_){h=j(_,"DIV",{class:!0});var m=tt(h);t=j(m,"UL",{class:!0});var S=tt(t);for(let ut=0;ut<n.length;ut+=1)n[ut].l(S);i=ot(S),a=j(S,"LI",{});var Q=tt(a);e=j(Q,"SELECT",{class:!0});var $=tt(e);d=j($,"OPTION",{});var D=tt(d);v=mt(D,"+"),D.forEach(G);for(let ut=0;ut<b.length;ut+=1)b[ut].l($);$.forEach(G),Q.forEach(G),S.forEach(G),w=ot(m),u=j(m,"DIV",{class:!0});var rt=tt(u);p=j(rt,"UL",{class:!0});var it=tt(p);for(let ut=0;ut<o.length;ut+=1)o[ut].l(it);f=ot(it),g=j(it,"LI",{});var nt=tt(g);k=j(nt,"SELECT",{class:!0});var ct=tt(k);z=j(ct,"OPTION",{});var kt=tt(z);T=mt(kt,"+"),kt.forEach(G);for(let ut=0;ut<U.length;ut+=1)U[ut].l(ct);ct.forEach(G),nt.forEach(G),it.forEach(G),rt.forEach(G),M=ot(m),B=j(m,"SPAN",{class:!0,"data-svelte-h":!0}),wt(B)!=="svelte-1fysel8"&&(B.textContent=L),et=ot(m),E=j(m,"DIV",{class:!0});var _t=tt(E);P=j(_t,"UL",{class:!0});var At=tt(P);for(let ut=0;ut<s.length;ut+=1)s[ut].l(At);J=ot(At),R=j(At,"LI",{});var Mt=tt(R);st=j(Mt,"SELECT",{class:!0});var Ot=tt(st);V=j(Ot,"OPTION",{});var Lt=tt(V);q=mt(Lt,"+"),Lt.forEach(G);for(let ut=0;ut<A.length;ut+=1)A[ut].l(Ot);Ot.forEach(G),Mt.forEach(G),At.forEach(G),_t.forEach(G),m.forEach(G),this.h()},h(){d.__value=void 0,Bt(d,d.__value),Z(e,"class","svelte-1f4ww2e"),C[3]===void 0&&ge(()=>C[12].call(e)),Z(t,"class","tags svelte-1f4ww2e"),z.__value=void 0,Bt(z,z.__value),Z(k,"class","svelte-1f4ww2e"),C[1]===void 0&&ge(()=>C[14].call(k)),Z(p,"class","svelte-1f4ww2e"),Z(u,"class","inputs svelte-1f4ww2e"),Z(B,"class","maps_to svelte-1f4ww2e"),V.__value=void 0,Bt(V,V.__value),Z(st,"class","svelte-1f4ww2e"),C[2]===void 0&&ge(()=>C[16].call(st)),Z(P,"class","svelte-1f4ww2e"),Z(E,"class","outputs svelte-1f4ww2e"),Z(h,"class","conversion-editor svelte-1f4ww2e")},m(_,m){Tt(_,h,m),I(h,t);for(let S=0;S<n.length;S+=1)n[S]&&n[S].m(t,null);I(t,i),I(t,a),I(a,e),I(e,d),I(d,v);for(let S=0;S<b.length;S+=1)b[S]&&b[S].m(e,null);Gt(e,C[3],!0),I(h,w),I(h,u),I(u,p);for(let S=0;S<o.length;S+=1)o[S]&&o[S].m(p,null);I(p,f),I(p,g),I(g,k),I(k,z),I(z,T);for(let S=0;S<U.length;S+=1)U[S]&&U[S].m(k,null);Gt(k,C[1],!0),I(h,M),I(h,B),I(h,et),I(h,E),I(E,P);for(let S=0;S<s.length;S+=1)s[S]&&s[S].m(P,null);I(P,J),I(P,R),I(R,st),I(st,V),I(V,q);for(let S=0;S<A.length;S+=1)A[S]&&A[S].m(st,null);Gt(st,C[2],!0),X||(H=[bt(e,"change",C[12]),bt(k,"change",C[14]),bt(st,"change",C[16])],X=!0)},p(_,m){m[0]&513&&(K=Et(_[0].tags),n=Rt(n,m,ht,1,_,K,c,t,Dt,On,i,An)),m[0]&16&&(St=Et(_[4]),b=Rt(b,m,ft,1,_,St,y,e,Dt,Bn,null,xn)),m[0]&24&&Gt(e,_[3]),m[0]&129&&(dt=Et(_[0].inputs),o=Rt(o,m,It,1,_,dt,l,p,Dt,Nn,f,zn)),m[0]&64&&(yt=Et(_[6]),U=Rt(U,m,Ct,1,_,yt,x,k,Dt,Rn,null,Tn)),m[0]&66&&Gt(k,_[1]),m[0]&257&&(zt=Et(_[0].outputs),s=Rt(s,m,r,1,_,zt,O,P,Dt,Un,J,In)),m[0]&32&&(Y=Et(_[5]),A=Rt(A,m,W,1,_,Y,N,st,Dt,Dn,null,Sn)),m[0]&36&&Gt(st,_[2])},i:oe,o:oe,d(_){_&&G(h);for(let m=0;m<n.length;m+=1)n[m].d();for(let m=0;m<b.length;m+=1)b[m].d();for(let m=0;m<o.length;m+=1)o[m].d();for(let m=0;m<U.length;m+=1)U[m].d();for(let m=0;m<s.length;m+=1)s[m].d();for(let m=0;m<A.length;m+=1)A[m].d();X=!1,Kt(H)}}}function Er(C,h,t){let n,c,i,{item_db:a}=h,{conversion:e}=h,d,v,b;function y(x){e.inputs_add(x),t(0,e)}function w(x){e.inputs_remove(x),t(0,e)}function u(x){e.outputs_add(x),t(0,e)}function p(x){e.outputs_remove(x),t(0,e)}function o(x){e.tags_add(x),t(0,e)}function l(x){e.tags_remove(x),t(0,e)}const f=x=>l(x);function g(){b=ve(this),t(3,b),t(4,i),t(10,a),t(0,e)}const k=x=>w(x);function z(){d=ve(this),t(1,d),t(6,n),t(10,a),t(0,e)}const T=x=>p(x);function U(){v=ve(this),t(2,v),t(5,c),t(10,a),t(0,e)}return C.$$set=x=>{"item_db"in x&&t(10,a=x.item_db),"conversion"in x&&t(0,e=x.conversion)},C.$$.update=()=>{C.$$.dirty[0]&2&&d&&(y(d),t(1,d=void 0)),C.$$.dirty[0]&1025&&t(6,n=[...De(a.effects.values(),x=>!e.inputs.has(x))]),C.$$.dirty[0]&4&&v&&(u(v),t(2,v=void 0)),C.$$.dirty[0]&1025&&t(5,c=[...De(a.effects.values(),x=>!e.outputs.has(x))]),C.$$.dirty[0]&8&&b&&(o(b),t(3,b=void 0)),C.$$.dirty[0]&1025&&t(4,i=[...De(a.conversion_tags.values(),x=>!e.tags.has(x))])},[e,d,v,b,i,c,n,w,p,l,a,f,g,k,z,T,U]}class Cr extends ye{constructor(h){super(),we(this,h,Er,kr,be,{item_db:10,conversion:0},null,[-1,-1])}}function Ln(C){let h,t,n="",c,i;return{c(){h=F("li"),t=F("button"),t.textContent=n,this.h()},l(a){h=j(a,"LI",{});var e=tt(h);t=j(e,"BUTTON",{title:!0,"data-svelte-h":!0}),wt(t)!=="svelte-xj7h6h"&&(t.textContent=n),e.forEach(G),this.h()},h(){Z(t,"title","Delete Image")},m(a,e){Tt(a,h,e),I(h,t),c||(i=bt(t,"click",C[9]),c=!0)},p:oe,d(a){a&&G(h),c=!1,i()}}}function Sr(C){let h,t,n,c,i,a,e="",d,v,b,y="",w,u,p,o=C[0]&&Ln(C);return{c(){h=F("div"),t=F("img"),n=at(),c=F("menu"),i=F("li"),a=F("button"),a.textContent=e,d=at(),v=F("li"),b=F("button"),b.textContent=y,w=at(),o&&o.c(),this.h()},l(l){h=j(l,"DIV",{class:!0});var f=tt(h);t=j(f,"IMG",{class:!0}),n=ot(f),c=j(f,"MENU",{class:!0});var g=tt(c);i=j(g,"LI",{});var k=tt(i);a=j(k,"BUTTON",{title:!0,"data-svelte-h":!0}),wt(a)!=="svelte-wi1skv"&&(a.textContent=e),k.forEach(G),d=ot(g),v=j(g,"LI",{});var z=tt(v);b=j(z,"BUTTON",{title:!0,"data-svelte-h":!0}),wt(b)!=="svelte-1h4gqn4"&&(b.textContent=y),z.forEach(G),w=ot(g),o&&o.l(g),g.forEach(G),f.forEach(G),this.h()},h(){Z(t,"class","svelte-j620p6"),Z(a,"title","Load Image From Web"),Z(b,"title","Load Image From Device"),Z(c,"class","svelte-j620p6"),Z(h,"class","svelte-j620p6")},m(l,f){Tt(l,h,f),I(h,t),C[6](t),I(h,n),I(h,c),I(c,i),I(i,a),I(c,d),I(c,v),I(v,b),I(c,w),o&&o.m(c,null),u||(p=[bt(a,"click",C[7]),bt(b,"click",C[8])],u=!0)},p(l,[f]){l[0]?o?o.p(l,f):(o=Ln(l),o.c(),o.m(c,null)):o&&(o.d(1),o=null)},i:oe,o:oe,d(l){l&&G(h),C[6](null),o&&o.d(),u=!1,Kt(p)}}}function Ir(C,h,t){let{source:n}=h,{placeholder:c=""}=h;const i=ur();let a;function e(o,l){if(l instanceof File){const f=URL.createObjectURL(l);o.src=f,o.addEventListener("load",()=>{URL.revokeObjectURL(f)},{once:!0})}else o.src=c}async function d(){const o=prompt("Enter image URL:");if(o)try{const l=await fetch(o,{mode:"cors"});if(!l.ok)throw new Error(l.statusText);const f=l.headers.get("Content-Type");if(!f||!f.startsWith("image/"))throw new Error(`File is not an image. Content-Type: ${f}.`);const g=l.url.substring(l.url.lastIndexOf("/")+1),k=await l.blob();t(0,n=new File([k],g,{type:k.type})),i("change",n)}catch(l){alert(`Failed to load image. (${l})`)}}async function v(){const o=await cr("image/*");o&&(t(0,n=o),i("change",n))}function b(){t(0,n=void 0),i("change",n)}function y(o){hr[o?"unshift":"push"](()=>{a=o,t(1,a)})}const w=()=>d(),u=()=>v(),p=()=>b();return C.$$set=o=>{"source"in o&&t(0,n=o.source),"placeholder"in o&&t(5,c=o.placeholder)},C.$$.update=()=>{C.$$.dirty&3&&a&&e(a,n)},[n,a,d,v,b,c,y,w,u,p]}class Tr extends ye{constructor(h){super(),we(this,h,Ir,Sr,be,{source:0,placeholder:5})}}function Pn(C,h,t){const n=C.slice();return n[13]=h[t],n}function Fn(C,h,t){const n=C.slice();return n[16]=h[t],n}function jn(C,h,t){const n=C.slice();return n[16]=h[t],n}function Mn(C){let h,t,n="Image",c,i,a,e,d,v="Tags",b,y,w=[],u=new Map,p,o,l,f,g,k=[],z=new Map,T,U,x,M,B="+",L,et,E=[],P=new Map,s,O,J;a=new Tr({props:{source:C[0].image}}),a.$on("change",C[8]);let R=Et(C[0].tags);const st=X=>X[16];for(let X=0;X<R.length;X+=1){let H=jn(C,R,X),K=st(H);u.set(K,w[X]=Zn(K,H))}let V=Et(C[3]);const q=X=>X[16];for(let X=0;X<V.length;X+=1){let H=Fn(C,V,X),K=q(H);z.set(K,k[X]=Wn(K,H))}let A=Et(C[0].conversions);const N=X=>X[13];for(let X=0;X<A.length;X+=1){let H=Pn(C,A,X),K=N(H);P.set(K,E[X]=qn(K,H))}return{c(){h=F("div"),t=F("h3"),t.textContent=n,c=at(),i=F("div"),Le(a.$$.fragment),e=at(),d=F("h3"),d.textContent=v,b=at(),y=F("ul");for(let X=0;X<w.length;X+=1)w[X].c();p=at(),o=F("li"),l=F("select"),f=F("option"),g=pt("+");for(let X=0;X<k.length;X+=1)k[X].c();T=at(),U=F("h3"),x=pt(`Effect Conversions
      `),M=F("button"),M.textContent=B,L=at(),et=F("div");for(let X=0;X<E.length;X+=1)E[X].c();this.h()},l(X){h=j(X,"DIV",{class:!0});var H=tt(h);t=j(H,"H3",{class:!0,"data-svelte-h":!0}),wt(t)!=="svelte-2qut89"&&(t.textContent=n),c=ot(H),i=j(H,"DIV",{class:!0});var K=tt(i);Pe(a.$$.fragment,K),K.forEach(G),e=ot(H),d=j(H,"H3",{class:!0,"data-svelte-h":!0}),wt(d)!=="svelte-1nl40cx"&&(d.textContent=v),b=ot(H),y=j(H,"UL",{class:!0});var ht=tt(y);for(let Ct=0;Ct<w.length;Ct+=1)w[Ct].l(ht);p=ot(ht),o=j(ht,"LI",{});var St=tt(o);l=j(St,"SELECT",{class:!0});var ft=tt(l);f=j(ft,"OPTION",{});var dt=tt(f);g=mt(dt,"+"),dt.forEach(G);for(let Ct=0;Ct<k.length;Ct+=1)k[Ct].l(ft);ft.forEach(G),St.forEach(G),ht.forEach(G),T=ot(H),U=j(H,"H3",{class:!0});var It=tt(U);x=mt(It,`Effect Conversions
      `),M=j(It,"BUTTON",{class:!0,title:!0,style:!0,"data-svelte-h":!0}),wt(M)!=="svelte-1mxzg4y"&&(M.textContent=B),It.forEach(G),L=ot(H),et=j(H,"DIV",{class:!0});var yt=tt(et);for(let Ct=0;Ct<E.length;Ct+=1)E[Ct].l(yt);yt.forEach(G),H.forEach(G),this.h()},h(){Z(t,"class","svelte-111ejom"),Z(i,"class","item-image-container svelte-111ejom"),Z(d,"class","svelte-111ejom"),f.__value=void 0,Bt(f,f.__value),Z(l,"class","svelte-111ejom"),C[2]===void 0&&ge(()=>C[10].call(l)),Z(y,"class","svelte-111ejom"),Z(M,"class","flat large svelte-111ejom"),Z(M,"title","Add Effect Conversion"),Qt(M,"padding","0.125em 0.5em"),Z(U,"class","svelte-111ejom"),Z(et,"class","conversion-list svelte-111ejom"),Z(h,"class","main-container scrollable svelte-111ejom")},m(X,H){Tt(X,h,H),I(h,t),I(h,c),I(h,i),Fe(a,i,null),I(h,e),I(h,d),I(h,b),I(h,y);for(let K=0;K<w.length;K+=1)w[K]&&w[K].m(y,null);I(y,p),I(y,o),I(o,l),I(l,f),I(f,g);for(let K=0;K<k.length;K+=1)k[K]&&k[K].m(l,null);Gt(l,C[2],!0),I(h,T),I(h,U),I(U,x),I(U,M),I(h,L),I(h,et);for(let K=0;K<E.length;K+=1)E[K]&&E[K].m(et,null);s=!0,O||(J=[bt(l,"change",C[10]),bt(M,"click",C[6])],O=!0)},p(X,H){const K={};H&1&&(K.source=X[0].image),a.$set(K),H&33&&(R=Et(X[0].tags),w=Rt(w,H,st,1,X,R,u,y,Dt,Zn,p,jn)),H&8&&(V=Et(X[3]),k=Rt(k,H,q,1,X,V,z,l,Dt,Wn,null,Fn)),H&12&&Gt(l,X[2]),H&131&&(A=Et(X[0].conversions),Xe(),E=Rt(E,H,N,1,X,A,P,et,dr,qn,null,Pn),Je())},i(X){if(!s){qt(a.$$.fragment,X);for(let H=0;H<A.length;H+=1)qt(E[H]);s=!0}},o(X){Vt(a.$$.fragment,X);for(let H=0;H<E.length;H+=1)Vt(E[H]);s=!1},d(X){X&&G(h),je(a);for(let H=0;H<w.length;H+=1)w[H].d();for(let H=0;H<k.length;H+=1)k[H].d();for(let H=0;H<E.length;H+=1)E[H].d();O=!1,Kt(J)}}}function Zn(C,h){let t,n,c=h[16].name+"",i,a,e;function d(){return h[9](h[16])}return{key:C,first:null,c(){t=F("li"),n=F("button"),i=pt(c),this.h()},l(v){t=j(v,"LI",{});var b=tt(t);n=j(b,"BUTTON",{title:!0});var y=tt(n);i=mt(y,c),y.forEach(G),b.forEach(G),this.h()},h(){Z(n,"title","Delete Tag"),this.first=t},m(v,b){Tt(v,t,b),I(t,n),I(n,i),a||(e=bt(n,"click",d),a=!0)},p(v,b){h=v,b&1&&c!==(c=h[16].name+"")&&xt(i,c)},d(v){v&&G(t),a=!1,e()}}}function Wn(C,h){let t,n=h[16].name+"",c,i;return{key:C,first:null,c(){t=F("option"),c=pt(n),this.h()},l(a){t=j(a,"OPTION",{});var e=tt(t);c=mt(e,n),e.forEach(G),this.h()},h(){t.__value=i=h[16],Bt(t,t.__value),this.first=t},m(a,e){Tt(a,t,e),I(t,c)},p(a,e){h=a,e&8&&n!==(n=h[16].name+"")&&xt(c,n),e&8&&i!==(i=h[16])&&(t.__value=i,Bt(t,t.__value))},d(a){a&&G(t)}}}function qn(C,h){let t,n,c,i,a,e,d="",v,b,y,w;n=new Cr({props:{item_db:h[1],conversion:h[13]}});function u(){return h[11](h[13])}return{key:C,first:null,c(){t=F("div"),Le(n.$$.fragment),c=at(),i=F("menu"),a=F("li"),e=F("button"),e.textContent=d,v=at(),this.h()},l(p){t=j(p,"DIV",{class:!0});var o=tt(t);Pe(n.$$.fragment,o),c=ot(o),i=j(o,"MENU",{class:!0});var l=tt(i);a=j(l,"LI",{});var f=tt(a);e=j(f,"BUTTON",{title:!0,"data-svelte-h":!0}),wt(e)!=="svelte-3ao5rj"&&(e.textContent=d),f.forEach(G),l.forEach(G),v=ot(o),o.forEach(G),this.h()},h(){Z(e,"title","Delete Effect Conversion"),Z(i,"class","svelte-111ejom"),Z(t,"class","conversion svelte-111ejom"),this.first=t},m(p,o){Tt(p,t,o),Fe(n,t,null),I(t,c),I(t,i),I(i,a),I(a,e),I(t,v),b=!0,y||(w=bt(e,"click",u),y=!0)},p(p,o){h=p;const l={};o&2&&(l.item_db=h[1]),o&1&&(l.conversion=h[13]),n.$set(l)},i(p){b||(qt(n.$$.fragment,p),b=!0)},o(p){Vt(n.$$.fragment,p),b=!1},d(p){p&&G(t),je(n),y=!1,w()}}}function zr(C){let h,t,n=C[0]&&Mn(C);return{c(){n&&n.c(),h=kn()},l(c){n&&n.l(c),h=kn()},m(c,i){n&&n.m(c,i),Tt(c,h,i),t=!0},p(c,[i]){c[0]?n?(n.p(c,i),i&1&&qt(n,1)):(n=Mn(c),n.c(),qt(n,1),n.m(h.parentNode,h)):n&&(Xe(),Vt(n,1,1,()=>{n=null}),Je())},i(c){t||(qt(n),t=!0)},o(c){Vt(n),t=!1},d(c){c&&G(h),n&&n.d(c)}}}function xr(C,h,t){let n,{item_db:c}=h,{item:i=void 0}=h,a;function e(l){i&&t(0,i.image=l,i)}function d(l){i&&(i.tags_add(l),t(0,i))}function v(l){i&&(i.tags_remove(l),t(0,i))}function b(){if(i){const l=c.conversions_create();i.conversions_add(l),t(0,i)}}function y(l){i&&confirm("Are you sure you want to delete the effect conversion?")&&(c.conversions_delete(l),t(0,i))}const w=l=>e(l.detail),u=l=>v(l);function p(){a=ve(this),t(2,a),t(3,n),t(0,i),t(1,c)}const o=l=>y(l);return C.$$set=l=>{"item_db"in l&&t(1,c=l.item_db),"item"in l&&t(0,i=l.item)},C.$$.update=()=>{C.$$.dirty&4&&a&&(d(a),t(2,a=void 0)),C.$$.dirty&3&&t(3,n=i?[...De(c.item_tags.values(),l=>!i.tags.has(l))]:[])},[i,c,a,n,e,v,b,y,w,u,p,o]}class Ar extends ye{constructor(h){super(),we(this,h,xr,zr,be,{item_db:1,item:0})}}function Hn(C,h,t){const n=C.slice();return n[12]=h[t].effect,n[13]=h[t].input_references,n[14]=h[t].output_references,n}function Gn(C,h,t){const n=C.slice();return n[17]=h[t],n}function Vn(C,h,t){const n=C.slice();return n[17]=h[t],n}function Kn(C,h){let t,n=h[17].name+"",c;return{key:C,first:null,c(){t=F("li"),c=pt(n),this.h()},l(i){t=j(i,"LI",{});var a=tt(t);c=mt(a,n),a.forEach(G),this.h()},h(){this.first=t},m(i,a){Tt(i,t,a),I(t,c)},p(i,a){h=i,a&1&&n!==(n=h[17].name+"")&&xt(c,n)},d(i){i&&G(t)}}}function Yn(C,h){let t,n=h[17].name+"",c;return{key:C,first:null,c(){t=F("li"),c=pt(n),this.h()},l(i){t=j(i,"LI",{});var a=tt(t);c=mt(a,n),a.forEach(G),this.h()},h(){this.first=t},m(i,a){Tt(i,t,a),I(t,c)},p(i,a){h=i,a&1&&n!==(n=h[17].name+"")&&xt(c,n)},d(i){i&&G(t)}}}function Xn(C,h){let t,n,c=h[12].name+"",i,a,e,d,v=h[13].length+"",b,y,w=h[14].length+"",u,p,o,l,f,g=[],k=new Map,z,T,U,x=[],M=new Map,B,L=Et(h[13]);const et=s=>s[17];for(let s=0;s<L.length;s+=1){let O=Vn(h,L,s),J=et(O);k.set(J,g[s]=Kn(J,O))}let E=Et(h[14]);const P=s=>s[17];for(let s=0;s<E.length;s+=1){let O=Gn(h,E,s),J=P(O);M.set(J,x[s]=Yn(J,O))}return{key:C,first:null,c(){t=F("tr"),n=F("th"),i=pt(c),a=F("br"),e=at(),d=F("span"),b=pt(v),y=pt(" in - "),u=pt(w),p=pt(" out"),o=at(),l=F("td"),f=F("ul");for(let s=0;s<g.length;s+=1)g[s].c();z=at(),T=F("td"),U=F("ul");for(let s=0;s<x.length;s+=1)x[s].c();B=at(),this.h()},l(s){t=j(s,"TR",{class:!0});var O=tt(t);n=j(O,"TH",{class:!0});var J=tt(n);i=mt(J,c),a=j(J,"BR",{}),e=ot(J),d=j(J,"SPAN",{class:!0});var R=tt(d);b=mt(R,v),y=mt(R," in - "),u=mt(R,w),p=mt(R," out"),R.forEach(G),J.forEach(G),o=ot(O),l=j(O,"TD",{class:!0});var st=tt(l);f=j(st,"UL",{class:!0});var V=tt(f);for(let N=0;N<g.length;N+=1)g[N].l(V);V.forEach(G),st.forEach(G),z=ot(O),T=j(O,"TD",{class:!0});var q=tt(T);U=j(q,"UL",{class:!0});var A=tt(U);for(let N=0;N<x.length;N+=1)x[N].l(A);A.forEach(G),q.forEach(G),B=ot(O),O.forEach(G),this.h()},h(){Z(d,"class","detail svelte-1iqh0eq"),Z(n,"class","svelte-1iqh0eq"),Z(f,"class","svelte-1iqh0eq"),Z(l,"class","svelte-1iqh0eq"),Z(U,"class","svelte-1iqh0eq"),Z(T,"class","svelte-1iqh0eq"),Z(t,"class","svelte-1iqh0eq"),this.first=t},m(s,O){Tt(s,t,O),I(t,n),I(n,i),I(n,a),I(n,e),I(n,d),I(d,b),I(d,y),I(d,u),I(d,p),I(t,o),I(t,l),I(l,f);for(let J=0;J<g.length;J+=1)g[J]&&g[J].m(f,null);I(t,z),I(t,T),I(T,U);for(let J=0;J<x.length;J+=1)x[J]&&x[J].m(U,null);I(t,B)},p(s,O){h=s,O&1&&c!==(c=h[12].name+"")&&xt(i,c),O&1&&v!==(v=h[13].length+"")&&xt(b,v),O&1&&w!==(w=h[14].length+"")&&xt(u,w),O&1&&(L=Et(h[13]),g=Rt(g,O,et,1,h,L,k,f,Dt,Kn,null,Vn)),O&1&&(E=Et(h[14]),x=Rt(x,O,P,1,h,E,M,U,Dt,Yn,null,Gn))},d(s){s&&G(t);for(let O=0;O<g.length;O+=1)g[O].d();for(let O=0;O<x.length;O+=1)x[O].d()}}}function Or(C){let h,t,n,c,i,a,e="",d,v,b="",y,w,u,p="",o,l,f="",g,k,z,T="",U,x,M="",B,L,et=[],E=new Map,P,s,O=Et(C[0]);const J=R=>R[12];for(let R=0;R<O.length;R+=1){let st=Hn(C,O,R),V=J(st);E.set(V,et[R]=Xn(V,st))}return{c(){h=F("div"),t=F("table"),n=F("thead"),c=F("tr"),i=F("th"),a=F("button"),a.textContent=e,d=pt(`
          Effect
          `),v=F("button"),v.textContent=b,y=at(),w=F("th"),u=F("button"),u.textContent=p,o=pt(`
          Input References
          `),l=F("button"),l.textContent=f,g=at(),k=F("th"),z=F("button"),z.textContent=T,U=pt(`
          Output References
          `),x=F("button"),x.textContent=M,B=at(),L=F("tbody");for(let R=0;R<et.length;R+=1)et[R].c();this.h()},l(R){h=j(R,"DIV",{class:!0});var st=tt(h);t=j(st,"TABLE",{class:!0});var V=tt(t);n=j(V,"THEAD",{class:!0});var q=tt(n);c=j(q,"TR",{class:!0});var A=tt(c);i=j(A,"TH",{class:!0});var N=tt(i);a=j(N,"BUTTON",{class:!0,"data-svelte-h":!0}),wt(a)!=="svelte-uz5ehk"&&(a.textContent=e),d=mt(N,`
          Effect
          `),v=j(N,"BUTTON",{class:!0,"data-svelte-h":!0}),wt(v)!=="svelte-62qfop"&&(v.textContent=b),N.forEach(G),y=ot(A),w=j(A,"TH",{class:!0});var X=tt(w);u=j(X,"BUTTON",{class:!0,"data-svelte-h":!0}),wt(u)!=="svelte-1i8ii7m"&&(u.textContent=p),o=mt(X,`
          Input References
          `),l=j(X,"BUTTON",{class:!0,"data-svelte-h":!0}),wt(l)!=="svelte-tv8l9t"&&(l.textContent=f),X.forEach(G),g=ot(A),k=j(A,"TH",{class:!0});var H=tt(k);z=j(H,"BUTTON",{class:!0,"data-svelte-h":!0}),wt(z)!=="svelte-q8ueo1"&&(z.textContent=T),U=mt(H,`
          Output References
          `),x=j(H,"BUTTON",{class:!0,"data-svelte-h":!0}),wt(x)!=="svelte-1t1wcco"&&(x.textContent=M),H.forEach(G),A.forEach(G),q.forEach(G),B=ot(V),L=j(V,"TBODY",{class:!0});var K=tt(L);for(let ht=0;ht<et.length;ht+=1)et[ht].l(K);K.forEach(G),V.forEach(G),st.forEach(G),this.h()},h(){Z(a,"class","flat svelte-1iqh0eq"),Z(v,"class","flat svelte-1iqh0eq"),Z(i,"class","svelte-1iqh0eq"),Z(u,"class","flat svelte-1iqh0eq"),Z(l,"class","flat svelte-1iqh0eq"),Z(w,"class","svelte-1iqh0eq"),Z(z,"class","flat svelte-1iqh0eq"),Z(x,"class","flat svelte-1iqh0eq"),Z(k,"class","svelte-1iqh0eq"),Z(c,"class","svelte-1iqh0eq"),Z(n,"class","svelte-1iqh0eq"),Z(L,"class","svelte-1iqh0eq"),Z(t,"class","svelte-1iqh0eq"),Z(h,"class","root svelte-1iqh0eq")},m(R,st){Tt(R,h,st),I(h,t),I(t,n),I(n,c),I(c,i),I(i,a),I(i,d),I(i,v),I(c,y),I(c,w),I(w,u),I(w,o),I(w,l),I(c,g),I(c,k),I(k,z),I(k,U),I(k,x),I(t,B),I(t,L);for(let V=0;V<et.length;V+=1)et[V]&&et[V].m(L,null);P||(s=[bt(a,"click",C[5]),bt(v,"click",C[6]),bt(u,"click",C[7]),bt(l,"click",C[8]),bt(z,"click",C[9]),bt(x,"click",C[10])],P=!0)},p(R,[st]){st&1&&(O=Et(R[0]),et=Rt(et,st,J,1,R,O,E,L,Dt,Xn,null,Hn))},i:oe,o:oe,d(R){R&&G(h);for(let st=0;st<et.length;st+=1)et[st].d();P=!1,Kt(s)}}}function Br(C,h,t){let{item_db:n}=h,c;function i(o,l){const f=new Set,g=l?jt.INPUTS:jt.OUTPUTS;for(const k of o.references(g))for(const z of k.references(Jt.CONVERSIONS))f.add(z);return[...f]}function a(o){t(0,c=c.sort(o?(l,f)=>l.effect.name.localeCompare(f.effect.name):(l,f)=>f.effect.name.localeCompare(l.effect.name)))}function e(o){t(0,c=c.sort(o?(l,f)=>l.input_references.length-f.input_references.length:(l,f)=>f.input_references.length-l.input_references.length))}function d(o){t(0,c=c.sort(o?(l,f)=>l.output_references.length-f.output_references.length:(l,f)=>f.output_references.length-l.output_references.length))}const v=()=>a(!1),b=()=>a(!0),y=()=>e(!1),w=()=>e(!0),u=()=>d(!1),p=()=>d(!0);return C.$$set=o=>{"item_db"in o&&t(4,n=o.item_db)},C.$$.update=()=>{C.$$.dirty&16&&t(0,c=[...Xt(n.effects.values(),o=>({effect:o,input_references:i(o,!0),output_references:i(o,!1)}))])},[c,a,e,d,n,v,b,y,w,u,p]}class Nr extends ye{constructor(h){super(),we(this,h,Br,Or,be,{item_db:4})}}function Jn(C,h,t){const n=C.slice();return n[33]=h[t],n}function Qn(C,h,t){const n=C.slice();return n[33]=h[t],n}function $n(C,h,t){const n=C.slice();n[38]=h[t],n[41]=t;const c=`radio-button-effect-${n[41]}`;return n[39]=c,n}function tr(C,h,t){const n=C.slice();n[42]=h[t],n[41]=t;const c=`radio-button-item-${n[41]}`;return n[39]=c,n}function Rr(C){let h,t,n;return t=new Nr({props:{item_db:C[0]}}),{c(){h=F("main"),Le(t.$$.fragment),this.h()},l(c){h=j(c,"MAIN",{class:!0,style:!0});var i=tt(h);Pe(t.$$.fragment,i),i.forEach(G),this.h()},h(){Z(h,"class","inset panel svelte-1rly1m4"),Qt(h,"grid-column","auto / span 2")},m(c,i){Tt(c,h,i),Fe(t,h,null),n=!0},p(c,i){const a={};i[0]&1&&(a.item_db=c[0]),t.$set(a)},i(c){n||(qt(t.$$.fragment,c),n=!0)},o(c){Vt(t.$$.fragment,c),n=!1},d(c){c&&G(h),je(t)}}}function Ur(C){let h,t,n,c="Items",i,a,e,d=C[0].items.size+"",v,b,y,w,u,p,o="+",l,f,g=[],k=new Map,z,T,U,x,M,B,L,et,E=Et([...C[0].items].sort(ne));const P=O=>O[42];for(let O=0;O<E.length;O+=1){let J=tr(C,E,O),R=P(J);k.set(R,g[O]=er(R,J))}let s=C[1]&&nr(C);return M=new Ar({props:{item_db:C[0],item:C[1]}}),{c(){h=F("aside"),t=F("header"),n=F("h2"),n.textContent=c,i=at(),a=F("span"),e=pt("("),v=pt(d),b=pt(")"),y=at(),w=F("menu"),u=F("li"),p=F("button"),p.textContent=o,l=at(),f=F("ul");for(let O=0;O<g.length;O+=1)g[O].c();z=at(),T=F("main"),U=F("header"),s&&s.c(),x=at(),Le(M.$$.fragment),this.h()},l(O){h=j(O,"ASIDE",{class:!0});var J=tt(h);t=j(J,"HEADER",{class:!0});var R=tt(t);n=j(R,"H2",{class:!0,"data-svelte-h":!0}),wt(n)!=="svelte-1hc3rnu"&&(n.textContent=c),i=ot(R),a=j(R,"SPAN",{class:!0});var st=tt(a);e=mt(st,"("),v=mt(st,d),b=mt(st,")"),st.forEach(G),y=ot(R),w=j(R,"MENU",{class:!0});var V=tt(w);u=j(V,"LI",{});var q=tt(u);p=j(q,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),wt(p)!=="svelte-m9kak"&&(p.textContent=o),q.forEach(G),V.forEach(G),R.forEach(G),l=ot(J),f=j(J,"UL",{class:!0});var A=tt(f);for(let H=0;H<g.length;H+=1)g[H].l(A);A.forEach(G),J.forEach(G),z=ot(O),T=j(O,"MAIN",{class:!0});var N=tt(T);U=j(N,"HEADER",{style:!0,class:!0});var X=tt(U);s&&s.l(X),X.forEach(G),x=ot(N),Pe(M.$$.fragment,N),N.forEach(G),this.h()},h(){Z(n,"class","svelte-1rly1m4"),Z(a,"class","detail svelte-1rly1m4"),Z(p,"class","flat large"),Z(p,"title","Add Item"),Z(w,"class","svelte-1rly1m4"),Z(t,"class","svelte-1rly1m4"),Z(f,"class","scrollable svelte-1rly1m4"),Z(h,"class","inset panel svelte-1rly1m4"),Qt(U,"z-index","1"),Z(U,"class","svelte-1rly1m4"),Z(T,"class","inset panel svelte-1rly1m4")},m(O,J){Tt(O,h,J),I(h,t),I(t,n),I(t,i),I(t,a),I(a,e),I(a,v),I(a,b),I(t,y),I(t,w),I(w,u),I(u,p),I(h,l),I(h,f);for(let R=0;R<g.length;R+=1)g[R]&&g[R].m(f,null);Tt(O,z,J),Tt(O,T,J),I(T,U),s&&s.m(U,null),I(T,x),Fe(M,T,null),B=!0,L||(et=bt(p,"click",C[8]),L=!0)},p(O,J){(!B||J[0]&1)&&d!==(d=O[0].items.size+"")&&xt(v,d),J[0]&1539&&(E=Et([...O[0].items].sort(ne)),g=Rt(g,J,P,1,O,E,k,f,Dt,er,null,tr)),O[1]?s?s.p(O,J):(s=nr(O),s.c(),s.m(U,null)):s&&(s.d(1),s=null);const R={};J[0]&1&&(R.item_db=O[0]),J[0]&2&&(R.item=O[1]),M.$set(R)},i(O){B||(qt(M.$$.fragment,O),B=!0)},o(O){Vt(M.$$.fragment,O),B=!1},d(O){O&&(G(h),G(z),G(T));for(let J=0;J<g.length;J+=1)g[J].d();s&&s.d(),je(M),L=!1,et()}}}function er(C,h){let t,n,c,i,a=!1,e,d,v,b=h[42].name+"",y,w,u,p="",o,l,f="",g,k,z,T,U;function x(){return h[23](h[42])}function M(){return h[24](h[42])}return z=ar(h[22][1]),{key:C,first:null,c(){t=F("li"),n=F("input"),e=at(),d=F("label"),v=F("span"),y=pt(b),w=at(),u=F("button"),u.textContent=p,o=at(),l=F("button"),l.textContent=f,k=at(),this.h()},l(B){t=j(B,"LI",{class:!0});var L=tt(t);n=j(L,"INPUT",{type:!0,id:!0,class:!0}),e=ot(L),d=j(L,"LABEL",{for:!0,class:!0});var et=tt(d);v=j(et,"SPAN",{class:!0});var E=tt(v);y=mt(E,b),E.forEach(G),w=ot(et),u=j(et,"BUTTON",{class:!0,title:!0,style:!0,"data-svelte-h":!0}),wt(u)!=="svelte-1mjif60"&&(u.textContent=p),o=ot(et),l=j(et,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),wt(l)!=="svelte-10y5kq0"&&(l.textContent=f),et.forEach(G),k=ot(L),L.forEach(G),this.h()},h(){Z(n,"type","radio"),Z(n,"id",c=h[39]),n.__value=i=h[42],Bt(n,n.__value),Z(n,"class","svelte-1rly1m4"),Z(v,"class","fill-right svelte-1rly1m4"),Z(u,"class","flat on-parent-hover svelte-1rly1m4"),Z(u,"title","Rename Item"),Qt(u,"line-height","1.25em"),Z(l,"class","flat on-parent-hover svelte-1rly1m4"),Z(l,"title","Delete Item"),Z(d,"for",g=h[39]),Z(d,"class","item-row svelte-1rly1m4"),Z(t,"class","svelte-1rly1m4"),z.p(n),this.first=t},m(B,L){Tt(B,t,L),I(t,n),n.checked=n.__value===h[1],I(t,e),I(t,d),I(d,v),I(v,y),I(d,w),I(d,u),I(d,o),I(d,l),I(t,k),T||(U=[bt(n,"change",h[21]),bt(u,"click",x),bt(l,"click",M)],T=!0)},p(B,L){h=B,L[0]&1&&c!==(c=h[39])&&Z(n,"id",c),L[0]&1&&i!==(i=h[42])&&(n.__value=i,Bt(n,n.__value),a=!0),(a||L[0]&3)&&(n.checked=n.__value===h[1]),L[0]&1&&b!==(b=h[42].name+"")&&xt(y,b),L[0]&1&&g!==(g=h[39])&&Z(d,"for",g)},d(B){B&&G(t),z.r(),T=!1,Kt(U)}}}function nr(C){let h,t=(C[1]?.name??"")+"",n;return{c(){h=F("h2"),n=pt(t),this.h()},l(c){h=j(c,"H2",{class:!0});var i=tt(h);n=mt(i,t),i.forEach(G),this.h()},h(){Z(h,"class","centered svelte-1rly1m4")},m(c,i){Tt(c,h,i),I(h,n)},p(c,i){i[0]&2&&t!==(t=(c[1]?.name??"")+"")&&xt(n,t)},d(c){c&&G(h)}}}function rr(C,h){let t,n,c,i,a=!1,e,d,v,b=h[38].name+"",y,w,u,p="",o,l,f="",g,k,z,T,U;function x(){return h[26](h[38])}function M(){return h[27](h[38])}return z=ar(h[22][0]),{key:C,first:null,c(){t=F("li"),n=F("input"),e=at(),d=F("label"),v=F("span"),y=pt(b),w=at(),u=F("button"),u.textContent=p,o=at(),l=F("button"),l.textContent=f,k=at(),this.h()},l(B){t=j(B,"LI",{class:!0});var L=tt(t);n=j(L,"INPUT",{type:!0,id:!0,class:!0}),e=ot(L),d=j(L,"LABEL",{for:!0,class:!0});var et=tt(d);v=j(et,"SPAN",{class:!0});var E=tt(v);y=mt(E,b),E.forEach(G),w=ot(et),u=j(et,"BUTTON",{class:!0,title:!0,style:!0,"data-svelte-h":!0}),wt(u)!=="svelte-ij4fh6"&&(u.textContent=p),o=ot(et),l=j(et,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),wt(l)!=="svelte-1ppeovu"&&(l.textContent=f),et.forEach(G),k=ot(L),L.forEach(G),this.h()},h(){Z(n,"type","radio"),Z(n,"id",c=h[39]),n.__value=i=h[38],Bt(n,n.__value),Z(n,"class","svelte-1rly1m4"),Z(v,"class","fill-right svelte-1rly1m4"),Z(u,"class","flat on-parent-hover svelte-1rly1m4"),Z(u,"title","Rename Effect"),Qt(u,"line-height","1.25em"),Z(l,"class","flat on-parent-hover svelte-1rly1m4"),Z(l,"title","Delete Effect"),Z(d,"for",g=h[39]),Z(d,"class","item-row svelte-1rly1m4"),Z(t,"class","svelte-1rly1m4"),z.p(n),this.first=t},m(B,L){Tt(B,t,L),I(t,n),n.checked=n.__value===h[2],I(t,e),I(t,d),I(d,v),I(v,y),I(d,w),I(d,u),I(d,o),I(d,l),I(t,k),T||(U=[bt(n,"change",h[25]),bt(u,"click",x),bt(l,"click",M)],T=!0)},p(B,L){h=B,L[0]&1&&c!==(c=h[39])&&Z(n,"id",c),L[0]&1&&i!==(i=h[38])&&(n.__value=i,Bt(n,n.__value),a=!0),(a||L[0]&5)&&(n.checked=n.__value===h[2]),L[0]&1&&b!==(b=h[38].name+"")&&xt(y,b),L[0]&1&&g!==(g=h[39])&&Z(d,"for",g)},d(B){B&&G(t),z.r(),T=!1,Kt(U)}}}function sr(C,h){let t,n,c=h[33].name+"",i,a,e,d="",v,b,y="",w,u,p;function o(){return h[28](h[33])}function l(){return h[29](h[33])}return{key:C,first:null,c(){t=F("li"),n=F("span"),i=pt(c),a=at(),e=F("button"),e.textContent=d,v=at(),b=F("button"),b.textContent=y,w=at(),this.h()},l(f){t=j(f,"LI",{class:!0});var g=tt(t);n=j(g,"SPAN",{class:!0});var k=tt(n);i=mt(k,c),k.forEach(G),a=ot(g),e=j(g,"BUTTON",{class:!0,title:!0,style:!0,"data-svelte-h":!0}),wt(e)!=="svelte-ooyis8"&&(e.textContent=d),v=ot(g),b=j(g,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),wt(b)!=="svelte-8brneo"&&(b.textContent=y),w=ot(g),g.forEach(G),this.h()},h(){Z(n,"class","fill-right svelte-1rly1m4"),Z(e,"class","flat on-parent-hover svelte-1rly1m4"),Z(e,"title","Rename Item Tag"),Qt(e,"line-height","1.25em"),Z(b,"class","flat on-parent-hover svelte-1rly1m4"),Z(b,"title","Delete Item Tag"),Z(t,"class","item-row svelte-1rly1m4"),this.first=t},m(f,g){Tt(f,t,g),I(t,n),I(n,i),I(t,a),I(t,e),I(t,v),I(t,b),I(t,w),u||(p=[bt(e,"click",o),bt(b,"click",l)],u=!0)},p(f,g){h=f,g[0]&1&&c!==(c=h[33].name+"")&&xt(i,c)},d(f){f&&G(t),u=!1,Kt(p)}}}function ir(C,h){let t,n,c=h[33].name+"",i,a,e,d="",v,b,y="",w,u,p;function o(){return h[30](h[33])}function l(){return h[31](h[33])}return{key:C,first:null,c(){t=F("li"),n=F("span"),i=pt(c),a=at(),e=F("button"),e.textContent=d,v=at(),b=F("button"),b.textContent=y,w=at(),this.h()},l(f){t=j(f,"LI",{class:!0});var g=tt(t);n=j(g,"SPAN",{class:!0});var k=tt(n);i=mt(k,c),k.forEach(G),a=ot(g),e=j(g,"BUTTON",{class:!0,title:!0,style:!0,"data-svelte-h":!0}),wt(e)!=="svelte-jdau4z"&&(e.textContent=d),v=ot(g),b=j(g,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),wt(b)!=="svelte-a8rv67"&&(b.textContent=y),w=ot(g),g.forEach(G),this.h()},h(){Z(n,"class","fill-right svelte-1rly1m4"),Z(e,"class","flat on-parent-hover svelte-1rly1m4"),Z(e,"title","Rename Item Tag"),Qt(e,"line-height","1.25em"),Z(b,"class","flat on-parent-hover svelte-1rly1m4"),Z(b,"title","Delete Item Tag"),Z(t,"class","item-row svelte-1rly1m4"),this.first=t},m(f,g){Tt(f,t,g),I(t,n),I(n,i),I(t,a),I(t,e),I(t,v),I(t,b),I(t,w),u||(p=[bt(e,"click",o),bt(b,"click",l)],u=!0)},p(f,g){h=f,g[0]&1&&c!==(c=h[33].name+"")&&xt(i,c)},d(f){f&&G(t),u=!1,Kt(p)}}}function Dr(C){let h,t,n,c,i,a="New",e,d,v,b="Load",y,w,u,p="Save",o,l,f,g=C[0].name+"",k,z,T,U="",x,M,B,L,et,E="Item Editor",P,s="Effect Overview",O,J,R,st,V,q,A,N,X="Effects",H,K,ht,St=C[0].effects.size+"",ft,dt,It,yt,Ct,zt,r="+",Y,W,_=[],m=new Map,S,Q,$,D,rt="Item Tags",it,nt,ct,kt=C[0].item_tags.size+"",_t,At,Mt,Ot,Lt,ut,re="+",se,Nt,Ut=[],ke=new Map,_e,Ht,Pt,Ft,ie="Effect Conversion Tags",Ze,$t,We,pe=C[0].conversion_tags.size+"",Ee,qe,He,le,me,Yt,Qe="+",Ge,ae,Zt=[],$e=new Map,te,Ve,tn;const en=[Ur,Rr],ee=[];function nn(lt,gt){return lt[3]==="item_editor"?0:lt[3]==="effect_overview"?1:-1}~(J=nn(C))&&(R=ee[J]=en[J](C));let Ce=Et([...C[0].effects].sort(ne));const rn=lt=>lt[38];for(let lt=0;lt<Ce.length;lt+=1){let gt=$n(C,Ce,lt),vt=rn(gt);m.set(vt,_[lt]=rr(vt,gt))}let Se=Et([...C[0].item_tags].sort(ne));const sn=lt=>lt[33];for(let lt=0;lt<Se.length;lt+=1){let gt=Qn(C,Se,lt),vt=sn(gt);ke.set(vt,Ut[lt]=sr(vt,gt))}let Ie=Et([...C[0].conversion_tags].sort(ne));const an=lt=>lt[33];for(let lt=0;lt<Ie.length;lt+=1){let gt=Jn(C,Ie,lt),vt=an(gt);$e.set(vt,Zt[lt]=ir(vt,gt))}return{c(){h=at(),t=F("div"),n=F("menu"),c=F("li"),i=F("button"),i.textContent=a,e=at(),d=F("li"),v=F("button"),v.textContent=b,y=at(),w=F("li"),u=F("button"),u.textContent=p,o=at(),l=F("header"),f=F("h1"),k=pt(g),z=at(),T=F("button"),T.textContent=U,x=at(),M=F("menu"),B=F("li"),L=F("select"),et=F("option"),et.textContent=E,P=F("option"),P.textContent=s,O=at(),R&&R.c(),st=at(),V=F("aside"),q=F("section"),A=F("header"),N=F("h2"),N.textContent=X,H=at(),K=F("span"),ht=pt("("),ft=pt(St),dt=pt(")"),It=at(),yt=F("menu"),Ct=F("li"),zt=F("button"),zt.textContent=r,Y=at(),W=F("ul");for(let lt=0;lt<_.length;lt+=1)_[lt].c();S=at(),Q=F("section"),$=F("header"),D=F("h2"),D.textContent=rt,it=at(),nt=F("span"),ct=pt("("),_t=pt(kt),At=pt(")"),Mt=at(),Ot=F("menu"),Lt=F("li"),ut=F("button"),ut.textContent=re,se=at(),Nt=F("ul");for(let lt=0;lt<Ut.length;lt+=1)Ut[lt].c();_e=at(),Ht=F("section"),Pt=F("header"),Ft=F("h2"),Ft.textContent=ie,Ze=at(),$t=F("span"),We=pt("("),Ee=pt(pe),qe=pt(")"),He=at(),le=F("menu"),me=F("li"),Yt=F("button"),Yt.textContent=Qe,Ge=at(),ae=F("ul");for(let lt=0;lt<Zt.length;lt+=1)Zt[lt].c();this.h()},l(lt){fr("svelte-8jldbh",document.head).forEach(G),h=ot(lt),t=j(lt,"DIV",{class:!0});var vt=tt(t);n=j(vt,"MENU",{class:!0});var ce=tt(n);c=j(ce,"LI",{class:!0});var on=tt(c);i=j(on,"BUTTON",{class:!0,"data-svelte-h":!0}),wt(i)!=="svelte-1k02kzi"&&(i.textContent=a),on.forEach(G),e=ot(ce),d=j(ce,"LI",{class:!0});var ln=tt(d);v=j(ln,"BUTTON",{class:!0,"data-svelte-h":!0}),wt(v)!=="svelte-qw05j0"&&(v.textContent=b),ln.forEach(G),y=ot(ce),w=j(ce,"LI",{class:!0});var cn=tt(w);u=j(cn,"BUTTON",{class:!0,"data-svelte-h":!0}),wt(u)!=="svelte-rapr1q"&&(u.textContent=p),cn.forEach(G),ce.forEach(G),o=ot(vt),l=j(vt,"HEADER",{class:!0});var Te=tt(l);f=j(Te,"H1",{class:!0});var un=tt(f);k=mt(un,g),un.forEach(G),z=ot(Te),T=j(Te,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),wt(T)!=="svelte-18krhi0"&&(T.textContent=U),Te.forEach(G),x=ot(vt),M=j(vt,"MENU",{class:!0});var hn=tt(M);B=j(hn,"LI",{class:!0});var fn=tt(B);L=j(fn,"SELECT",{style:!0,class:!0});var Ke=tt(L);et=j(Ke,"OPTION",{"data-svelte-h":!0}),wt(et)!=="svelte-3ev9u7"&&(et.textContent=E),P=j(Ke,"OPTION",{"data-svelte-h":!0}),wt(P)!=="svelte-1u521hn"&&(P.textContent=s),Ke.forEach(G),fn.forEach(G),hn.forEach(G),O=ot(vt),R&&R.l(vt),st=ot(vt),V=j(vt,"ASIDE",{class:!0,style:!0});var ue=tt(V);q=j(ue,"SECTION",{class:!0});var ze=tt(q);A=j(ze,"HEADER",{class:!0});var he=tt(A);N=j(he,"H2",{class:!0,"data-svelte-h":!0}),wt(N)!=="svelte-1ythqko"&&(N.textContent=X),H=ot(he),K=j(he,"SPAN",{class:!0});var xe=tt(K);ht=mt(xe,"("),ft=mt(xe,St),dt=mt(xe,")"),xe.forEach(G),It=ot(he),yt=j(he,"MENU",{class:!0});var dn=tt(yt);Ct=j(dn,"LI",{});var _n=tt(Ct);zt=j(_n,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),wt(zt)!=="svelte-1hf2s1c"&&(zt.textContent=r),_n.forEach(G),dn.forEach(G),he.forEach(G),Y=ot(ze),W=j(ze,"UL",{class:!0});var pn=tt(W);for(let Wt=0;Wt<_.length;Wt+=1)_[Wt].l(pn);pn.forEach(G),ze.forEach(G),S=ot(ue),Q=j(ue,"SECTION",{class:!0});var Ae=tt(Q);$=j(Ae,"HEADER",{class:!0});var fe=tt($);D=j(fe,"H2",{class:!0,"data-svelte-h":!0}),wt(D)!=="svelte-169m74u"&&(D.textContent=rt),it=ot(fe),nt=j(fe,"SPAN",{class:!0});var Oe=tt(nt);ct=mt(Oe,"("),_t=mt(Oe,kt),At=mt(Oe,")"),Oe.forEach(G),Mt=ot(fe),Ot=j(fe,"MENU",{class:!0});var mn=tt(Ot);Lt=j(mn,"LI",{});var gn=tt(Lt);ut=j(gn,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),wt(ut)!=="svelte-1l6bgc9"&&(ut.textContent=re),gn.forEach(G),mn.forEach(G),fe.forEach(G),se=ot(Ae),Nt=j(Ae,"UL",{class:!0});var vn=tt(Nt);for(let Wt=0;Wt<Ut.length;Wt+=1)Ut[Wt].l(vn);vn.forEach(G),Ae.forEach(G),_e=ot(ue),Ht=j(ue,"SECTION",{class:!0});var Be=tt(Ht);Pt=j(Be,"HEADER",{class:!0});var de=tt(Pt);Ft=j(de,"H2",{class:!0,"data-svelte-h":!0}),wt(Ft)!=="svelte-byf7zq"&&(Ft.textContent=ie),Ze=ot(de),$t=j(de,"SPAN",{class:!0});var Ne=tt($t);We=mt(Ne,"("),Ee=mt(Ne,pe),qe=mt(Ne,")"),Ne.forEach(G),He=ot(de),le=j(de,"MENU",{class:!0});var bn=tt(le);me=j(bn,"LI",{});var yn=tt(me);Yt=j(yn,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),wt(Yt)!=="svelte-km21yn"&&(Yt.textContent=Qe),yn.forEach(G),bn.forEach(G),de.forEach(G),Ge=ot(Be),ae=j(Be,"UL",{class:!0});var wn=tt(ae);for(let Wt=0;Wt<Zt.length;Wt+=1)Zt[Wt].l(wn);wn.forEach(G),Be.forEach(G),ue.forEach(G),vt.forEach(G),this.h()},h(){document.title="Procedural Adventure Editor",Z(i,"class","svelte-1rly1m4"),Z(c,"class","svelte-1rly1m4"),Z(v,"class","svelte-1rly1m4"),Z(d,"class","svelte-1rly1m4"),Z(u,"class","svelte-1rly1m4"),Z(w,"class","svelte-1rly1m4"),Z(n,"class","inset stretch svelte-1rly1m4"),Z(f,"class","svelte-1rly1m4"),Z(T,"class","flat"),Z(T,"title","Rename Item Database"),Z(l,"class","inset svelte-1rly1m4"),et.__value="item_editor",Bt(et,et.__value),P.__value="effect_overview",Bt(P,P.__value),Qt(L,"text-align","center"),Z(L,"class","svelte-1rly1m4"),C[3]===void 0&&ge(()=>C[20].call(L)),Z(B,"class","svelte-1rly1m4"),Z(M,"class","inset stretch svelte-1rly1m4"),Z(N,"class","svelte-1rly1m4"),Z(K,"class","detail svelte-1rly1m4"),Z(zt,"class","flat large"),Z(zt,"title","Add Effect"),Z(yt,"class","svelte-1rly1m4"),Z(A,"class","svelte-1rly1m4"),Z(W,"class","scrollable svelte-1rly1m4"),Z(q,"class","inset panel svelte-1rly1m4"),Z(D,"class","svelte-1rly1m4"),Z(nt,"class","detail svelte-1rly1m4"),Z(ut,"class","flat large"),Z(ut,"title","Add Item Tag"),Z(Ot,"class","svelte-1rly1m4"),Z($,"class","svelte-1rly1m4"),Z(Nt,"class","scrollable svelte-1rly1m4"),Z(Q,"class","inset panel svelte-1rly1m4"),Z(Ft,"class","svelte-1rly1m4"),Z($t,"class","detail svelte-1rly1m4"),Z(Yt,"class","flat large"),Z(Yt,"title","Add Conversion Tag"),Z(le,"class","svelte-1rly1m4"),Z(Pt,"class","svelte-1rly1m4"),Z(ae,"class","scrollable svelte-1rly1m4"),Z(Ht,"class","inset panel svelte-1rly1m4"),Z(V,"class","grid auto-rows"),Qt(V,"gap","inherit"),Z(t,"class","main-layout svelte-1rly1m4")},m(lt,gt){Tt(lt,h,gt),Tt(lt,t,gt),I(t,n),I(n,c),I(c,i),I(n,e),I(n,d),I(d,v),I(n,y),I(n,w),I(w,u),I(t,o),I(t,l),I(l,f),I(f,k),I(l,z),I(l,T),I(t,x),I(t,M),I(M,B),I(B,L),I(L,et),I(L,P),Gt(L,C[3],!0),I(t,O),~J&&ee[J].m(t,null),I(t,st),I(t,V),I(V,q),I(q,A),I(A,N),I(A,H),I(A,K),I(K,ht),I(K,ft),I(K,dt),I(A,It),I(A,yt),I(yt,Ct),I(Ct,zt),I(q,Y),I(q,W);for(let vt=0;vt<_.length;vt+=1)_[vt]&&_[vt].m(W,null);I(V,S),I(V,Q),I(Q,$),I($,D),I($,it),I($,nt),I(nt,ct),I(nt,_t),I(nt,At),I($,Mt),I($,Ot),I(Ot,Lt),I(Lt,ut),I(Q,se),I(Q,Nt);for(let vt=0;vt<Ut.length;vt+=1)Ut[vt]&&Ut[vt].m(Nt,null);I(V,_e),I(V,Ht),I(Ht,Pt),I(Pt,Ft),I(Pt,Ze),I(Pt,$t),I($t,We),I($t,Ee),I($t,qe),I(Pt,He),I(Pt,le),I(le,me),I(me,Yt),I(Ht,Ge),I(Ht,ae);for(let vt=0;vt<Zt.length;vt+=1)Zt[vt]&&Zt[vt].m(ae,null);te=!0,Ve||(tn=[bt(i,"click",C[4]),bt(v,"click",C[5]),bt(u,"click",C[6]),bt(T,"click",C[7]),bt(L,"change",C[20]),bt(zt,"click",C[11]),bt(ut,"click",C[14]),bt(Yt,"click",C[17])],Ve=!0)},p(lt,gt){(!te||gt[0]&1)&&g!==(g=lt[0].name+"")&&xt(k,g),gt[0]&8&&Gt(L,lt[3]);let vt=J;J=nn(lt),J===vt?~J&&ee[J].p(lt,gt):(R&&(Xe(),Vt(ee[vt],1,1,()=>{ee[vt]=null}),Je()),~J?(R=ee[J],R?R.p(lt,gt):(R=ee[J]=en[J](lt),R.c()),qt(R,1),R.m(t,st)):R=null),(!te||gt[0]&1)&&St!==(St=lt[0].effects.size+"")&&xt(ft,St),gt[0]&12293&&(Ce=Et([...lt[0].effects].sort(ne)),_=Rt(_,gt,rn,1,lt,Ce,m,W,Dt,rr,null,$n)),(!te||gt[0]&1)&&kt!==(kt=lt[0].item_tags.size+"")&&xt(_t,kt),gt[0]&98305&&(Se=Et([...lt[0].item_tags].sort(ne)),Ut=Rt(Ut,gt,sn,1,lt,Se,ke,Nt,Dt,sr,null,Qn)),(!te||gt[0]&1)&&pe!==(pe=lt[0].conversion_tags.size+"")&&xt(Ee,pe),gt[0]&786433&&(Ie=Et([...lt[0].conversion_tags].sort(ne)),Zt=Rt(Zt,gt,an,1,lt,Ie,$e,ae,Dt,ir,null,Jn))},i(lt){te||(qt(R),te=!0)},o(lt){Vt(R),te=!1},d(lt){lt&&(G(h),G(t)),~J&&ee[J].d();for(let gt=0;gt<_.length;gt+=1)_[gt].d();for(let gt=0;gt<Ut.length;gt+=1)Ut[gt].d();for(let gt=0;gt<Zt.length;gt+=1)Zt[gt].d();Ve=!1,Kt(tn)}}}function ne(C,h){return C.name.localeCompare(h.name)}function Lr(C,h,t){let n=x(),c,i,a="item_editor";function e(){confirm(`Are you sure you want to create a new item database?
Unsaved changes will be discarded.`)&&(t(0,n=new Ye("Unnamed Item Database")),t(1,c=void 0))}async function d(){const q=await cr("application/zip");q&&(t(0,n=await yr(q)),t(1,c=void 0))}async function v(){const q=await br(n);wr(q)}function b(){const q=prompt("Enter item database name:",n.name);q&&t(0,n.name=q,n)}function y(){const q=prompt("Enter item name:");if(!q)return;const A=n.items_create(q);t(1,c=A),t(0,n)}function w(q){confirm(`Are you sure you want to delete "${q.name}"?`)&&(n.items_delete(q),t(0,n))}function u(q){const A=prompt("Enter item name:",q.name);A&&(q.name=A,t(0,n),c===q&&t(1,c=q))}function p(){const q=prompt("Enter effect name:");q&&(n.effects_create(q),t(0,n))}function o(q){confirm(`Are you sure you want to delete "${q.name}"?
All references to the effect will be removed from the item database.`)&&(n.effects_delete(q),t(0,n),t(1,c),t(0,n))}function l(q){const A=prompt("Enter effect name:",q.name);A&&(q.name=A,t(0,n),t(1,c),t(0,n))}function f(){const q=prompt("Enter tag name:");q&&(n.item_tags_create(q),t(0,n))}function g(q){confirm(`Are you sure you want to delete "${q.name}"?
All references to the tag will be removed from the item database.`)&&(n.item_tags_delete(q),t(0,n),t(1,c),t(0,n))}function k(q){const A=prompt("Enter tag name:",q.name);A&&(q.name=A,t(0,n),t(1,c),t(0,n))}function z(){const q=prompt("Enter tag name:");q&&(n.conversion_tags_create(q),t(0,n))}function T(q){confirm(`Are you sure you want to delete "${q.name}"?
All references to the tag will be removed from the item database.`)&&(n.conversion_tags_delete(q),t(0,n),t(1,c),t(0,n))}function U(q){const A=prompt("Enter tag name:",q.name);A&&(q.name=A,t(0,n),t(1,c),t(0,n))}function x(){const q=new Ye("Example Item Database"),A=["electricity","heat","light"].map(ht=>q.effects_create(ht)),N=["electricity"],X=["heat","light"],H=q.conversions_create();return A.filter(ht=>N.includes(ht.name)).forEach(ht=>H.inputs_add(ht)),A.filter(ht=>X.includes(ht.name)).forEach(ht=>H.outputs_add(ht)),q.items_create("light bulb").conversions_add(H),q.item_tags_create("garage"),q.item_tags_create("kitchen"),q.conversion_tags_create("fun"),q.conversion_tags_create("realistic"),q}const M=[[],[]];function B(){a=ve(this),t(3,a)}function L(){c=this.__value,t(1,c),t(0,n)}const et=q=>u(q),E=q=>w(q);function P(){i=this.__value,t(2,i)}const s=q=>l(q),O=q=>o(q),J=q=>k(q),R=q=>g(q),st=q=>U(q),V=q=>T(q);return C.$$.update=()=>{C.$$.dirty[0]&3&&(c&&!n.items.has(c)?t(1,c=void 0):!c&&n.items.size>0&&t(1,c=n.items.values().next().value))},[n,c,i,a,e,d,v,b,y,w,u,p,o,l,f,g,k,z,T,U,B,L,M,et,E,P,s,O,J,R,st,V]}class jr extends ye{constructor(h){super(),we(this,h,Lr,Dr,be,{},null,[-1,-1])}}export{jr as component};
